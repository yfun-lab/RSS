[{"title":"一日一技特别版 | 善用自带识图功能，收集检索物资信息","date":"2022-04-12 06:16:11","description":"在近期疫情影响正常商业和物流的现状下，物资供应问题成为了全社会关心的焦点。本文教你如何利用各品牌手机内置的图片文本提取功能，方便地整理和检索图片形式的物资信息。<a href=\"https://sspai.com/post/72613\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72613"},{"title":"家的风格｜沪漂合租者的「温馨小窝」","date":"2022-04-12 04:44:54","description":"每个人都可以尽自己的努力让自己平时的居家生活更加幸福，这往往不需要付出太大的代价，我一位刚毕业步入职场，几乎没有任何积蓄的小萌新都可以做到，相信我们的家中除了柴米油盐外肯定还有有各种等待被发现的小幸福。<a href=\"https://sspai.com/post/72564\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72564"},{"title":"以「驾驶者为中心」的的设计有什么特点，会带来什么样不同的体验？","date":"2022-04-12 03:05:22","description":"\n<p data-pid=\"FfHydEXo\">通常这类答案会被写成总分总三段论的形式，典型的知乎长文，可那太无趣了。这次我们换一种方式，一条条来，想到哪就写到哪。</p>\n<p><br></p>\n<p data-pid=\"VjGCEVWc\">1.绝不可能为了造型的炫酷、空气动力学等等任何因素牺牲驾驶者视野。</p>\n<p data-pid=\"_59IAY_c\">2.方向盘和座椅的调节范围非常大，维度也够多，保证绝大多数人都能找到舒适且利于驾驶的姿态。</p>\n<p data-pid=\"-ZDoj3cV\">3.即使来到了大屏时代，依旧给驾驶者保留不去按触摸屏的权力，实现形式倒各有千秋。</p>\n<p data-pid=\"hsX6nIm8\">4.方向盘上的功能键设计简洁但可承载的功能多，且操作形式多样，有按压有推拉有滚动，可以轻松盲操作，不会一堆按钮摊大饼，一个巡航就整十个八个的无用功能键，而且全都是按压式。</p>\n<p data-pid=\"K6dyHOie\">5.同上，方向盘后面的左右拨杆设计简洁但可承载的功能多，可以轻松盲操作。</p>\n<p data-pid=\"tzOIoh8t\">6.左脚的休息踏板位置和大小都很合适，右腿搭在中控的位置有软包给小腿做缓冲。</p>\n<p data-pid=\"-VnaK3-4\">7.方向盘拨片不是必需品，但变速箱的标定一定是得顶尖水准。</p>\n<p data-pid=\"K3UAZ8CS\">8.发动机动力不一定强，到了这个年代也不一定非得要求线性，但响应速度是硬指标。</p>\n<p data-pid=\"GPO0TKjE\">9.中控不一定朝驾驶者倾斜，但所有的功能都很自然的触手可及，不需要驾驶者改变坐姿，且每项功能都有清晰的触发反馈。</p>\n<p data-pid=\"zU7drT_l\">10.仪表炫酷不炫酷不重要，有没有各种高深的性能参数也不重要，数字还是指针在这个年代也已经不那么重要，但一定得耐看，配色、线条、布局神马的经得住时间考验，没有杀马特的特效出来捣乱。</p>\n<p data-pid=\"WK0gle1I\">11.总布置上，如果有可能的话，让驾驶者坐的尽量靠后，恨不得坐在后轴上为佳，但同时在设计上尽可能地能让驾驶者看到车头。</p>\n<p data-pid=\"1tq1E7oN\">12.接第一条，除了造型上保证几块车窗视野外，三块后视镜的视野也会让你禁不住赞叹真是眼观六路。很多车为了轿跑溜背造型随随便便牺牲中央后视镜视野，就别来谈什么驾驶者中心设计了。</p>\n<p data-pid=\"22ZTAyLF\">13.方向盘可能长的不好看，用料也不一定非得高级，但握持手感肯定一级棒。沟沟坎坎都已经按照标准三九点驾驶姿态给你设计好了，手指放在上面非常舒服，就像卡进了模具里。揉起来也必须顺畅，像揉轮过程中会误触功能键这种低级错误是绝对不能发生的。</p>\n<p data-pid=\"hTLsZcP7\">14.接上条，方向盘转动力矩，以及转向回馈，各家有各家的理解，但有一点是共识——圈数不能太多，且不能和路面有隔离感。如果有条件的话会上可变转向比。某些宣称自己是驾驶者之车，结果方向盘动不动就得揉三圈多的，还有方向盘感受不到路面反馈的，就别来凑热闹了。</p>\n<p data-pid=\"WqPPoUsY\">15.这个年代不苛求保留手动挡版本了，但在电子档把时代还在坚持做握持感良好的档把式设计的，可以理解为还保留了以驾驶者为中心的美好愿景，当然行不行还得看疗效，有些可能只是为了省钱而已，有些是真的能在驾驶过程中加分。</p>\n<p data-pid=\"020tZ09D\">16.其它的换挡形式，怀挡姑且可以认为和驾驶者为中心不冲突，至于别的那些牛鬼蛇神，什么旋钮式、按键式、仪表旁边标新立异式……通通都是非驾驶者中心设计了。（不是说这些换挡形式不好）</p>\n<p data-pid=\"ygcVUTF7\">17.驾驶位置有后备箱开启按键，别笑，好多车真的没有。另外如果成本够的话，后备箱得是电动的，驾驶位能开还得能关。</p>\n<p data-pid=\"fKZQ1D3-\">18.机舱盖开启是内部双拉式的，别让人去车头摸一手油灰混合物，毕竟驾驶者为中心的车，开启机舱盖的频率不会太低。</p>\n<p data-pid=\"u4CznLBr\">19.自动空调设定好以后，能做到真的除了调温度，别的都不需要调。风速、风口、循环模式甚至玻璃除雾以及后视镜除雾等功能都可以智能调节，别整那种还得自己调风速的半自动空调来糊弄事。</p>\n<p data-pid=\"S_SFR3IR\">20.在座椅记忆功能上绝不吝啬，能全系配齐就全系佩奇，且座椅记忆和后视镜记忆是联动的。</p>\n<p data-pid=\"6w7GooHZ\">21.有条件的话，座椅加热和通风都配上，座椅通风得是吸入式的，吹风的不灵。</p>\n<p data-pid=\"Ug_xIUMg\">22.再补充一条设计方面的，在布置允许的情况下，Dashboard在X向尽可能短，Z向尽可能低。把工程语言翻译成人话就是，不会让驾驶者和车头有距离感。</p>\n<p><br></p>\n<p data-pid=\"qR9uv2Ez\">就凑个22条军规吧。想累了，先不想了。欢迎评论再补充。</p>\n<p data-pid=\"AD4ot3dQ\">上面所有这些跟驾驶者为中心相关的，正面或者负面，都是有实际案例的，也欢迎大家在评论区对号连连看。</p>\n<p data-pid=\"xLj4ut0b\">拿着这些去倒推，你就会发现哪些品牌是真的在乎驾驶体验，哪些只是说说而已。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/cranks?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">Sea</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/525006497/answer/2435350524?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">3 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/358917990?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">保时捷、奔驰、宝马、奥迪哪个驾驶体验比较好，开着比较爽?</a><br><a href=\"http://www.zhihu.com/question/50750050?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">宝马操控好一点还是保时捷操控好一点（或者说好开一点）？</a><br>\n","link":"http://www.zhihu.com/question/525006497/answer/2435350524?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"派早报：vivo 发布首款折叠屏手机与首款平板，Windows 11 将开放第三方小组件等","date":"2022-04-12 01:03:48","description":"Apple 新专利显示或将开发游戏手柄，Apple Studio Display 无法更新的问题已修复等。<a href=\"https://sspai.com/post/72610\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72610"},{"title":"第三排座椅和后备箱空间是鱼与熊掌的关系吗？","date":"2022-04-11 11:44:26","description":"\n<p data-pid=\"dpA2pahz\">1.整车车长的关键尺寸是轴距、前后悬、车高、车宽。 </p>\n<p data-pid=\"2MtEXBRa\">轴距决定前后轮胎位置，也决定了三排人员的前后布置关系。Z向：一般MPV的人体布置关系第三排人R点高于第二排高于第一排，X向：第一排人体膝部弯曲程度小于第二排小于第三排。从MPV人机布置上就给第三排的人体是一个最高、最后、最紧凑的人机空间。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-2d8b0cf59183ba8936d033f6dedc9e55_720w.jpg?source=b1748391?rss\" data-rawwidth=\"1024\" data-rawheight=\"1130\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-2d8b0cf59183ba8936d033f6dedc9e55\" data-watermark-src=\"v2-79e04dc3691a4a48a77da4d790d35b93\" data-private-watermark-src=\"v2-49008b5fabeb0730d7b2a1d0d1bc8016\"></p>\n<p data-pid=\"bKaLWSN2\">因此MPV做不出运动的姿态，因为要保证第三排人的头部空间，车顶后部不可以遛太猛，后挡玻璃不可以倾斜过大。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-1eb23caa6d8ec2cc51066cd4c32d7c66_720w.jpg?source=b1748391?rss\" data-rawwidth=\"2100\" data-rawheight=\"1575\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-1eb23caa6d8ec2cc51066cd4c32d7c66\" data-watermark-src=\"v2-56f62c2a38f40b7d2cc65c8cb07f9a1f\" data-private-watermark-src=\"v2-acfae4667c97c7cd22f92692ec3147a3\"></p>\n<p data-pid=\"D6N2L16i\">后轮胎位置决定了第三排乘客的舒适性，但第三排乘客由于整个车尺寸的限制，不得不把第三排乘客放在后轮上方的位置，所以第三排乘客大腿两侧的空间很局促。详见奥德赛第三排座椅的图片</p>\n<p><img src=\"https://pic2.zhimg.com/v2-14088480fc77cfc257974b14b18f7158_720w.jpg?source=b1748391?rss\" data-rawwidth=\"1920\" data-rawheight=\"1440\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-14088480fc77cfc257974b14b18f7158\" data-watermark-src=\"v2-19144e5e58d0b079b3e4d69b777a52f9\" data-private-watermark-src=\"v2-45cfc13c9734d6e56ef2c8e310578953\"></p>\n<p data-pid=\"zxAvIYuv\">由于第三排位置在轮腔附近，第三排座椅要支持翻折不能和轮腔护板干涉，所以做了局部造型避让。这样Y向空间被压缩。第三排空间较差。所以第三排空间乘客不会有老板椅、不会有腿拖，第三排乘客的座椅为了保腿部空间一般坐垫长度会短、坐垫角度更斜，靠背角度更立，靠垫宽度会小</p>\n<p><img src=\"https://pic2.zhimg.com/v2-602051c1484b2070a3bc1f8fc2d65be4_720w.jpg?source=b1748391?rss\" data-rawwidth=\"3840\" data-rawheight=\"2880\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-602051c1484b2070a3bc1f8fc2d65be4\" data-watermark-src=\"v2-b78ba9192bc9be535a1cc518e4e46fec\" data-private-watermark-src=\"v2-300e69fd1800135459f71c453281c7a3\"></p>\n<p data-pid=\"MDW-fFTX\">2.为什么不能后备箱空间和第三排空间兼容，最大的问题是车辆的尺寸会加大。如果把人体和后轮都加大，这台MPV可能轴距大于3000mm，加上前后悬长度，这台车妥妥大于5100mm，一辆这么大的车开起来不方便。再是第三排人体靠后移动，整个车窗会加长，整个车会显得很笨拙。整车是一个MPV的定义，离地间隙本身就小，轴距、车身不断的加大，纵向通过角变差。整车成本与车重会由于加长而大幅度提高，这是无法忍受的。整车单位厘米长度有一个大致的成本与重量估值，单一的为了改变一个储物和第三排空间问题而增加这么多成本与问题是不可能被推动的。</p>\n<p data-pid=\"LB1yVtWA\">3.因此第三排座椅一开始就被定义成为了只会被临时乘坐的位置，适当时候被放弃了各种空间与舒适性的追求。为了加大行李箱空间，第三排就不要坐人了。奥德赛就是这样做了座椅翻折后纯平地毯</p>\n<p><img src=\"https://pic2.zhimg.com/v2-cf4a69108efd80cc999c8450fa5e9dfd_720w.jpg?source=b1748391?rss\" data-rawwidth=\"1920\" data-rawheight=\"1440\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-cf4a69108efd80cc999c8450fa5e9dfd\" data-watermark-src=\"v2-870a3a1ab5d9eba9be5d4ebccd220e48\" data-private-watermark-src=\"v2-f626ee37ae5afeefab910a3731e8c343\"></p>\n<p><br></p>\n<p><img src=\"https://pic3.zhimg.com/v2-388a86c138d5cb8e7f0b5db0ddc7d5b5_720w.jpg?source=b1748391?rss\" data-rawwidth=\"1920\" data-rawheight=\"1440\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-388a86c138d5cb8e7f0b5db0ddc7d5b5\" data-watermark-src=\"v2-c67e66480597520be3a57738c3229ec8\" data-private-watermark-src=\"v2-a9f2514113b3b4badc77b8cf33274f9e\"></p>\n<p data-pid=\"71QArcAg\">所以它把备胎放在了一个你猜不到的位置</p>\n<p><img src=\"https://pica.zhimg.com/v2-3df8ec68b2cda99661de85afa5d05558_720w.jpg?source=b1748391?rss\" data-rawwidth=\"630\" data-rawheight=\"473\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-3df8ec68b2cda99661de85afa5d05558\" data-watermark-src=\"v2-06cd128b4db39ea106446f18c165e237\" data-private-watermark-src=\"v2-7dfba605541cfc3f6ae5ccc3bd92c9e1\"></p>\n<p><br></p>\n<p><img src=\"https://pic2.zhimg.com/v2-153020a7ad60c8bc5246c220271d4483_720w.jpg?source=b1748391?rss\" data-rawwidth=\"630\" data-rawheight=\"473\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-153020a7ad60c8bc5246c220271d4483\" data-watermark-src=\"v2-ad2f10c0db3acc9248159b4abfc4160b\" data-private-watermark-src=\"v2-2239d03c97a757779c2bb74f05f19352\"></p>\n<p><br></p>\n<p><img src=\"https://pic3.zhimg.com/v2-ed084ebd91bfcb8e25ed7a334e66805d_720w.jpg?source=b1748391?rss\" data-rawwidth=\"630\" data-rawheight=\"473\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-ed084ebd91bfcb8e25ed7a334e66805d\" data-watermark-src=\"v2-7cd8416b1a801d9f2aaa498c049c41a5\" data-private-watermark-src=\"v2-1dc1b9156084e8421dfad45f332c7051\"></p>\n<p data-pid=\"dwrXkDPW\">谢谢观看，欢迎点赞收藏</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/li-yang-63-85?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">Mikouer</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/525018448/answer/2431884258?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">7 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/277815148?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">七座suv第三排座椅的意义是什么？</a><br><a href=\"http://www.zhihu.com/question/317111046?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">轿车与SUV哪个舒适性高?</a><br>\n","link":"http://www.zhihu.com/question/525018448/answer/2431884258?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"「零重力座椅」是什么意思？","date":"2022-04-11 10:02:18","description":"\n<p data-pid=\"0NFhvqKr\"><b>零重力=失去重力，通过将汽车座椅设计与零重力原理相结合，为用户打造一个极度舒适的乘坐体验。</b></p>\n<p data-pid=\"ak0w8ESe\">NASA的NBP研究显示，零重力环境中的人体在放松且不施加外力的情况下往往会表现出特定的姿势模式，可以最大限度地减少身体抵抗重力的需要，从而减轻身体压力。</p>\n<p data-pid=\"c6OTuDsO\">而这样漂浮在外太空的失重状态，能让人感受到舒适与放松。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-d34e52294946016396fec0c218aaba31_720w.jpg?source=b1748391?rss\" data-rawwidth=\"549\" data-rawheight=\"643\" data-size=\"normal\" data-caption=\"图片来源于NASA《Neutral Body Posture in Spaceflight》\" data-watermark=\"original\" data-original-src=\"v2-d34e52294946016396fec0c218aaba31\" data-watermark-src=\"v2-7f80c0883f1007dbf2ead654ea3a8cbe\" data-private-watermark-src=\"v2-e03128d03d3e77095224691ae4a2be33\"></p>\n<p data-pid=\"oqEA2FMb\">零重力座椅想打造的就是这种极致的舒适。想要达到这种效果，就需要让人的身体与座椅接触到的部分尽可能减少或均匀分布压力。</p>\n<p data-pid=\"-CRtaEYv\">图片中可以看到座椅上采用了零重力填充层和高衰减发泡，这实际上是一种特殊的厚厚的海绵，具有<b>高衰减、硬度特低、耐久性能好</b>等特点。</p>\n<p data-pid=\"-wgl9ZEA\">人坐下后身体的重量一般都会作用到坐骨上，零重力填充层能够依托住用户的身体，分散他们身体的压力。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-599bfc8b60c3263c95740fd0458dd17e_720w.jpg?source=b1748391?rss\" data-rawwidth=\"1080\" data-rawheight=\"607\" data-size=\"normal\" data-caption=\"图片来源于网络，侵删\" data-watermark=\"original\" data-original-src=\"v2-599bfc8b60c3263c95740fd0458dd17e\" data-watermark-src=\"v2-1ca6edc4cce5a2e2c78495017d91fd3a\" data-private-watermark-src=\"v2-e6b409625fa8d9132595f7c1ff2ccea6\"></p>\n<p data-pid=\"eqwPvnik\">零重力座椅还会在坐垫、靠背骨架上设置支撑弹簧，让座椅设计更加贴合人的脊椎，让乘坐者的背部和臀部都能够得到均衡的支撑。</p>\n<p data-pid=\"8jcNLHc_\">发展到智能汽车时代，相较于图片上的座椅，零重力座椅又有了新的变化。像宝马X7配备的ZeroG Lounger零重力座椅，用户可以根据自身舒适需求调解座椅角度，甚至可以达到一个<b>“躺平”</b>的状态，放松用户的脊背，达成“失重”的舒适感。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-6a23afca2bf36839cf6c5f4ae308bd4c_720w.jpg?source=b1748391?rss\" data-rawwidth=\"600\" data-rawheight=\"250\" data-size=\"normal\" data-caption=\"宝马x7零重力座椅\" data-watermark=\"original\" data-original-src=\"v2-6a23afca2bf36839cf6c5f4ae308bd4c\" data-watermark-src=\"v2-6347d0262876592971c9d44b3bf7a60e\" data-private-watermark-src=\"v2-40816a7a2699ac055b845cf7e239ecfe\"></p>\n<p data-pid=\"CUkSomsi\">希望我的回答能对你有帮助~</p>\n<p><br></p>\n<p data-pid=\"d6wmr7_6\">———— </p>\n<p data-pid=\"byeczc48\">听说有品味的人都点赞了？ </p>\n<p data-pid=\"rKAf1nI1\">以上仅代表个人观点，意见不同就是你对。 </p>\n<p data-pid=\"yUYfRDI4\">我是 <a href=\"https://www.zhihu.com/people/d119eee8b37f778cb734911663feb431\" class=\"internal\">@Vivian</a>，智能汽车新新人类，对自动驾驶有点上头。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/question/524839563/answer/2434354772?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\">知乎用户（登录查看详情）</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/524839563/answer/2434354772?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">2 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/463036672?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">杜卡迪V2 宝马拿铁 还有R1250GS到底买哪个？</a><br><a href=\"http://www.zhihu.com/question/494191818?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">该不该分期买杜卡迪v2呢？</a><br>\n","link":"http://www.zhihu.com/question/524839563/answer/2434354772?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"派评 | 近期值得关注的 App","date":"2022-04-11 09:46:48","description":"你可以通过文章目录快速跳转到你感兴趣的内容。如果发现了其它感兴趣的 App 或者关注的话题，也欢迎在评论区和我们进行讨论。<a href=\"https://sspai.com/post/72604\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72604"},{"title":"[限时福利]产品沉思录：微软如何能做到市值 $10T ？","date":"2022-04-11 09:23:41","description":"\n<h2>\n<br><strong>本期概要</strong>\n</h2>\n<ul>\n<li>\n<code>封面</code> <a href=\"https://www.sothebys.com/en/auctions/ecatalogue/2012/fine-chinese-paintings-hk0398/lot.1318.html?locale=en\">张大千 ，CASCADES IN LUSH MOUNTAINS，1975</a> &amp; 卷首语</li>\n    <li>\n<code>分享</code> <a href=\"mailto:forwebsite2022@gmail.com\">forwebsite2022@gmail.com</a> <strong>的 Worthy Five</strong>\n</li>\n    <li>\n<code>观点</code> 事实与叙事</li>\n    <li>\n<code>台杉</code> 学习一家爱尔兰科技公司 Tines 对 No-Code 的解法</li>\n    <li>\n<code>产品</code> Shape Up：来自 Basecamp 的产品方法论</li>\n    <li>\n<code>观点</code> 微软如何能做到市值 <code>$10T</code> ？</li>\n</ul>\n<h2><strong>卷首语</strong></h2>\n<p>最近拿到了中信出版社的「Naval 宝典中文版」，虽然之前看过很多遍，但是常读常新。这次再读带来了一个新的启发。</p>\n<p>因为在去年一年，我在哲学、宗教、心理学上花了很多时间思考，为的是和自己和解，和他人和解。理解作为一个人应该遵循哪些原则和其他人相处，也能如何让自己获得内心的平静。但这很容易陷入虚无主义，毕竟公园里不少大爷这方面知识储备也不弱。</p>\n<p><strong>马克思说：哲学家们只是用不同的方式解释世界，而问题在于改变世界。</strong></p>\n<p>所以如果要改造世界，那么该相信及持有哪些自然法则呢？</p>\n<ul>\n<li>Naval 选择的是杠杆</li>\n    <li>巴菲特选择的是复利</li>\n    <li>南添选择的是网络效应</li>\n</ul>\n<p>当然以上只是片面的例子，他们遵循的肯定不止这一个。而对我的启发在于，在认识世界的角度，自己信仰的原理是什么？因为基础的物理和数学不会以人的意志为转移，不断地精进下来，既能更好地分析事物的结构，也能更好地发现事物之间的联系。</p>\n<p>意识到这些之后，接下来探究的方向会更清晰一些，也能让自己的理性世界观更加坚实一些。当自己哲学和科学信仰建立以后，或许才能成为一个更完整的人。</p>\n<p>其他：</p>\n<ul>\n<li>「松节油」的内容是在 Notion 的旅行者俱乐部更新，不用再去关注「小报童投递」服务号。新同学更不要订阅完沉思录后，再去再单独购买「松节油」然后找我退费，因为会被扣掉许多手续费……</li>\n    <li>续订的同学不用着急，今年会一直保持 199 元的价格不变。到期也会有邮件提醒，如果未收到可以加我微信「ProductThinking2017」，<strong>不要着急续费或者买多年，避免冲动消费。</strong>\n</li>\n</ul>\n<p>—— <a href=\"https://airtable.com/shrBGRAunoXNCuc7j\">封面也邀请你来征稿提供</a> 采用了画作的朋友，可赠送一年的订阅名额和一本你想读的书。</p>\n<p>[......]</p>\n<a href=\"https://sspai.com/post/71904\" target=\"_blank\">查看全文</a><p>本文为付费栏目文章，出自<a href=\"https://sspai.com/series/218\" target=\"_blank\">《产品沉思录》</a>，订阅后可阅读全文。</p>\n","link":"https://sspai.com/post/71904"},{"title":"医疗的未来还是资本的大饼：在线问诊平台横评","date":"2022-04-11 08:11:12","description":"各平台的在线问诊水平到底如何？我们真金白银测测看。<p>[......]</p>\n<a href=\"https://sspai.com/prime/story/vol016-online-consultation-01\" target=\"_blank\">查看全文</a><p>本文为会员文章，出自<a href=\"https://sspai.com/prime/precog/vol016-pre-back-to-work\" target=\"_blank\">《开工第一周》</a>，订阅后可阅读全文。</p>\n","link":"https://sspai.com/prime/story/vol016-online-consultation-01"},{"title":"能少一个是一个：我用 Raycast 替代了这些应用","date":"2022-04-11 06:31:59","description":"我其实一直不是「启动器」类应用的重度用户，普通使用如打开应用、查文件、查词、计算器等操作，用用 macOS 内建的 Spotlight 就足够了。至于剪贴板管理、窗口管理等需求，市面上也有那么多优秀应用供选择。\nRaycast 的界面简洁明了，可以说会用 Spotlight 就会用它。我初次使用时已经是比较新的版本了，v1.26.0 开始的新 onboarding 指南（也就是「新手教学关」），以一种新颖又不失乐趣的方式，带领新用户探索一些 Raycast 的特性，还会有任务与进度追踪，一下子就被吸引住了。再加上开发团队有趣又更新勤快，changelog 写得认真，总之带给我很大好感。使用 Raycast 有一段时间了，也渐渐摸索了不少门道。下文将和大家分享我使用 Raycast 替代了哪些应用，以及其中的小技巧。<a href=\"https://sspai.com/post/72540\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72540"},{"title":"如何看待丰田发布燃料电池轿车Mirai的第二代？丰田未来的新能源路线会是怎样的？","date":"2022-04-11 05:01:51","description":"\n<p data-pid=\"3VbehuSY\">我可能是知乎上为数不多一代和二代Mirai都开过的，可以跟题主分享一些自己的体验和想法。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-819fa0c6b915fc184435cfbe43ea0a14_720w.jpeg?source=b1748391?rss\" data-caption=\"燃料电池电堆工作原理\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"343\" data-watermark=\"original\" data-original-src=\"v2-819fa0c6b915fc184435cfbe43ea0a14\" data-watermark-src=\"v2-8929eef954bcd40f2a4000f8e43f74e1\" data-private-watermark-src=\"v2-be0695874819e4122b65a94d04de7311\"></p>\n<p data-pid=\"LqWmvHyg\">先简单过一下FCV车型的能量转化原理。FCV车型的核心是燃料电池堆，这是一个让氢气与空气中氧气平稳、缓慢反应，释放电能的过程，也就是说FCV车型的排放只有水。初中咱们就做过电解水的试验，FCV的反应过程其实就是电解水的逆向。</p>\n<p data-pid=\"u501wsUa\">FCV车型的能量流并不难理解，以第二代Mirai为例，它是通过燃料电池堆发的电驱动电机，同时还“并联”一块容量不到2kWh的小型锂电池，这块锂电池起到辅助蓄能的作用，燃料电池可以给它充电，车辆动能回收的电能也储存其中，这块小电池也会参与到驱动车辆。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-2b6a9dc85423e68636572c244847a7ce_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1290\" data-rawheight=\"698\" data-watermark=\"original\" data-original-src=\"v2-2b6a9dc85423e68636572c244847a7ce\" data-watermark-src=\"v2-8e56450f425ea4e34cdc37a6c7706610\" data-private-watermark-src=\"v2-c050f30c261bc1364a348d002ce255db\"></p>\n<p data-pid=\"ajAFbnJx\">具体工作，按照驾驶场景罗列就是这样的：</p>\n<ol>\n<li data-pid=\"U9fkvG9i\">车辆起步阶段，燃料电池关闭，此时由锂电池直接驱动车辆前进；</li>\n<li data-pid=\"52-TY4cV\">日常低负荷行驶时，由燃料电池发电并驱动车辆；</li>\n<li data-pid=\"37pwSc4W\">大负荷加速时，燃料电池和小电池同时为电机提供动力；</li>\n<li data-pid=\"FSMxda2q\">下坡、刹车时，燃料电池关闭，动能回收将动能转化为电能存储在小电池中，为下一次加速做准备；</li>\n<li data-pid=\"D6q-fa3c\">任何时候锂电池电量低于一定SOC，燃料电池都会启动为其充电。</li>\n</ol>\n<p data-pid=\"tKpYVwEb\">在我看来，决定FCV车型体验的几个重要指标如下：</p>\n<ol>\n<li data-pid=\"9VZq895C\">燃料电池本身的性能。包括质子交换膜、催化剂（铂）的用量、活性保持等等，这些都严重关系到车辆的成本、可靠性、电堆寿命；</li>\n<li data-pid=\"BrFvIy7C\">储氢罐的布置。氢气在常温下极难压缩成液态，因此FCV车型的储氢罐里面也是高压气态氢，压力在70MPa以上，因此储氢罐的体积和布局，会影响FCV车型的内部空间与驾驶感受。</li>\n<li data-pid=\"W7YLsk93\">续航。FCV车型的续航能力很大程度上依赖单次储氢量，这个好理解，跟汽油车油箱容积、BEV车型动力电池容量是一个道理。</li>\n<li data-pid=\"qzb-xdyo\">NVH。FCV车型燃料电池堆高负荷运转时，噪音是比BEV车型略大的，因此厂商还是需要针对FCV车型做噪音优化。</li>\n<li data-pid=\"0eVz2j_U\">氢动力上游设施的完善与普及。这个和车型关系不大，也不是一两家车企能独立搞好的，需要高纯度工业制氢、储运、加氢站建设等多方面共同努力。</li>\n</ol>\n<p><img src=\"https://pic2.zhimg.com/v2-9093b66dd0eae975fdcb4f2de05b487c_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1280\" data-rawheight=\"720\" data-watermark=\"original\" data-original-src=\"v2-9093b66dd0eae975fdcb4f2de05b487c\" data-watermark-src=\"v2-bc9f8d832a8ceab77b5afdd305d0ef8a\" data-private-watermark-src=\"v2-30e39557c157525d8a3b458203f40d81\"></p>\n<p data-pid=\"BPwyHftR\">回过头来看Mirai，第一代Mirai发布时，我认为丰田做出的主要贡献，首先是将FCV技术正式带向乘用车领域，让产品从难以企及的成本高度下探到50万元级别。我当年是在如皋燃料电池大会上试驾到的第一代Mirai，车辆已经满足平稳运行、加速顺畅等基本要求，但要是从直观的产品竞争力而言，第一代Mirai开起来的表现并不出色，巨大的储氢罐挤占了本该属于乘客的空间，座椅、内饰板材等处的用料也难与50万元级别的新能源车型竞争，操控感受偏滞重，你会明显感觉到燃料电池系统拖了整台车的动态表现。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-e5442a54dc7af33074ff393b9ed09100_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1800\" data-rawheight=\"1200\" data-watermark=\"original\" data-original-src=\"v2-e5442a54dc7af33074ff393b9ed09100\" data-watermark-src=\"v2-163cf428503f9545577ada62cffc0a8b\" data-private-watermark-src=\"v2-865930c30b62e2647ba1ee27e0c49091\"></p>\n<p data-pid=\"jnFkj7X8\">可来到第二代Mirai上面，一切都不一样了，它与初代Mirai从产品形态到驾驶质感，方方面面都体现出了极大的差异。第二代Mirai用的是丰田TNGA-L平台，这个平台的车型还包括雷克萨斯LS、LC，等于丰田把FCV系统嵌入到了旗舰车平台上面，以至于我同事一眼看到Mirai时，他第一反应竟然是“雷克萨斯又出新车了”（他是两台雷克萨斯车主）。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-d9e7e8d88101c67a4820f2e7c5d4d6de_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2134\" data-rawheight=\"769\" data-watermark=\"original\" data-original-src=\"v2-d9e7e8d88101c67a4820f2e7c5d4d6de\" data-watermark-src=\"v2-3a55d7b975ea08cfe1b2a37eb9cd97c4\" data-private-watermark-src=\"v2-e9df26da5e66552839d7bddbd2d2ac34\"></p>\n<p data-pid=\"Tqeb-s-M\">在我看来，从一代到二代，这个过程可以看做丰田从为了FCV开发了一台车，到为了一台车开发FCV的过程。二代Mirai内部布局与一代车型也有天翻地覆的变化，一代车型用的是两个大储氢罐，一粗一细横向布置在后排座椅下方和后轮中央；而二代车型采用3个储氢罐，两大一小，分别布置在车厢中央、后排座椅下方和后备箱处。在储氢罐数量增多的同时，总储氢量也从一代Mirai的5kg提升到5.6kg。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-34428a52a6d68a5532025643c7a1ef64_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"900\" data-rawheight=\"506\" data-watermark=\"original\" data-original-src=\"v2-34428a52a6d68a5532025643c7a1ef64\" data-watermark-src=\"v2-3d75262df73c06082d362aab606c7396\" data-private-watermark-src=\"v2-b63be1e3437bb0f926d964b8d2e8a3dd\"></p>\n<p data-pid=\"HiMey-KA\">布局的优化不止储氢罐，燃料电池堆也从一代的前排乘员下方挪到了前轴中央，与燃油车发动机位置基本一致，而驱动电机和小电池则放在了后轴，这样的布局使得第二代Mirai可以更有效地分配前后轴荷，最终达到50:50的平衡。实际驾驶中，第二代Mirai开起来与一台高端BEV轿车别无二致，FCV的特性使其在动力表现上做到了无延迟的加速，同时由于前后轴荷均衡，且FCV核心零部件均位于车辆中央，因此第二代Mirai的操控相对一代有着质的提升，转向时车辆的中心感非常明确，并不会出现车尾滞重拖泥带水的现象。第二代Mirai虽然车身长度接近5米，轴距也有2.92米，但开起来并不像一台大车，TNGA-L平台不是盖的，底盘滤振、噪音控制都能与豪华品牌中大型轿车一较高低，而没有发动机带来的天然优势，又让这台车的静谧性表现更加突出了。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-c917587f1925d3c668abc58dee04f2bd_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1800\" data-rawheight=\"1350\" data-watermark=\"original\" data-original-src=\"v2-c917587f1925d3c668abc58dee04f2bd\" data-watermark-src=\"v2-5649fbe72daa0483d8311f9c6c53b55c\" data-private-watermark-src=\"v2-37f5b9c2c7472472cba9ab59195a85eb\"></p>\n<p><img src=\"https://pic2.zhimg.com/v2-6c00d1c9e8af5bdcd26184f25154df5a_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1800\" data-rawheight=\"1350\" data-watermark=\"original\" data-original-src=\"v2-6c00d1c9e8af5bdcd26184f25154df5a\" data-watermark-src=\"v2-b9f47f5a13a421721d1bcba89c8d93ae\" data-private-watermark-src=\"v2-6ac3079fccddf296cf98df19a0357e24\"></p>\n<p data-pid=\"M07ufnbM\">如果说非要区别于BEV车型，那就是第二代Mirai在急加速时，仍会隐约听到FCV喷射氢气极轻微的“呲呲”声。我开的这台试驾车之前是被奥组委“征用”，在冬奥会上服役的车辆，因此用的还是雪地胎。但即便如此，高速行驶中车辆的胎噪也并不明显，可见第二代Mirai对NVH的优化已经相当不错了。</p>\n<p data-pid=\"iARWE5Je\">不光是布局，第二代Mirai的功率密度也有所升级。第二代Mirai的FCV堆栈功率密度从3.5kW/L提升至5.4kW/L，燃料电堆最大输出功率也从155Ps提升至174Ps，电机最大输出功率则是达到了182Ps。实际体验中，对于电驱车辆而言，182Ps推动1.9吨重量，仍然可以非常轻松地完成超车，毕竟随叫随到的动力是FCV和BEV共有的先天优势。</p>\n<p data-pid=\"MyqhPtL8\">续航方面，第一代Mirai在JC08工况下的续航成绩为650km，第二代Mirai切换到难度更高的WLTC工况后，综合续航反而提升到850km。而且不同于多数BEV车型充满电只显示理论续航，第二代Mirai仪表盘上显示的剩余续航是根据过往车辆的驾驶情况算出来的，可以实现表显续航1:1的“掉氢”速度。我这台车在装备了雪地胎的不利情况下，个人估测其满氢续航可达500公里以上，换成原厂轮胎的话这个数字只会更高。</p>\n<a href=\"https://www.zhihu.com/video/1496822477078163456\">第二代Mirai加氢</a><p data-pid=\"jo9wASi7\">FCV车型的补能操作和加油没什么区别，体验也很顺畅，全程大概5分钟就可以搞定。相比加油多出来的一步操作，就是除了插枪之外，还要给车辆连一根接地线，目的是将可能存在的静电及时导入大地，确保安全。相比BEV车型的充电或者换电，FCV在补能体验上无限接近传统燃油车，对车主来说还是非常友好的。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-1954b75d1bbf747912ccabdeda821d84_720w.jpeg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1800\" data-rawheight=\"1013\" data-watermark=\"original\" data-original-src=\"v2-1954b75d1bbf747912ccabdeda821d84\" data-watermark-src=\"v2-61d8b85ffe2a3037d82ca2067d8353e8\" data-private-watermark-src=\"v2-611c96a3c2cbedd4c2efbd23d1606896\"></p>\n<p data-pid=\"PaMf7YNh\">虽然FCV仍然是比较超前的技术，但我国对氢能源产业始终保持积极乐观的态度，从终端远高于其他新能源产品的补贴力度，到上个月印发的《氢能产业发展中长期规划（2021-2035年）》，都明确表达了氢能源中长期的重要战略地位，上汽、长城等品牌也在FCV领域持续发力。</p>\n<p data-pid=\"cX9E2QcO\">目前乘用车领域，丰田是极少数成功开发FCV车型并实现代际演进的，基于TNGA-L的Mirai即便放到燃油和BEV中大型轿车中，其续航体验、补能体验、驾驶品质等方面也具备相当强的竞争力。在我看来，第二代Mirai更像是丰田秀肌肉的存在。对于丰田这样体量的车企而言，并不存在非此即彼的二极管行为，HEV、PHEV、BEV、FCV，丰田在HEV已经是多年的头号玩家，PHEV和BEV领域正在集中投放产品，在“战未来”的FCV领域拥有从技术原型到产品迭代的全套积累，这给了丰田极大的自由度。未来的某一天，FCV产业链只要形成，丰田就能第一时间用乘用车/商用车的终端产品参与其中，甚至成为上游产业链中不可或缺的一环。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/kai-zi-56?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">凯凯</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/437669177/answer/2433808087?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">5 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/66057450?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">如何看待丰田召回燃料电池车MIRAI？</a><br><a href=\"http://www.zhihu.com/question/36813219?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">Toyota Mirai 液态氢气动力能否代替纯电动车？</a><br>\n","link":"http://www.zhihu.com/question/437669177/answer/2433808087?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"女生考研频频被他人恶意修改志愿，疑因个人信息泄漏，具体情况如何？谁该为此负责？","date":"2022-04-11 03:46:09","description":"\n<p data-pid=\"JXw9MHB0\">这可是人家女孩子一辈子的前途命运啊</p>\n<p data-pid=\"EGzDcpF3\">经历过考研的人都知道 一路多么不容易</p>\n<p data-pid=\"NEKZcdMw\">哎</p>\n<p data-pid=\"s6goZa8m\">……</p>\n<p data-pid=\"oEUJCZ8D\">“人在做 天在看”</p>\n<p data-pid=\"U1KBsorS\">(大概率也是熟人作案 被亲近的人伤了吧 能做到这么精准针对的话 不得不怀疑身边人了 抱住小可怜 这肯定会很崩溃的啊啊啊啊)</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/ming-ming-54-78-76?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">微凡知否</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/527223061/answer/2433677873?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">104 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/516983471?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">软件工程专业考研想考网络安全方向，有什么建议？</a><br><a href=\"http://www.zhihu.com/question/514127388?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">我是网络安全专业的，未来希望从事相关方向，有必要考研吗？</a><br>\n","link":"http://www.zhihu.com/question/527223061/answer/2433677873?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"车载传声器工作原理是什么？如何在嘈杂的环境音中识别到驾驶员的指令？","date":"2022-04-11 03:14:59","description":"\n<p data-pid=\"c-4bg4HS\">作为一个曾经的智能座舱的系统工程师，曾经花费了2个月研究过语音识别的原理，这里把以前写的语音识别的内容梳理一下。</p>\n<p><br></p>\n<p data-pid=\"1poG7OCy\"><b>什么是自然交互</b><br></p>\n<p data-pid=\"SmH6bAdu\">这样说吧，你和朋友在一起聊天，吃饭是不是很自然，这样的交互就可以理解为自然交互，这里面有眼神、动作、语音等多种交互方式，当然会让你觉得很舒服、不做作，这样就是自然交互。</p>\n<p data-pid=\"2oB_Rsf8\">举一个例子，当你饿了，你会说，今天中午咱们出去吃？</p>\n<p data-pid=\"vjDEriNd\">你朋友回答你，那咱们吃什么呢，吃近一些的，要不吃酸菜鱼吧。<br></p>\n<p data-pid=\"2sGmSHhD\">你回答说，好吧，那我们打车去吃酸菜鱼吧。<br></p>\n<p data-pid=\"ijBa3axr\">看到没有，首先要听懂你饿了，然后根据你的喜好，推荐一些合适的菜品，最终达成目的，这个在人与人之间交互还好，如果换为机器，那么此时就是非常大的挑战。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-838b0bebf60381c6e0ecd10dfc185f1e_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"802\" data-watermark=\"watermark\" data-original-src=\"v2-838b0bebf60381c6e0ecd10dfc185f1e\" data-watermark-src=\"v2-792f500cc000b12734a3cf9ec6b52057\" data-private-watermark-src=\"v2-0f1ecb84ed7faee8bd393fbf8b38be54\"></p>\n<p data-pid=\"an9TK1y-\">  传统语音交互</p>\n<p><img src=\"https://pica.zhimg.com/v2-7cf8c4642caa30a759ca2ad721b80652_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1134\" data-watermark=\"watermark\" data-original-src=\"v2-7cf8c4642caa30a759ca2ad721b80652\" data-watermark-src=\"v2-1b075b021b3da38fb9f7b251f3db91e8\" data-private-watermark-src=\"v2-e834000049ea307fe953eee4c228c8da\"></p>\n<p data-pid=\"jQwfsF5A\">自然语音交互</p>\n<b></b><p><img src=\"https://pic3.zhimg.com/v2-54e0c143780672f18662b3746f41ef74_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"97\" data-watermark=\"watermark\" data-original-src=\"v2-54e0c143780672f18662b3746f41ef74\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p><br></p>\n<p data-pid=\"ycf9yLy9\"><b>语音识别的核心技术特点</b></p>\n<p data-pid=\"DAqlix2T\">在说语音识别的特点之前，我问问大家目前接触比较多的智能语音助手是哪些啊，是不是苹果手机的Siri，还有智能音箱，还有一些智能车载语音助手，当然少不了一天几个骚扰电话的智能推销。</p>\n<p data-pid=\"4n_baQHz\">以下是机哥在做可科大讯飞研究报告中的PPT内容，可以看到科大讯飞的核心技术就在于语音识别、语义理解、自然语音理解、机器翻译、声纹识别，其实在应用上的领域就比较好理解，比如智能可穿戴设备，智能机器人，智能手机上的语音识别，最初级的应用就是语音识别，比如在法庭上的庭审记录直接就可以把语音转换为文字作为记录，省去很大一部分的人力时间提升人工效率，智能语音客服可以回答80%左右的用户问题等等。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-5167f41076b55d392a78119350f8c002_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"499\" data-watermark=\"watermark\" data-original-src=\"v2-5167f41076b55d392a78119350f8c002\" data-watermark-src=\"v2-235c9ca76346572bda4f3a1a0cbb965b\" data-private-watermark-src=\"v2-932b30e3887617ee23cc09745cb942a8\"></p>\n<p data-pid=\"ibnAA3Y4\">其实仔细想想，用户使用智能语音助手的场景，在很长一段时间是解放双手作为最大的吸引点，想想你在开车，想给某个人打电话或者导航到某个地方，无论是安全还是有效性，语音都是最佳选择，还有当你在拖地做家务时，想听听一些轻松的轻音乐，是不是直接语音唤醒音箱播放，比你要去按键，然后再去手动选择输入要巴适得很。<br></p>\n<p><img src=\"https://pic1.zhimg.com/v2-8413d9cfa03141df96b843cd844d291a_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"481\" data-watermark=\"watermark\" data-original-src=\"v2-8413d9cfa03141df96b843cd844d291a\" data-watermark-src=\"v2-3a9430a29beb98ceaecb50487d66b55c\" data-private-watermark-src=\"v2-bdcc34fa8e154cab54b1ae10125b7d96\"></p>\n<p data-pid=\"z6gBOtaG\">真正的智能语音助手就如同是一个普通朋友，首先要听清楚说的话，然后理解你表达的意思，最后是执行，也就是同你反馈你需要的东西。这一小节需要讲的语音识别就是属于听清楚的范畴，机哥这个听清楚比较容易吧，只要听力没有问题的人，听清楚语言是没有问题的，这个对于机器其实就不是那么容易了，下面我们先来看看山东大哥被车载语音气疯的一段小视频。</p>\n<p data-pid=\"uRNRMkna\">看到了吧，这个就是比较失败的语音识别的例子，这个没有处理好的原因就是语音转文字这里就出了问题，把135识别成133去了，这里的数字最容易识别错误，稍后看了下面的内容你就知道一个大概是什么原因了。</p>\n<p><br></p>\n<p><img src=\"https://pic1.zhimg.com/v2-5b9af566f39c39878567b3026b924295_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"346\" data-rawheight=\"99\" data-watermark=\"watermark\" data-original-src=\"v2-5b9af566f39c39878567b3026b924295\" data-watermark-src=\"v2-8c17684c9e1ef91a91ebe2a5c61ac8c4\" data-private-watermark-src=\"v2-d2d421da8473bc46e76434dac4710857\"></p>\n<p><br></p>\n<p data-pid=\"J-6jyf1x\">在讲语音识别之前，我们先了解一下指纹识别，使用过指纹解锁的手机的小伙伴几乎每天都几十次的使用频率，其实原理总结起来就比较简单，就是先把你的指纹特征点进行提前登记到指纹库里面，下次你再指纹解锁的时候，此时也是通过提取特征点后进行特征点的匹配，如果匹配OK就开锁，如果匹配不OK及不解锁。</p>\n<p data-pid=\"WM8bJNeI\">类似于用钥匙去开门的锁一样，一个钥匙只能开一个门的锁，如果钥匙有损坏（也就是你指纹识别的时候有汗水或者其他脏污），那么你原来匹配的门的锁也打不开，想想你的手机指纹解锁的速度还是蛮快的，这个涉及到算法，识别速度指纹库的数量等等。</p>\n<p data-pid=\"AjW3-l__\">我们单从指纹库来说，自己使用到的手机录的指纹不会太多，一般就左右手大拇指，想想如果是公司的指纹打卡，需要比对的数据库就比非常庞大，<b>所以耗费的时间就会更久一些</b>，类似你要拿一把钥匙去找到整个酒店哪个房间们能打开一样的原理，需要一个一个去比对，当然如果你开每一道门的速度快，也就是比对的数据库的速度快，此时耗费的时间就会更少。</p>\n<p data-pid=\"hwwhbswZ\">以下是公司前辈总结的语音识别的核心框图，先从一个整体框架和一个模拟的语音模型阐述，然后针对每个框图的步骤我这里进行一些详细的解释。<br></p>\n<p><img src=\"https://pic1.zhimg.com/v2-54327c3afb35bf1a66d1c1d6a96d25be_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"412\" data-watermark=\"watermark\" data-original-src=\"v2-54327c3afb35bf1a66d1c1d6a96d25be\" data-watermark-src=\"v2-942e03bf117544ec052632e7acd7b991\" data-private-watermark-src=\"v2-e9d40daab859206cab4026c1391c5c6d\"></p>\n<p data-pid=\"cETcyDJp\">语音识别的过程可以大致上可以分为四个步骤：声音的预处理、特征提取转换、语音解码、文字解码。</p>\n<p data-pid=\"AMEVFiZd\">即从音频信号到对应的文字，首先对声音信号进行滤波、分帧等预处理工作，将需要分析的音频信号从原始信号中合适地提取出来，并且通过一些方法从中提取出特征向量，再根据声学模型对特征向量所可能表示的声学特征进行得分计算，得出可能的音素状态序列，然后再通过语言模型，计算可能对应的词组序列的概率，最后根据已有的字典对词组序列进行解码，得到最后的文本表示。</p>\n<p data-pid=\"oz240a_d\"><b>举例：我爱语音识别</b><br></p>\n<p data-pid=\"SCUNJ2ak\">1. 语音信号：我爱语音识别（PCM文件，即纯音频数据没有压缩，一般是16K采样，16bit，单声道或双声道都可以）</p>\n<p data-pid=\"8y-ny9oX\">2. 特征提取：提取特征向量[1 2 3 4 56 0 ...]</p>\n<p data-pid=\"-4JdqyyV\">3. 声学模型：[1 2 3 4 56 0]-&gt; w o a i y u y in sh i b ie</p>\n<p data-pid=\"T9eBsmKz\">4. 字典：窝：w o；我：w o；爱：a i；艾：a i；语：y u；雨：y u；音：y in；引：y in；识：sh i；时：shi；别 b ie；</p>\n<p data-pid=\"jG77h8ox\">5. 语言模型：我：0.0786， 爱：0.0546，我爱：0.0898，语音：0.0967，语音识别：0.6785；</p>\n<p data-pid=\"DBp7TfZU\">6. 输出文字：我爱语音识别；</p>\n<p data-pid=\"34KmNBVA\">现在有一个初步的感觉了吧，是不是觉得语音识别就是概率学，的确，语音识别里面90%关键技术就是概率学，就如同天气预报一样，都是通过历史的数据，实际测量的风速、风向、云量、运动方向等等来预测将来的天气情况。</p>\n<p data-pid=\"xviZvP1V\"><b>1、声音预处理</b></p>\n<p><img src=\"https://pic2.zhimg.com/v2-fd2c1dc1e432f60c50394d55546c98d8_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"604\" data-watermark=\"watermark\" data-original-src=\"v2-fd2c1dc1e432f60c50394d55546c98d8\" data-watermark-src=\"v2-99f3fcd8c379a505a0d18fca3f979c7d\" data-private-watermark-src=\"v2-3ff49117165973420d36c545c641ecce\"></p>\n<p data-pid=\"9ykV9Dmm\">首先说明一个概念，芯片和机器处理的都是数字量，也就是首先要进行AD采样，正常人耳可以听到的声波的频率一般在20Hz（赫兹）至20kHz之间，但是人正常说话的声音的频率范围是100--10KHZ，所以根据奈奎斯特定理，采样的频率至少是音源的2倍，可以看到很多语音识别设备的采样率都设置为16KHZ。</p>\n<p data-pid=\"MGROu56-\">我们在语音表达的时候，在时域上来看是不连续的，你说不会啊，我一直都是机关枪噼里啪啦在表达，其实看到语音的波形，还是有不连续的地方（这里没有连续的地方就是没有音频表达的地方）此时如果把这部分没有说话的语音去掉，就会减少干扰，而且可以减少数据量，加快语音识别的速度。</p>\n<p data-pid=\"hpdC7bb9\">声音的预处理首先要对首尾端的静音（广义上的）切除，因为这部分声音不包含需要的信息，去除可以降低对后续步骤造成的干扰，这个操作一般也被称作VAD（Voice Active Detect，活动语音检测）。</p>\n<p data-pid=\"BjmLw8pQ\">其实这个操作最简单粗暴的做法就是根据能量门限值，比如你说话的时候有用的音频能量都是大于60分贝的，环境中的噪音是30分贝，此时如果采样的的值低于60分贝，我们就认为不是正常说话的声音，就丢弃掉，<b>这里的假设条件是语音能量大于背景噪音能量</b>，然而当噪声大到和语音一样时，能量这个特征无法区分语音还是纯噪声。这个方法虽然粗暴，在早期的语音VAD处理中是不可磨灭的贡献，将语音识别推上了一个台阶，减少了很多静音数据量的处理。</p>\n<p data-pid=\"ho5n6iwZ\">后面改进了的基于能量的方法，将宽带语音分成各个子带，在子带上求能量；因为语音在2KHz以下频带包含大量的能量，而噪声在24KHz或者4KHz以上频带比02HKz频带倾向有更高的能量，当然如果在某个频率上语音和噪音能量差不多的时候，语音和噪声的区分能力会加速下降。</p>\n<p data-pid=\"a8aZ_k1W\">统计模型的方法最先源于似然比检验（likelihood ratio test LRT），这种方法假设语音和背景噪声是独立高斯分布，这样它们的DFT系数可以用高斯随机变量来描述，这一方法考虑两种假设， 分别表示非语音和语音。</p>\n<p data-pid=\"6UFneMmP\">这一思想是语言的模型是通过学习得到的，目前训练数据集都是通过传统的VAD方法进行标注的，如果标注的数据里就有不准确的，那么如何通过DNN获得更准确的VAD，这类方法的难点个人认为更多的是实际强噪声场景下的训练数据集标注的问题。</p>\n<p data-pid=\"b-zng3Ml\">接下来，要对声音进行分帧，也就是把声音切成很多小段，每一段称为一帧。这个过程通过移窗操作来完成，而不是简单的切开，所以每一帧之间是有小部分重叠的。</p>\n<p data-pid=\"LKm-y5xq\">每帧的长度为25毫秒，每两帧之间有25-10=15毫秒的交叠。我们称为帧长25ms、帧移10ms的分帧。帧移的事情就不详细解释了，它是为了保证语音信息的完整性。感兴趣的同学可以查一下，加窗/窗函数。</p>\n<p data-pid=\"llH2NH_4\"><b>2、特征提取转换</b></p>\n<p><img src=\"https://pic1.zhimg.com/v2-6a68734b51ec044b9a1311b1d7191356_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"470\" data-watermark=\"watermark\" data-original-src=\"v2-6a68734b51ec044b9a1311b1d7191356\" data-watermark-src=\"v2-abeb23d63cfe43c1a427637ed8dd824c\" data-private-watermark-src=\"v2-3a7e76880d8c251d5a421890a78dea47\"></p>\n<p data-pid=\"ndFQCBeC\">通过分帧之后得到的小段音频，还不能直接用于识别，因为在时域上的波形，几乎没有描述能力，往往需要将其变换到频域（大名鼎鼎的傅里叶变换）然后再进行特征的提取。</p>\n<p data-pid=\"C98zP3AQ\">根据人耳的生理特性，把每一帧波形变成一个多维向量，可以简单地理解为这个向量包含了这帧语音的内容信息，这个过程叫做声学特征提取。常见的特征提取算法有线性预测倒谱系数（LPCC）和Mel 倒谱系数（MFCC）。</p>\n<p data-pid=\"wMG9DtBX\">搞清语音是怎么产生的对于我们理解语音有很大帮助。人通过声道产生声音，声道的shape（形状？）决定了发出怎样的声音。声道的shape包括舌头，牙齿等。如果我们可以准确的知道这个形状，那么我们就可以对产生的音素phoneme进行准确的描述。声道的形状在语音短时功率谱的包络中显示出来。</p>\n<p data-pid=\"_A14dTeH\"><br>而MFCCs就是一种准确描述这个包络的一种特征。MFCCs（Mel Frequency Cepstral Coefficents）是一种在自动语音和说话人识别中广泛使用的特征。它是在1980年由Davis和Mermelstein搞出来的。从那时起。在语音识别领域，MFCCs在人工特征方面可谓是鹤立鸡群，一枝独秀，从未被超越。啊（至于说Deep Learning的特征学习那是后话了）。假设声学特征是M维的，每一帧就表示为一个M维的向量，那么声音就可以成为M行、N列的矩阵，我们称之为观察序列，N为总帧数。将这个矩阵作为输入通过声学模型，就可以得到音素信息，即识别到了发音。</p>\n<p data-pid=\"Y6MX0Wad\">在上个环节提取到的特征形成的观察序列，在本步骤将会通过声学模型转换成音素信息（在上图中有部分描述，是为了帮助理解提取特征的目的，实际上是本步骤才完成的）。这里要先解释两个概念：音素和状态。</p>\n<p data-pid=\"VGHmgvDM\">音素：单词的发音由音素构成。对英语，一种常用的音素集是卡内基梅隆大学的一套由39个音素构成的音素集，参见The CMU Pronouncing Dictionary。汉语一般直接用全部声母和韵母作为音素集，另外汉语识别还分有调无调，不详述。</p>\n<p data-pid=\"judIlNlh\">状态：这里理解成比音素更细致的语音单位就行啦。通常把一个音素划分成3个状态。</p>\n<p data-pid=\"cRp4lNUi\">从帧到音素的过程中，首先要转换成状态，这是一个难点，通常要计算特征表示为某个状态的概率，然后找到概率最大的状态。这种计算通过声学模型来进行，声学模型包含了一组参数，与提取到的特征进行运算后，得到对应状态的概率值。这组参数是在对大量语音数据的特征进行学习训练后得到的。</p>\n<p><img src=\"https://pica.zhimg.com/v2-9a27262cba7e52b0ecf82bf988f67f0a_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"831\" data-rawheight=\"455\" data-watermark=\"watermark\" data-original-src=\"v2-9a27262cba7e52b0ecf82bf988f67f0a\" data-watermark-src=\"v2-549d04163cd243a85603ee69e6ae6d85\" data-private-watermark-src=\"v2-e74de078408ec2d8cefcb53ceb5f46b5\"></p>\n<p data-pid=\"dH0bbM6k\">这里涉及到不同的语音算法的识别最小单元是不同的，音素是一个 应用于中大型词量系统的识别单元，而且训练起来也比较简单。<br></p>\n<p data-pid=\"vxjaEN9_\"><b>3、语音模型的作用</b></p>\n<p><img src=\"https://pic3.zhimg.com/v2-0f78dcf746c580c0111cca8e3b849c1e_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"648\" data-watermark=\"watermark\" data-original-src=\"v2-0f78dcf746c580c0111cca8e3b849c1e\" data-watermark-src=\"v2-0697ba50a6cfb59ce7cfc7d9f463f88c\" data-private-watermark-src=\"v2-0c791769decf8cc506002a3d4b4a7b61\"></p>\n<p data-pid=\"GtKdfsOl\">语音识别的最后一步，从音素到单词再到句子，这个过程又可以称为文字解码。在语音解码的过程中，我们得到音素通过字典的方式（以汉字为例），可以得到对应的拼音和单个文字。</p>\n<p data-pid=\"6ipgUe99\">但是由于发音接近的单字是比较多的，不能确定准确的单字是哪个。这时要通过语言模型，我们可以得到字与字之间组成词，词与词之间的关联概率，就可以来确定可能的词组和句子的组合。语言模型也是对大量的文本文字进行学习，统计得到的。</p>\n<p data-pid=\"DcLCgsJY\">在上一步中，我们说状态可能会非常的乱，导致音素是不可取的。而解决这个问题的方法是用隐马尔科夫链（HMM），即构建一个状态网络，这个网络是预先构建的，可以通过声学模型和语言模型明确潜在的状态关联关系，然后再从这个网络中寻找与声音匹配的最佳路径，这样就可以得到符合语言规律的完整句子。</p>\n<p data-pid=\"d8eYYBgK\">简单来说，就是从大量的语音数据中，找到每个帧对应状态的观察概率，同时计算从当前状态转移到自身或者下个状态的概率，这样就可以利用语言序列上的信息把状态在序列上组合出来，再利用语言模型观察到的文字概率，来得到最终的文字。所以搭建状态网络，是由单词级网络展开成音素网络，再展开成状态网络。语音识别过程其实就是在状态网络中搜索一条最佳路径，语音对应这条路径的概率最大，这称之为“解码”。路径搜索的算法是一种动态规划剪枝的算法，称之为Viterbi算法，用于寻找全局最优路径。</p>\n<p data-pid=\"9bTMJ9rJ\">我们再回过头来看语音识别的过程，那个案例如下图所示，是不是有一些感觉了。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-1d4552178bbb180997722a6c5f30f251_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"363\" data-watermark=\"watermark\" data-original-src=\"v2-1d4552178bbb180997722a6c5f30f251\" data-watermark-src=\"v2-65b09e9efe896eb427e089bddc275cb0\" data-private-watermark-src=\"v2-a7e9a2da5128e9747a7180982c131aec\"></p>\n<p><img src=\"https://pic2.zhimg.com/v2-b4e081e4cdc4da791ea6d056b9b34dbd_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"733\" data-watermark=\"watermark\" data-original-src=\"v2-b4e081e4cdc4da791ea6d056b9b34dbd\" data-watermark-src=\"v2-04e6b92e8b5d6697acd0e34b144c8f6b\" data-private-watermark-src=\"v2-b641f4e4bccb20b6047e8b61d316ae66\"></p>\n<p><br></p>\n<p data-pid=\"dpoxG-vD\">可以看到语音识别分别两大关键点，一个是生成机器能理解的声音向量。第二个是通过模型算法识别这些声音向量，最终给出识别结果。</p>\n<p data-pid=\"VbBly_cl\">左半部分可以看做是前端，用于处理音频流，从而分隔可能发声的声音片段，并将它们转换成一系列数值。声学模型就是识别这些数值，给出识别结果</p>\n<p data-pid=\"u2g1O3KZ\">右半边看做是后端，是一个专用的搜索引擎，它获取前端产生的输出，在以下三个数据库进行搜索：一个发音模型，一个语言模型，一个词典。</p>\n<p data-pid=\"SWgPiMc2\"><b>声学模型：</b>声学模型是识别系统的底层模型，其目的是提供一种计算语音的特征矢量序列和每个发音模板之间的距离的方法。也就是说，提取到的语音特性，与某个发音之间的差距越小，越有可能是这个发音。或者说，某帧对应哪个状态的概率最大，那这帧就属于哪个状态。这个可以用GMM（混合高斯模型，就是一种概率分布）或DNN（深度神经网络）来识别。但这样识别出来的结果会比较乱， 因为一个人讲话的速度不一样， 每一帧识别出的结果可能</p>\n<p data-pid=\"QYGgBV7A\">是：....HHH_EE_LL__LLLL__OOO.....，如下图：</p>\n<p><img src=\"https://pica.zhimg.com/v2-e3c2c6449592b51f7587e53f6d906b32_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"830\" data-rawheight=\"518\" data-watermark=\"watermark\" data-original-src=\"v2-e3c2c6449592b51f7587e53f6d906b32\" data-watermark-src=\"v2-5dbaa0b1015d8d7c157582fb5eb04db9\" data-private-watermark-src=\"v2-fa17d33dfc7fb0e9cb6e5dea521d6df0\"></p>\n<p><br></p>\n<p data-pid=\"64osLs07\">这个问题可以用DTW（动态时间规整）或HMM（隐马尔科夫模型）或CTC（改进的RNN模型）来对齐识别结果，知道单词从哪里开始，从哪里结束，哪些内容是重复的没有必要的。</p>\n<p data-pid=\"di_xzcE1\">我们要了解的是，声学模型存在2个问题：</p>\n<p data-pid=\"qYLtS3Z1\"><b>特征向量序列的可变长</b>；每个人说同一个单词的时间长度都不一样，声学模型要能从不同的时间长度的语音信号中识别出是同一个单词。解决方法就是DTW（动态时间规整）、 HMM（隐马尔可夫模型）。</p>\n<p data-pid=\"eDLjbc-Z\"><b>音频信号的丰富变化性</b>；如说话人的性别，健康状况，紧张程度，说话风格、语速，环境噪音，周围人声，信道扭曲，方言差异，非母语口音等。</p>\n<p data-pid=\"gq2FzWo-\">其实这里最核心的两个数学公式是贝叶斯概率公式，这个可以说是目前人工智能AI的基奠，还有使用的马尔可夫模型进行概率计算，最终得到的文字输出，这里目前行业里面都可以达到90%的识别率。</p>\n<p data-pid=\"J05xbLlA\"><b>看到这里知道为什么前面那个手机号码这么难识别了吧，因为手机号码是数字，数字的识别率会比文字识别率低一些，比如拨打，这个拨打在一起的概率会在字典库中的语音模块中占的置信概率大很多，而一个一个数字前后的关联性几乎没有，所以看到这个拨打电话的语音识别率会低很多，以后4S店买车看语音识别率怎么样，直接上车手机互联后，说拨打手机的号码，而不要说拨打联系人的姓名。</b></p>\n<p data-pid=\"rqyVjho9\"><b>4、车载语音离线库的一些特点</b><br></p>\n<p><img src=\"https://pic2.zhimg.com/v2-23ca43bfd631163918d5d147cd35e188_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"625\" data-watermark=\"watermark\" data-original-src=\"v2-23ca43bfd631163918d5d147cd35e188\" data-watermark-src=\"v2-8af095a20faca2ddc522d5135635152f\" data-private-watermark-src=\"v2-e7d7ecfb0cb13f457c752f9891bb2856\"></p>\n<p data-pid=\"7yS2v2E2\">这里我需要给大家解释一个东西，我们在前面看到语音识别有网络和本地，其实就是我们说的边缘计算和云端计算，本质都是把语音解码输出为文字，主要是看边缘计算的能力能否满足语音识别的性能需要，一般看声学模型和语言模型的大小，总体而言不使用云端的语音识别的效果会差一些，有些甚至只能处理简单地命令词。比如当车载没有4G网络的时候，语音交互依旧可以控制车机的一些简单操作。边缘计算的好处是响应速度快。</p>\n<p data-pid=\"LvyAIHBg\">目前车载中控最常见的做法就是本地和网络两种同时存在的做法，一般的智能音响只需要做在线的即可，你想想智能音响在不联网的时候，你不能让他播放歌曲，讲故事，所以离线的需求会非常少，但是车载不一样，离线的时候需要控制车窗、空调、FM、蓝牙等本地信息，所以需要一定的本地词库，当识别到对应的文字后进行比对，输出对应的控制，此时的本地词库就是常说的离线库，离线词库大小内容可多可少，因为离线词库的算法一般类似于唤醒词那样，是做精准比对的。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-cb600987b3181e41052468cd44c9a9c2_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"722\" data-rawheight=\"162\" data-watermark=\"watermark\" data-original-src=\"v2-cb600987b3181e41052468cd44c9a9c2\" data-watermark-src=\"v2-23a8c23d53a02b0c479308ca3084398f\" data-private-watermark-src=\"v2-4b8659a68aae0b0cedd62c8f2fc1b6fe\"></p>\n<p data-pid=\"Zcn_48CI\">举一个例子就知道，比如拨打张三的电话，可以是拨打张三电话，给张三打电话、呼叫张三、我想打电话给张三、打电话给张三、给张三打个电话，就这样都可以是6种说法。</p>\n<p data-pid=\"8bDH_Cqu\">你想想中控有电话、空调、FM、蓝牙、等等这多信息控制，如果要体验好，就需要离线词库足够多，包含的语言说法足够多。还有一种比较好的做法是动态离线库，当在线识别到用户经常说的控制信息同离线库做比对，是否有同样的词语，如果没有，那就把说过3次以上的内容进行离线库增加，这个离线库内容所占的空间就更大，而且离线库做的公司，可以根据用户平常在线经常喜欢使用的词库自主学习增加进入离线库。</p>\n<p data-pid=\"o-nGMVxM\">看到这里，为什么使用微信的语音最多，而其他APP用的少，很少人反馈微信语音识别率不够，因为微信这里和我们这里的语音识别基本上不挨边，你看看我们这些响应的都是需要语音转文字，微信发送的语音，你接收的也是语音，所以可以不用去进行文字编码的过程，只需要模拟信号转数字信号的过程。</p>\n<p data-pid=\"GCfOcX4P\">下图是科大讯飞语音识别对于本地和网络的区别，本地也就是离线库，此时里面的识别引擎在本地，所以这部分如果要做好体验，对于离线库的内容大小就有非常大的需求，至少需要8G以上才能做到本地自然语音识别。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-094167f92c14c211b64fa9292d4e7fa6_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"830\" data-watermark=\"watermark\" data-original-src=\"v2-094167f92c14c211b64fa9292d4e7fa6\" data-watermark-src=\"v2-6906f6eeb88ae94eb91de9fff4051269\" data-private-watermark-src=\"v2-b777ac68bdb068c1350d26cd7ba70128\"></p>\n<p data-pid=\"AzNHBT3S\">而对于本地命令和云端对于主机的性能要求也是不同的，如果是运行在本地，那么CPU的运行速度就需要更大一些，如果是云端，那么对于主机要求就没有那么高，不过目前的车载主机都能满足这些性能要求。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-6afba64f0baa0332823e5591dd3f9d8f_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"791\" data-watermark=\"watermark\" data-original-src=\"v2-6afba64f0baa0332823e5591dd3f9d8f\" data-watermark-src=\"v2-26b756e10b0fd0da1bf640e34113f55a\" data-private-watermark-src=\"v2-6875c37ba06ad8c5d8c0c8e6b16da327\"></p>\n<b></b><p><img src=\"https://pica.zhimg.com/v2-f9c7ee723fcf75ea28a3222c21d0a0b5_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"97\" data-watermark=\"watermark\" data-original-src=\"v2-f9c7ee723fcf75ea28a3222c21d0a0b5\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p data-pid=\"G-UpOqMl\"><br><b>有趣的唤醒词</b></p>\n<p data-pid=\"ftkM7GgB\">大家发现了一个问题没有，目前基本上所有的智能音响和车载中控的唤醒词都是四个字，小度小度，小派小派，天猫精灵，hey谷歌，Alexa，上汽荣威的你好，斑马，长安汽车的，小安，你好。这里给大家两个思考哈，为什么需要四个字的音节，另外一个思考是，这个唤醒词是不是可以个性化定制呢，自己设置喜欢的唤醒词比如家里的宠物小花，小花等等，这个是否可以实现呢？</p>\n<p><br></p>\n<p><img src=\"https://pica.zhimg.com/v2-e89e5dd426d2ce4f7e2a59af5d48b4e4_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"386\" data-watermark=\"watermark\" data-original-src=\"v2-e89e5dd426d2ce4f7e2a59af5d48b4e4\" data-watermark-src=\"v2-371be301e2be924d3a7078227f799e62\" data-private-watermark-src=\"v2-2b3db899d78b19cec1d07a2ae98ae3d8\"></p>\n<p><br></p>\n<p data-pid=\"BPfzNKYa\">那么我们来看看唤醒词唤醒的原理是什么。首先用户要输入他们的语音，然后进行端点检测，把人说话的部分给检测出来，之后就是一个信号处理的过程，对信号进行一个非常好的噪音的处理，或者是其他方面的处理。接下来就是提取声学特征，进行识别解码，之后就是置信度判别，由于现在是一个唤醒+识别的系统，那唤醒成功之后需要送到服务器进行在线解码，最后获取到识别结果。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-153ddb105f8b1c6c286456e72b56c81b_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"378\" data-watermark=\"watermark\" data-original-src=\"v2-153ddb105f8b1c6c286456e72b56c81b\" data-watermark-src=\"v2-b80a62ebb267cd063cd0c8e0082e07c3\" data-private-watermark-src=\"v2-228d6935a2c0e28f40cc1af2e04f89ff\"></p>\n<p data-pid=\"EnLMQA__\">可以看到唤醒词识别和正常的语音识别的技术是不一样的，<b>唤醒单元作为语音识别功能的触发来使用，即唤醒模块和语音识别是两个独立的模块。不需要字典和语言模型，只需要做前面的声学模型对比</b>，这里一般都放置在本地+云端，如果是存储在本地的话，那么唤醒词的声学模型需要找不同的人去训练存储的，比如这个是小孩故事机，需要找不同年龄段小孩的声音去训练声学模型，此时老人的声学模型可能就需要的少一些。根据不同产品的定位，需要找的声学模型是不同的。</p>\n<p data-pid=\"eaA0CLgy\">唤醒词唤醒率和误唤醒率一直都是一个头痛的问题，唤醒率的影响因素有这几点，</p>\n<p data-pid=\"NlUbgfkF\">1.低功耗；（那么需要在待机的时候也能唤醒，这种对于智能耳机最实用，本身电池就小，一定需要低功耗，那么需要放在本地为主，识别率没有云端好）</p>\n<p data-pid=\"S-hR34wT\">2.低成本；占用的运算资源少，包括cpu以及memory资源；</p>\n<p data-pid=\"zY0glLfz\">3.连续语音识别；</p>\n<p data-pid=\"zKPVL533\">4.场景较为复杂；噪音（办公，居家，电视，自然，电器），远场（增强，波束），方言，口音（儿童，男、女）等</p>\n<p data-pid=\"Ug2HsMhS\">5.训练的语料集合</p>\n<p data-pid=\"DFXDk3cB\">为了能够成功唤醒，而且不被误唤醒，<b>每个词在3个字到5个汉字之间，4个字最佳</b>，行业内唯一做到双音节词的是若琪，音节覆盖尽量多，差异大，响亮，建议选择不常用词语。</p>\n<p data-pid=\"Vks0IgZt\">所以大家看到的唤醒词都是四个字的，而且是在正常说话中不怎么使用的字，大家没有在跟谁沟通的过程中还说你好，斑马。</p>\n<p data-pid=\"Uufl8d9d\">这里跟大家说一个有趣的事情，亚马逊的第一代智能音响刚进入中国的时候，hello Alexa的唤醒率很低，因为中国人的英文声调模型和外国人是有一定的区别的，所以鼻音要重一些才能唤醒。</p>\n<p data-pid=\"SQFS_WtE\"><b>唤醒词的定制更换如果是在本地，通常要经过训练，即需要使用设备的拾音麦克风采集足够多的人声样本进行特征的学习，你车上的麦克不可能喊不同人来训练学习，否则的话，更换后的唤醒词只能自己单独唤醒，其他人用新的唤醒词就唤不醒。目前百度更换唤醒词的识别判断内容放在云端，云端那边可以有很多大量的训练。</b></p>\n<p data-pid=\"mPdhHgF3\">因为车上的使用环境和智能音响还差别比较大，车上使用实体按键唤醒的方式比较多，而且车上基本上都有一个语音交互的按键，按下这个按键语音助手就出来了，下图就是荣威RX5的方向盘按键上语音唤醒按键。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-41b2416fb9f3b4ee7f6ed7387c32bebe_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1059\" data-rawheight=\"712\" data-watermark=\"watermark\" data-original-src=\"v2-41b2416fb9f3b4ee7f6ed7387c32bebe\" data-watermark-src=\"v2-bf898ee38af9a1b88935c5ca6ff3d6a2\" data-private-watermark-src=\"v2-6524853d73bbd5bbf50aa5341a1ed50d\"></p>\n<p><img src=\"https://pic2.zhimg.com/v2-9d00c5baf46c78ea9426cf1aca3eed3c_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"97\" data-watermark=\"watermark\" data-original-src=\"v2-9d00c5baf46c78ea9426cf1aca3eed3c\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p data-pid=\"mcivkg1i\"><b>语音识别中的技术难点</b><br></p>\n<p><img src=\"https://pic2.zhimg.com/v2-ee55ae7ea4f7ffb4141d1e5233609b04_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"707\" data-watermark=\"watermark\" data-original-src=\"v2-ee55ae7ea4f7ffb4141d1e5233609b04\" data-watermark-src=\"v2-4e1b6670f801ef68fb55482f401a76d8\" data-private-watermark-src=\"v2-3e0542552a39cf1c9f04f57e9b62c85c\"></p>\n<p data-pid=\"ZcHGBEHw\">语音识别大家这样看了觉得还是挺简单的嘛，实际情况下还有哪些技术难点需要解决的呢。上图表中的技术难点唤醒和VAD已经有介绍，剩下回声消除、低信噪比、鸡尾酒会问题都是和噪音相关，其实很多情况下都是噪音需要去处理，这里我们一起来看看处理噪音都有哪些方法。</p>\n<p data-pid=\"JJabKx0S\">在说噪音之前，我们先解释一下什么是噪音，噪音就是我们的底噪么？比如很多人说话的时候，我只需要拾取某一个人的声音，那么其他人的声音也在此处属于噪声。</p>\n<p data-pid=\"uA4Q77Nm\">在进入下一个降噪相关解说之前，我们先了解噪音的特性。</p>\n<p data-pid=\"MqLrk4OZ\">噪声来源于实际的应用环境，因而其特性变化无穷，噪声可以是加性的，也可以是非加性的。考虑到加性噪声更普遍且易于分析问题，并且对于部分非加性噪声，如乘积性噪声或卷积性噪声，可以通过同态变换而成为加性噪声，这里我们仅讨论加性噪声。加性噪声大致可分为周期性噪声、冲激噪声和宽带噪声。</p>\n<p data-pid=\"wxn8o9Xu\"><b>加性噪声一般指热噪声、散弹噪声等，它们与信号的关系是相加，不管有没有信号，噪声都存在。</b>而乘性噪声一般由信道不理想引起，它们与信号的关系是相乘，信号在它在，信号不在它也就不在。一般通信中把加性随机性看成是系统的背景噪声；而乘性随机性看成系统的时变性（如衰落或者多普勒）或者非线性所造成的。</p>\n<p data-pid=\"9Hm2JeT0\">(1)周期性噪声</p>\n<p data-pid=\"pNd9nhJ3\">周期性噪声的特点是有许多离散的窄谱峰，<b>它往往来源于发动机等周期运转的机械</b>，如或交流声会引起周期性噪声。周期性噪声引起的问题可以通过功率谱发现，并通过滤波或变换技术将其去掉。</p>\n<p data-pid=\"tdlIk24E\">(2)冲激噪声</p>\n<p data-pid=\"2myD11xs\">冲激噪声表现为时域波形中突然出现的窄脉冲，它通常是放电的结果。消除这种噪声可根据带噪语音信号幅度的平均值确定阈值，当信号幅度超过这一阈值时判为冲激噪声，然后进行消除。</p>\n<p data-pid=\"5LgmofMS\">(3)宽带噪声</p>\n<p data-pid=\"1gPKlmOW\">宽带噪声的来源很多，如热噪声、气流如风、呼吸噪声及各种随机噪声源等，量化噪声也可视为宽带噪声。由于宽带噪声与语音信号在时域和频域上完全重叠，因而消除它最为困难，这种噪声只有在语音间歇期才单独存在。对于平稳的宽带噪声，通常认为是白色高斯噪声不具有白色频谱的噪声，可以先进行白化处理。对于非平稳的宽带噪声，情况就更为复杂一些。</p>\n<p data-pid=\"zm9AuA53\">1、频谱减法是利用噪声的统计平稳性以及加性噪声与读音不相关的特点而提出的一种语音增强方法。这种方法没有使用参考噪声源，但它假设噪声是统计平稳的，即有语音期间噪声振幅谱的期望值与无语音间隙噪声的振幅谱的期望值相等。用无语音间隙测量计算得到的噪声频谱的估计值取代有语音期间噪声的频谱，与含噪语音频谱相减，得到语音频谱的估计值。当上述差值得到负的幅度值时，将其置零。</p>\n<p data-pid=\"IyzisZ24\">频谱减法的主要思想是认为：含噪语音在噪声平均功率以上的部分就是语音功率，其余则认为是噪声功率。这种显然忽略了噪声和语音的随机特性。在含噪语音的功率谱中，噪声平均功率以上部分并非全是语音，其中肯定有不少加性噪声成分存在，其下部分则也必有语音成分存在。因此，这种方法对提高语音信噪比十分有限，而且还会引起语音的失真。特别是在低信噪比时，这种方法很难提高语音质量，更难提高语音可懂度。普减法的优点在于它的算法简单，并且可以较大幅度地提高信噪比，其缺点是增强后的语音中含有明显的音乐噪声，这是由频谱相减而产生的一种残留噪声，具有一定的节奏起伏感，故而被称为音乐噪声。</p>\n<p data-pid=\"xC6OXp_1\">线性滤波法：</p>\n<p data-pid=\"dl6QXnQp\">线性滤波法主要是利用了语音的产生模型。对于受加性稳态白噪声干扰的语音信号来说，语音的频谱又以根据语音的产生模型近似地用含噪语音来预测得到。而噪声频谱则用其期望值来近似。这样得到了语音和噪声近似的频谱后就可得到滤波器，由此滤波器可使语音得到增强。</p>\n<p data-pid=\"7fYCPn9w\">线性滤波法不仅用到了噪声的统计知识，还用到了部分语音知识，但显然这些知识都是一种近似的代替。因此这种方法对提高语音信噪比和可懂效果十分有限。特别是当信噪比较低时，对语音参数的预测误差明显增大，从而降噪效果就不明显，并且当噪声不是白噪声时，按照语音的产生模型就很难准确预测语音参数，因此对有色噪声线性滤波方法就能难以应付。</p>\n<p data-pid=\"6jF0e6_R\">小波变换法和子空间语音降噪法这里就不做展开和介绍了，有兴趣的朋友可以下来一起讨论学习。</p>\n<p data-pid=\"3iuqYEFO\"><b>2、车载语音降噪相关介绍</b></p>\n<p data-pid=\"m3U98rYO\">车载语音识别把语音转为文字的过程中，有很多技术问题要解决，首先这个过程中肯定有环境中的干扰，这些都主要是实际驾驶中的情况而来，比如在听音乐的时候，要做到语音交互，本身就有回声的干扰，有空气中噪音的干扰，前排的驾驶位置，但如果是后座的乘客想要使用中控区的语音交互就显得有些困难，用户需要大声呼叫或者是身体向前倾，也就是必须要让声源和麦克风的距离足够的近，才能够采集到声源信息。。这些技术的根本问题就是两个，一个是降噪（噪音包括回声和环境噪音），一个是声源定位。</p>\n<p><br></p>\n<p><img src=\"https://pic1.zhimg.com/v2-7c23e271c9830a25517d1e1d4e05a8f5_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"510\" data-rawheight=\"336\" data-watermark=\"watermark\" data-original-src=\"v2-7c23e271c9830a25517d1e1d4e05a8f5\" data-watermark-src=\"v2-5a84189351adcc08d3b4315f0de1f99f\" data-private-watermark-src=\"v2-733c7d11e3346d85470e8de53d525574\"></p>\n<p><br></p>\n<p data-pid=\"TKamtuFG\">降噪和声源定位都可以用一种技术来解决，就是多麦克风或者麦克风阵列技术来解决，首先说说声源定位，通过麦克风声源接收到的大小，来判断语音说话者的方案，那么把其他方位的噪音进行滤除，定向接收这个方向沟通者的声音，当然更具体的原理我会在精讲课程进行讲述。<b>这里还有一个好处是知道哪里声源发过来的声音，进行个性化服务，比如右后排的乘坐人员说我好闷，那么语音定位后，只需要开右后排的车窗，不必把所有车窗都进行打开，可以做到人性化服务，目前威马的EX5已经实现，而且华为车载事业部的最新专利，就写了关于声源定位后不同使用者对于车载语音助手的权限分布，比如小孩就不能控制前排车窗的升降等等。</b></p>\n<p data-pid=\"547ElnWF\">由于车上的结构布置，不像智能音响可以做到MIC风阵列，这里简单啰嗦一句，车上的MIC风总成一般都是放置在阅读灯的位置，基本上是双MIC风，要么就在车载中控显示屏那里，因为大家要交互基本上会看屏幕反馈的信息，所以声音方向会偏向于那里，同时目前车上麦克风都以数字硅麦为主了，直接把模拟信号转为数字信号，这样受到的干扰程度会小很多。当我们语音识别率降低的时候，需要检查一下MIC风那里是不是有灰尘了，那里灰尘多了会影响语音的识别。</p>\n<p data-pid=\"Sw_TJ9Pu\">目前也有很多车厂准备用ADI的A2B方案来实现多MIC方案，百度就在做这个方案，以前的MIC总成的越多，线材会越多，这样走线和干扰都无法消除，现在A2B方案类似于I2C总线，从设备挂在这个线材上即可，这样可以进行声源定位，而且可以主从交互。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-ffcc7fd956a1bfd31c71a570d4908d99_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1035\" data-watermark=\"watermark\" data-original-src=\"v2-ffcc7fd956a1bfd31c71a570d4908d99\" data-watermark-src=\"v2-bd7d85de601d3557084554d62afd8a4e\" data-private-watermark-src=\"v2-e2332df25aa4706d86b5ab9de98656ef\"></p>\n<p data-pid=\"KCYX4nxk\">开车途中哪些操作对于语音识别的影响最大呢，也就是噪音最大呢，其实最大是空调、车速快起来后的轮胎噪音，还有开窗开车的风噪，因为这些噪音的频率都是在咱们人耳可接受的频率，也就是MIC风可以接收进去的频率。</p>\n<p data-pid=\"rAVnTwR-\">针对这些噪音的处理和其它智能音箱的算法处理还不一样，这里的算法需要去除周期性噪声。<br></p>\n<p data-pid=\"087Yn4Sz\"><b>3、回声消除</b></p>\n<p data-pid=\"BEnCtSDa\">举一个例子就知道：你在KTV唱歌，你上一句话，我爱你，爱着你，刚从音箱中播放出来，你紧接着唱就像老鼠爱大米，此时麦克风里面就会有两个声音同时混合，“我爱你，爱着你”  “就像老鼠爱大米”，你想想此时如果两句话都同一时间进入到麦克风，那么音箱出来的声音就混合了，就不好听了。</p>\n<p data-pid=\"qQjH8Gbr\">此时就需要麦克风芯片去把音箱混进来的“我爱你，爱着你”消除掉，正常情况下因为上一句话内容麦克风芯片有存储，此时又进来相同的内容，把这部分滤除掉就行，但是由于线路上有一定的失真，第一次进去的声音大小和音箱返回的声音大小是不同的，而且声音快慢也有一定差别，这个声音的处理就最考验芯片的算法，如果要滤除的干干静静，此时需要的时间又比较久，如果时间收敛比较快，那么又存在一定滤除不干净，这个才是回声消除最难的算法地方，而且还需要自适应，因为返回到麦克风的回音有很多不同地方返回来的，需要快速响应并适应不同地方返回来的回声算法。</p>\n<p data-pid=\"8YC8Xt0X\">试想一下，对一个至少混合了两个声音的语音流，要把它们分开，然后去掉其中一个，难度何其之大。就像一瓶蓝墨水和一瓶红墨水倒在一起，然后需要把红墨水提取出来，这恐怕不可能了。</p>\n<p data-pid=\"_Dl8c1aR\">所以回声消除被认为是神秘和难以理解的技术也就不奇怪了。诚然，如果仅仅单独拿来一段混合了回音的语音信号，要去掉回音也是不可能的（就算是最先进的盲信号分离技术也做不到）。但是，实际上，除了这个混合信号，我们是可以得到产生回音的原始信号的，虽然不同于回音信号。</p>\n<p><img src=\"https://pic3.zhimg.com/v2-e9be97ac5f42e18fcfbbaa6b64cb0a1c_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"517\" data-watermark=\"watermark\" data-original-src=\"v2-e9be97ac5f42e18fcfbbaa6b64cb0a1c\" data-watermark-src=\"v2-d84d0af62fcd9dce31c08e6d427ecdf8\" data-private-watermark-src=\"v2-f2ebcfff11862ecb30a4785b4be5d669\"></p>\n<p data-pid=\"64-4hPVY\">其中，我们可以得到两个信号：一个是蓝色和红色混合的信号1，也就是实际需要发送的speech和实际不需要的echo混合而成的语音流；另一个就是虚线的信号2，也就是原始的引起回音的语音。那大家会说，哦，原来回声消除这么简单，直接从混合信号1里面把把这个虚线的2减掉不就行了？</p>\n<p data-pid=\"0OFhoWhN\">请注意，拿到的这个虚线信号2和回音echo是有差异的，直接相减会使语音面目全非。我们把混合信号1叫做近端信号ne，虚线信号2叫做远端参考信号fe，如果没有fe这个信号，回声消除就是不可能完成的任务，就像“巧妇难为无米之炊”。</p>\n<p data-pid=\"fmDfZ7ob\"><b>虽然参考信号fe和echo不完全一样，存在差异，但是二者是高度相关的，这也是echo称之为回音的原因</b>。至少，回音的语义和参考信号是一样的，也还听得懂，但是如果你说一句，马上又听到自己的话回来一句，那是比较难受的。既然fe和echo高度相关，echo又是fe引起的，我们可以把echo表示为fe的数学函数：echo=F（fe）。<b>函数F被称之为回音路径</b>。在声学回声消除里面，函数F表示声音在墙壁，天花板等表面多次反射的物理过程；在线路回声消除里面，函数F表示电子线路的二四线匹配耦合过程。很显然，我们下面要做的工作就是求解函数F。得到函数F就可以从fe计算得到echo，然后从混合信号1里面减掉echo就实现了回声消除。 </p>\n<p data-pid=\"s5MeU4G2\">举一个例子就知道：你在KTV唱歌，你上一句话，我爱你，爱着你，刚从音箱中播放出来，你紧接着唱就像老鼠爱大米，此时麦克风里面就会有两个声音同时混合，“我爱你，爱着你”  “就像老鼠爱大米”，你想想此时如果两句话都同一时间进入到麦克风，那么音箱出来的声音就混合了，就不好听了。</p>\n<p data-pid=\"A3craSXp\">此时就需要麦克风芯片去把音箱混进来的“我爱你，爱着你”消除掉，正常情况下因为上一句话内容麦克风芯片有存储，此时又进来相同的内容，把这部分滤除掉就行，但是由于线路上有一定的失真，第一次进去的声音大小和音箱返回的声音大小是不同的，而且声音快慢也有一定差别，这个声音的处理就最考验芯片的算法，如果要滤除的干干静静，此时需要的时间又比较久，如果时间收敛比较快，那么又存在一定滤除不干净，这个才是回声消除最难的算法地方，而且还需要自适应，因为返回到麦克风的回音有很多不同地方返回来的，需要快速响应并适应不同地方返回来的回声算法。</p>\n<p data-pid=\"NAyl_MpO\"><br> 欢迎关注我的微信公众号：<b>阿宝1990</b>，每天给你汽车干货，我们始于车，但不止于车。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/chuang-wei-ding-qian-li?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">丁前利</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/516520178/answer/2426723737?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">3 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/266287434?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">什么样的驾驶员才是一名合格的驾驶员？或者优秀的驾驶员？</a><br><a href=\"http://www.zhihu.com/question/47138268?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">驾驶员看着路中间车就在中间行驶吗，驾驶员不是坐在左边吗，请资深的人讲解一下？</a><br>\n","link":"http://www.zhihu.com/question/516520178/answer/2426723737?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"城市如何给我们带来「幸福感」？聊聊我的经历与看法","date":"2022-04-11 03:07:55","description":"什么样的城市让我们幸福？以人为中心建设的城市、能够以较短时间较多方式通勤的城市、有与城市生活融为一体的自然的城市、能通过各种方式联结人的城市，此外，还得是一个能让我们能够自主选择身份的城市。<a href=\"https://sspai.com/post/72543\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72543"},{"title":"汽车座椅那么多方向调节有很大意义吗？","date":"2022-04-11 02:26:32","description":"\n<p data-pid=\"OiM2WFq_\">     汽车座椅作为车内乘客的载体，其具有安全、功能、舒适等基本属性（排名分先后），其设计的初衷就是为了保证不同比例人群都能以合适的姿态驾驶汽车。而在一辆汽车的设计生命周期里，需要适应各式各样驾驶人员，因此汽车座椅的方向调节具有重要意义。<br>     关于座椅调节首先要从人机工程讲起，人机工程的基本目标就是设计出尽可能满足用户安全、舒适性、方便、性能和效率的产品。而汽车设计的基准就是满足SAE 5%女性~95%男性范围内的使用需求，当我们从这个角度去思考时，可以解决大部分车内功能问题。<br>    下面进入到提问中关于汽车座椅的作动功能问题，我们同样也会用到之前所讲述的假人设计范围。 <br>     对于普通座椅的基本6向调节，座椅头枕在整车量产前需满足GB 11550 汽车座椅头枕强度要求和试验方法，且需要经过3C认证。头枕设计的目的是为了降低在车辆碰撞过程中的脊椎的损害。调节是为了满足不同人群的使用需求。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-311a768db853f1c7fe228094e5bdff86_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"309\" data-rawheight=\"334\" data-watermark=\"watermark\" data-original-src=\"v2-311a768db853f1c7fe228094e5bdff86\" data-watermark-src=\"v2-e637f964971862263bca88f512974f0a\" data-private-watermark-src=\"v2-1f43c5490f41f381f5032daaa4b5285c\" data-tags=\"porn\"></p>\n<p data-pid=\"WqkJfVzP\"><br>   对于常规的高度调节、前后调节、靠背调节功能，其主要的目的是为了满足设计目标人群对车内驾驶位置、车内视野、操作便利以及舒适性的需求。其需要在保证驾驶员以舒适的坐姿来操控汽车的同时，也能够为乘客足够的安全的刚度支撑。<br></p>\n<p><img src=\"https://pic3.zhimg.com/v2-ad3a5df54ea9a533f9ac29a5d18bd0fc_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"947\" data-rawheight=\"545\" data-watermark=\"watermark\" data-original-src=\"v2-ad3a5df54ea9a533f9ac29a5d18bd0fc\" data-watermark-src=\"v2-91787bd143482ea6ad7db240df4a7807\" data-private-watermark-src=\"v2-cbea280d9aca5bbcf538aff8b7dc61ef\" data-tags=\"porn\"></p>\n<p data-pid=\"Cvw_52BX\"><br>      而对于超出基础调节功能的座椅，其更多的是为了满足高端客户的使用需求，同时最大限度的提升座椅的乘坐舒适性。就以典型的林肯的30向座椅为例（下图），其增加的是头枕电动前后调节、靠背上部调节、靠背按摩、上下不分靠背侧翼调节、座垫按摩、座垫的左右侧独立延伸，这些所有增加的功能在作为整车宣传卖点的同时，也为其目标销售人群提供了舒适的乘坐感觉和高端的使用需求。</p>\n<p><img src=\"https://pica.zhimg.com/v2-b013ae99a29c063a734daa1cec721adb_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"866\" data-rawheight=\"962\" data-watermark=\"watermark\" data-original-src=\"v2-b013ae99a29c063a734daa1cec721adb\" data-watermark-src=\"v2-5cb545ef578030e61b88b0018fa1a2a6\" data-private-watermark-src=\"v2-73d018c6b43e1296fb0a1e930d71d11a\"></p>\n<p data-pid=\"2KjJSwuv\"><br>     总而言之，对于普通家用车驾驶座椅具备基础的6向调节功能就可以满足日常使用，可以适当选择增加腰托调节，降低驾驶过程中的腰部疲劳。而对那些选择中高端车型的用户，其可以根据购车预算选择具备更多调节方向的座椅来提升舒适的驾驶感受。所谓一分钱一分货，厂家不会凭白无辜增加功能，更多的调节功能在作为宣传亮点的同时，也会有一定的商品溢价，最终还是要根据客户自身的预算和需求来选择适合自己的产品。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/atuge?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">阿土哥</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/524837502/answer/2433142595?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">19 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/33322938?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">为什么辉腾没有豪华车的感觉？</a><br><a href=\"http://www.zhihu.com/question/293493927?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">为何我国自主汽车品牌制造不出豪华车？</a><br>\n","link":"http://www.zhihu.com/question/524837502/answer/2433142595?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"汽车座椅那么多方向调节有很大意义吗？","date":"2022-04-11 02:24:57","description":"\n<p data-pid=\"rN4Y6jdr\">非常有意义，因为座椅以及方向盘调节的范围，直接决定了我是否喜欢这辆车……</p>\n<p data-pid=\"Yty1hQV0\">以身高175、标准身材的我为例，我喜欢的驾驶坐姿是：</p>\n<p data-pid=\"hRoHy6Kn\">座椅整体高度必须调得很低，视线刚好可以看到引擎盖上沿；</p>\n<p data-pid=\"1EWHPdbR\">方向盘要拉到离身体很近的位置，当我伸直手臂，我的手掌根部刚好可以搭在方向盘顶端；</p>\n<p data-pid=\"Cu1FqA79\">座垫倾角要调到足够高，以支撑起整条大腿；</p>\n<p data-pid=\"R37VvgxO\">为了让左腿也能充分伸展，不至于过分弯曲，座椅要调到比较靠后的位置。</p>\n<p data-pid=\"dYIx7dq5\">或许这是一个比较苛刻的坐姿，但哪怕是近两年发布的某些新车，都不能满足我的需求。</p>\n<p data-pid=\"yOqY6yld\">比如小鹏P5和P7，P5的问题在于方向盘只能上下两向调节，而且哪怕调到最低的位置，整体位置依然很高，而供左脚休息的踏板又侵入车厢太多，我不得不把座椅调后。</p>\n<p data-pid=\"_ndbwz5W\">这样的结果是：我必须端着、够着方向盘开车。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-1795725931b3aaa7986118ce9ee66a31_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-1795725931b3aaa7986118ce9ee66a31\" data-watermark-src=\"v2-8e36c35522806699a3991b803a721219\" data-private-watermark-src=\"v2-8875495c90f23421e22c3bd3606791ae\"></p>\n<p><br></p>\n<p><img src=\"https://pic1.zhimg.com/v2-22955211299ff7530452808df1d6984f_720w.jpg?source=b1748391?rss\" data-rawwidth=\"3939\" data-rawheight=\"2954\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-22955211299ff7530452808df1d6984f\" data-watermark-src=\"v2-96f2628910bee42860cd25aa14397735\" data-private-watermark-src=\"v2-240cbc176ebc571c3a02522c6289c411\"></p>\n<p data-pid=\"6fCBFjAh\">P7的问题同样是方向盘，虽然可以拉到离身体很近的位置，但高度仍然偏高，我还是得端着方向盘开车。</p>\n<p><img src=\"https://pic2.zhimg.com/v2-bf7ca274e8c20d565455523288c3de0e_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-bf7ca274e8c20d565455523288c3de0e\" data-watermark-src=\"v2-bb1fe1b06fd75e865bc16f4af4b7f5c8\" data-private-watermark-src=\"v2-0a014c7bc9efb1bfeb9717c8d138a05d\"></p>\n<p data-pid=\"0D2D-uTi\">因此，即使我非常喜欢P5的后排座椅和智能化配置，也很喜欢P7的造型设计和驾驶感受，但我大概率不会真的掏钱买一辆回家。</p>\n<p data-pid=\"K19gJ3Ga\">相比之下，老牌汽车厂商就很擅长这方面的工作。</p>\n<p data-pid=\"oW-dc5hp\">比如一汽大众ID.4 Crozz，这部车的座椅舒适度和方向盘位置堪称完美；</p>\n<p><img src=\"https://pic2.zhimg.com/v2-dff5e64fbfc1afc21696e7de2c37f73c_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-dff5e64fbfc1afc21696e7de2c37f73c\" data-watermark-src=\"v2-61023f49c21742e3ebe5758e28e0e895\" data-private-watermark-src=\"v2-af50c387648eedf4f7f45586474ed268\"></p>\n<p><br></p>\n<p><img src=\"https://pica.zhimg.com/v2-d2eefb565572fd6ccf20455fc0c3f790_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-d2eefb565572fd6ccf20455fc0c3f790\" data-watermark-src=\"v2-05300a250f69da73d653c7fda7281988\" data-private-watermark-src=\"v2-8981c8446bba7cb5fb2bc3ff0c969b12\"></p>\n<p data-pid=\"wCvTvILC\">比如奔驰C级，方向盘握感相当出色，可以拉到离身体很近的位置，座椅也可以调得非常低；</p>\n<p><img src=\"https://pic1.zhimg.com/v2-8e15964a18c8f6a60698b729c10e4e77_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-8e15964a18c8f6a60698b729c10e4e77\" data-watermark-src=\"v2-96e7e3bf489c980aa65493841c032dec\" data-private-watermark-src=\"v2-0f62533940c17b89c3879ac19ec09092\"></p>\n<p data-pid=\"H0vI3i05\">比如奥迪Q3，虽然只是一部横置前驱的入门级奥迪，但我同样能在这部车身上找到合适的座椅和方向盘位置。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-b391e777df6af194ce9b5ccf4eb31471_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-b391e777df6af194ce9b5ccf4eb31471\" data-watermark-src=\"v2-b4b8c32913842f92709531199608e058\" data-private-watermark-src=\"v2-b7e2a28965502984929f92a5c2b6ed7e\"></p>\n<p data-pid=\"oeVKXKpB\">甚至，以我自己这辆老爷车——奥迪A4 B7为例，即使这代A4上市的时间是2005年，但它的座椅和方向盘调节范围非常大，方向盘同样可以拉到很靠近身体的位置，又因为平常这辆车几乎只有我一个人开，我可以把座椅靠背调得靠后一些，以实现半躺的坐姿。</p>\n<p><img src=\"https://pica.zhimg.com/v2-098a8d6a8d03174c114dfcae7eb85551_720w.jpg?source=b1748391?rss\" data-rawwidth=\"4032\" data-rawheight=\"3024\" data-size=\"normal\" data-watermark=\"watermark\" data-original-src=\"v2-098a8d6a8d03174c114dfcae7eb85551\" data-watermark-src=\"v2-aa9c676fce6190e58aebbeed150c493b\" data-private-watermark-src=\"v2-5be76df73431b42d07677f7f10aef5c6\"></p>\n<p data-pid=\"8vX0IYli\">所以，汽车的座椅调节方向多、范围大，当然有意义，它直接决定了驾驶坐姿的舒适程度，从而影响到开车的心情。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/li-qi-fan-83?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">南方的小李同学</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/524837502/answer/2428239775?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">19 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/33322938?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">为什么辉腾没有豪华车的感觉？</a><br><a href=\"http://www.zhihu.com/question/293493927?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">为何我国自主汽车品牌制造不出豪华车？</a><br>\n","link":"http://www.zhihu.com/question/524837502/answer/2428239775?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"如何看待美国消费者报告指出大部分驾驶员监控系统毫无价值，反而存在隐私担忧？","date":"2022-04-11 02:15:14","description":"\n<p data-pid=\"tU1RnsP3\">信息来源是搜狐：</p>\n<a href=\"http://link.zhihu.com/?target=https%3A//www.sohu.com/a/519584783_121161228\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-624bb23f993c4010f21211236db3c62e_qhd.jpg?source=b1748391\" data-image-width=\"495\" data-image-height=\"371\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">美国消费者报告：大部分驾驶员监控系统毫无价值，反而有隐私担忧</a><p data-pid=\"aDe82TLI\"><b>作者于雷，他应该是机器之心(Auto Byte)的主要作者</b>。</p>\n<p data-pid=\"4_qXm7iA\">相同的文章，机器之心也在知乎发过：</p>\n<a href=\"https://zhuanlan.zhihu.com/p/462766020\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-f79b30e1c3d9779a7b540325a9ff27f1_qhd.jpg?source=b1748391\" data-image-width=\"1276\" data-image-height=\"848\" class=\"internal\">机器之心：美国消费者报告：大部分驾驶员监控系统毫无价值，反而存在隐私担忧</a><p data-pid=\"f4lgjTSA\"><b>这篇文章非常蹊跷，体现在两个方面：</b></p>\n<p data-pid=\"CJQr1FXp\">第一，这篇文章的内容问题不大，主旨内容是说<b>「驾驶员监控系统对安全很有价值，但目前车企做得不到位」</b>，但标题为什么正话反说呢？故意吸引眼球呢吗？</p>\n<p data-pid=\"IA1ejGZW\"><b>第二，机器之心、于雷的其它文章，内容与标题都相当「板正」，不知道为什么这一篇如此出格</b>。此外，这篇也未发布在机器之心公众号上。</p>\n<p><img src=\"https://pica.zhimg.com/v2-c340c560b86e557132bf540de6c65f26_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"703\" data-rawheight=\"1121\" data-watermark=\"original\" data-original-src=\"v2-c340c560b86e557132bf540de6c65f26\" data-watermark-src=\"v2-e52b06db59858ad188c625b2ab191a1c\" data-private-watermark-src=\"v2-f3b329374dd8e6c6ab390545cca6dea9\"></p>\n<p data-pid=\"89U-NJh1\">蹊跷之处就不细扒了，咱们关注一下问题本身吧： <b>DMS(Driver Monitor System)驾驶员监控系统有价值吗</b>？</p>\n<h2>DMS是锦上添花，还是必不可少？</h2>\n<p data-pid=\"sfxgcC8V\">很长时间以来，大家都没有把DMS当成一个很重要的功能。主要原因有三点：</p>\n<h3>1. 不产生「实际作用」</h3>\n<p data-pid=\"3LOWN95a\">DMS是伴随着辅助驾驶而生的。DMS做得好，并不会让你的车自动驾驶功能更强。</p>\n<p data-pid=\"x8xnFARi\">DMS有点像安全带：<b>系上安全带，车的加速性不会提升，悬架也不会更舒服、不系安全带，车也一样开，它只是起到以防万一的功能</b>。</p>\n<p data-pid=\"XQiDuoS7\">DMS甚至还不如安全带，不出事故时，安全带还是有一点点作用的：<b>还能起到固定作用，驾驶员可以坐得更稳，乘员可以睡得更香</b>。<b>反正我坐车的时候，系上安全带就睡得更香。</b></p>\n<h3>2. 无强制法规</h3>\n<p data-pid=\"UkyTh192\">特斯拉NOA、蔚来NOP、小鹏NGP上马时，DMS还处于半成品状态，用处不大。<b>先交付辅助驾驶功能，后面再补上DMS，这让消费者更加感觉这像一个锦上添花的功能</b>。</p>\n<p data-pid=\"IYOO5qba\">通用、福特，很早之前就意识到： <b>DMS是人机共驾功能的必要组件，他们的DMS与辅助驾驶功能是同步实现的</b>。</p>\n<p data-pid=\"OHYD-Xbf\">比如通用在2018年就宣传「解放双手的Super Cruise」。</p>\n<p data-pid=\"oqeZFUkM\">工程师的意思是： <b>我们的DMS做得非常好，可以解放双手</b>。</p>\n<p data-pid=\"lzL07bNZ\">市场部听到后感觉头疼，DMS是一个教训驾驶员的功能，这样宣传没人买单啊！于是改成了：<b> 我们的辅助驾驶做得好，可以解放双手</b>。</p>\n<a href=\"https://www.zhihu.com/question/280849406/answer/418196299\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-260e89d1c841d848ea97dffe980ba3a5_qhd.jpg?source=b1748391\" data-image-width=\"1243\" data-image-height=\"772\" class=\"internal\">如何评价在CES展上凯迪拉克发布的Super Cruise？在智能驾驶方面，它和特斯拉有何不同？</a><h3>3. 车主不喜欢</h3>\n<p data-pid=\"27XsIxke\">如上所述，DMS确实是一个监视并教训驾驶员的功能。比如我就被DMS扣分，扣得不及格了：</p>\n<p><img src=\"https://pic3.zhimg.com/v2-c754e227338786b7e957e5651103ca9d_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"687\" data-rawheight=\"1384\" data-watermark=\"original\" data-original-src=\"v2-c754e227338786b7e957e5651103ca9d\" data-watermark-src=\"v2-96f1edd4bf00acdb988711627f84b55a\" data-private-watermark-src=\"v2-f5d425000f7d04cab7fe00bdb1f29d34\"></p>\n<p data-pid=\"m6eMacU5\"><b>作为驾驶员，你觉得我能开心吗？ 开得好好的，为啥老说我走神，怎么像我的小学班主任啊</b>？</p>\n<p data-pid=\"YIhqlGb7\"><b>但我知道，DMS是为我好，我需要摆正心态，这样才能更安全</b>。如果没有这个觉悟，可能就会讨厌这款车了；车企的产品经理，也必须考虑这种负面用户体验。</p>\n<p data-pid=\"rBGOA5y7\">要彻底消除产品经理的纠结，需要国家制定标准。但现在DMS技术进步很快，标准也不太好定。</p>\n<h2>为什么DMS是必要的？</h2>\n<p data-pid=\"rqLGxB44\">以前是人自己开车，现在是人和机器「人机共驾」。</p>\n<p data-pid=\"lwxIAHgN\">骑过公园里的这种车吗？ 两人都可以控制方向（有的车是据断了其中一个，只能一人控制）。</p>\n<p data-pid=\"GfI-Zx7e\"><b>这种「人人共驾」的情况下，一旦遇到道路狭窄、公园小河时，你就需要先观察对方的状态，再做出自己的转向决策</b>。</p>\n<p><img src=\"https://pic1.zhimg.com/v2-50d68cd13d07676947fbbfedc0ac1622_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"499\" data-rawheight=\"402\" data-watermark=\"original\" data-original-src=\"v2-50d68cd13d07676947fbbfedc0ac1622\" data-watermark-src=\"v2-6b11d5b401125b58db9687880293471b\" data-private-watermark-src=\"v2-7bf56f316ec2df1ab8bf2c77e9198f9b\"></p>\n<p data-pid=\"IgkzToK5\">否则，你以为她会打方向盘，她以为你会打方向盘。<b>结果你俩都不打，那不就掉进河里了？？？</b></p>\n<p><img src=\"https://pic2.zhimg.com/v2-7c8bc2f40ddbece12ebb2265be29bd5c_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"700\" data-rawheight=\"430\" data-watermark=\"original\" data-original-src=\"v2-7c8bc2f40ddbece12ebb2265be29bd5c\" data-watermark-src=\"v2-975bd7a8b892c6af81935d1265cad707\" data-private-watermark-src=\"v2-ade5a7c412f7fc9382b790e1c0735cf4\"></p>\n<p data-pid=\"sJgDlICI\">不好意思放错图了，应该是这张：</p>\n<p><img src=\"https://pic3.zhimg.com/v2-afc0136eefbb7e437eac8ca564bc7706_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"629\" data-watermark=\"original\" data-original-src=\"v2-afc0136eefbb7e437eac8ca564bc7706\" data-watermark-src=\"v2-3ab698c116196186a388a795eb2c1d47\" data-private-watermark-src=\"v2-3badc489c39d6a0039b6821e7775a1c1\"></p>\n<p data-pid=\"JjqdpPI1\"><b>「人机共驾」也是一样，你通过仪表、语音来判断车的状态，车也需要通过摄像头判断你的状态 —— 这就是DMS的作用</b>。</p>\n<h2>DMS简单吗？</h2>\n<p data-pid=\"WNTXsg_L\">DMS简单吗？ 在没有DMS的时候，特斯拉、小鹏通过方向盘扭矩传感器，来判断你的手是否在方向盘上。</p>\n<p data-pid=\"ZIj-Xxqf\"><b>可是，手在方向盘上，心不一定在啊！心可能早就飘到其它地方去了</b>：</p>\n<p><img src=\"https://pic2.zhimg.com/v2-b6110397de7f871e2e7747ac72c1490d_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"917\" data-rawheight=\"844\" data-watermark=\"original\" data-original-src=\"v2-b6110397de7f871e2e7747ac72c1490d\" data-watermark-src=\"v2-242d0afb00a4f4b1a4be2105e08ba953\" data-private-watermark-src=\"v2-5af2c80183858a38ad1eafba3e7a2809\" data-tags=\"porn\"></p>\n<p data-pid=\"BTWe1Fox\">光观察手是不靠谱的，最靠谱的还是观察人脸 —— 这就是DMS。然而，DMS有很多难点，我举几个例子：</p>\n<ul>\n<li data-pid=\"0Y-VE0HI\"> 驾驶员呆滞地看着前方，10分钟了也没有表情变化  ——<b> DMS如何判断，这个人就是天生沉稳、不苟言笑呢，还是走神了</b>？</li>\n<li data-pid=\"CmapCDvO\">驾驶员的眼睛很小，或者干脆带着墨镜根据看不到眼睛，<b>DMS如何判断此人是否睡着了呢</b>？</li>\n<li data-pid=\"burB5X8A\">驾驶员似乎有点分神，DMS需要根据分神等级进行不同警告，那如何分辨<b>走神（distraction）、疲劳（fatigue）、打瞌睡（drowsiness）甚至昏迷（突发事故、突发疾病）等状态的不同呢？</b>\n</li>\n</ul>\n<p data-pid=\"4p9vMQ_W\">在AI算法出来之前，主流研究方法是「归纳规律，基于规则判断」，比如<sup data-text=\"[1]张恒, 刘艳丽. 基于视觉信息融合的驾驶员疲劳监测方法综述[J]. 信息技术, 2008, 32(6):5.\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"1\">[1]</sup>：</p>\n<ul>\n<li data-pid=\"x2OSPdXG\">\n<b>根据微小点头动作发生的频率</b><sup data-text=\"Kithil P WJones R DMacCuish J．Development of driver alertness detection system using overhead capacitive sensor array ［R ］．SAE Technical Paper Series982292．SAE International1998．\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"2\">[2]</sup>1998年：当过大时判断为瞌睡。</li>\n<li data-pid=\"O5jfOh7K\">\n<b>根据眼睛闭合70%的时间比例</b><sup data-text=\"　Wierwille W WEllsworth L AWreggit S Set al．Research on Vehicle Base Status/Performance Mon-toring：DevelopmentValidation and Refinement of Algorithms for Detection of Driver［R］．Final Report： DOT HS808247National Highway Traffic Safety Administration 1994\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"3\">[3]</sup>1994年：当闭合多的时候就判断为瞌睡。但这套方法对小眼睛司机、带墨镜的司机无效。</li>\n</ul>\n<p><img src=\"https://pica.zhimg.com/v2-3b1ebf6b611d7c2c1ee206ac04e8ce49_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"676\" data-rawheight=\"337\" data-watermark=\"\" data-original-src=\"\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<ul>\n<li data-pid=\"AMeQOiYy\">\n<b>综合PERCLOS指标</b><sup data-text=\"　National Highway Traffic Safety Administration．Evaluation of Techniques for Ocular Measurement as an index of Fatigue and the Basis for Alertness Management［Z/OL］．http：//www．fhwa．dot．gov．\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"4\">[4]</sup>，1998年：眨眼持续时间、眨眼频率、明显的头部或体动。</li>\n<li data-pid=\"c_vOdRga\">\n<b>监测瞳孔变化</b><sup data-text=\"Lois E KHohu L BMichael H S．New Understanding of Irresistible Sleep［C］．Mayo Clin Pro200176：185－194．\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"5\">[5]</sup>：瞌睡时瞳孔会缩小，醒时瞳孔大小保持相对稳定。如果副驾坐着你爱的人，瞳孔也会忽大忽小，从而干扰算法。</li>\n<li data-pid=\"ClpEQ07L\">\n<b>监测嘴部变化</b><sup data-text=\"Liao WZhang WZhu Zet al．Toward a decision-theoretic framework for affect recognition and user assistance［J］．International\" data-url=\"\" data-draft-node=\"inline\" data-draft-type=\"reference\" data-numero=\"6\">[6]</sup>：频繁说话、认真开车、偶尔打哈欠，嘴的动作是显著不同的。</li>\n</ul>\n<p><img src=\"https://pic3.zhimg.com/v2-5fd2ebc4f102d15e2368cafd9c90e9ba_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"725\" data-rawheight=\"523\" data-watermark=\"original\" data-original-src=\"v2-5fd2ebc4f102d15e2368cafd9c90e9ba\" data-watermark-src=\"v2-5679a17aaa8094a8cc85db5d45f38f4e\" data-private-watermark-src=\"v2-48fa62ce525dac355ae68ad5149645fb\"></p>\n<p data-pid=\"ZVa-WtPK\">这些算法还有很多，我猜你也不想再听了，其实也没必要听了。因为……</p>\n<p data-pid=\"tbCygT2U\"><b>这是因为深度学习算法出来之后，它说：在坐的都是垃圾</b>！、</p>\n<p><img src=\"https://pic1.zhimg.com/v2-fd1e3e9b5a33769e1d12847a9afa47f5_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"630\" data-rawheight=\"449\" data-watermark=\"\" data-original-src=\"\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p data-pid=\"yqTavbaP\"><b>所谓深度学习算法之类的AI算法，根本不去总结这些规则，而是直接给结论</b>。它就像Alpha Go的围棋完虐人类棋手之后，<b>柯洁委屈地对Alpha Go说：你根本不懂围棋！</b></p>\n<p><img src=\"https://pic3.zhimg.com/v2-a66a718e3c035186926b502a2be5d3b2_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"804\" data-rawheight=\"421\" data-watermark=\"\" data-original-src=\"\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p data-pid=\"FA-1Bz4P\">Alpha Go对<a href=\"https://www.zhihu.com/search?q=%E6%9F%AF%E6%B3%95&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2409215439%7D\" class=\"internal\">柯法</a>说：<b>你根本不懂AI。懂不懂围棋重要吗？反正我能赢。</b></p>\n<p><img src=\"https://pic1.zhimg.com/v2-8eb91116b3f5ee727c12eeb566b772d4_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"286\" data-watermark=\"\" data-original-src=\"\" data-watermark-src=\"\" data-private-watermark-src=\"\"></p>\n<p data-pid=\"l4zV1OSD\">总之，深度学习算法就是下面这么一通分层、一通运算，就可以判断驾驶员状态了，比之前人类总结的所有规则都要好使：</p>\n<p><img src=\"https://pic3.zhimg.com/v2-3481a9ec3f4d8e4bb57300de4317385b_720w.jpg?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1440\" data-rawheight=\"559\" data-watermark=\"original\" data-original-src=\"v2-3481a9ec3f4d8e4bb57300de4317385b\" data-watermark-src=\"v2-fb9780b303dbd0ee4bf410bfc7cc5a96\" data-private-watermark-src=\"v2-bbb59beaa043c77ffbd2fff5f07fd794\" data-qrcode-action=\"none\" data-tags=\"qrcode\"></p>\n<p data-pid=\"orsN-KD8\">也正因为DMS技术发展特别快，所以相关标准不太好制定  —— 制定太死，反而影响技术发展。</p>\n<p data-pid=\"16a9YMfw\"><b>在强制标准出台之前，我们只能多做科普，告诉车主：DMS很重要，DMS是为你好，买车时一定要关注DMS功能的好坏！</b></p>\n<p data-pid=\"_PwtjASR\">至于题目中提到了标题党文章，纯属混淆视听，我们应当批判。</p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/zhangkangkang?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">张抗抗</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/515210126/answer/2430654938?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">23 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/52416149?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">如何评价2016《美国消费者报告》年度汽车可靠性排名？</a><br><a href=\"http://www.zhihu.com/question/52929896?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">如何看待美国《消费者报告》年度可靠性报告推荐了全新科鲁兹？</a><br>\n","link":"http://www.zhihu.com/question/515210126/answer/2430654938?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"无框式车门真的高级吗？","date":"2022-04-11 02:09:20","description":"\n<p data-pid=\"umzYdBEx\">你还别说，提问这个描述，其实逻辑自洽。</p>\n<p><img src=\"https://pica.zhimg.com/v2-8d675744315a44426abed2dd05f9b83d_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"992\" data-rawheight=\"368\" data-watermark=\"watermark\" data-original-src=\"v2-8d675744315a44426abed2dd05f9b83d\" data-watermark-src=\"v2-d14c383de617c4a545e8bb9c87988d88\" data-private-watermark-src=\"v2-9dbd63ff4cbc65443550f1f32de5dc7d\"></p>\n<p data-pid=\"2dsda1w4\">很多做的比较「高级」的东西，其本质就是「好看」，甚至说是为了达成这个好看，牺牲的东西越多，越高级。</p>\n<p data-pid=\"z-KGIyJB\">无框车门的起源是敞篷车，是为了达到敞篷效果所带来的副产品。从这个角度上说，无框车门是有其使用价值上的意义的。</p>\n<p data-pid=\"NBNFBH1E\">而敞篷车本身就是为了一两个极致的目的，牺牲大部分指标的典型。而那个极致的目的，说白了就是——好看，拉风。这个拉风既有心理层面的拉风，也有现实层面开车吹风的快乐。</p>\n<p data-pid=\"r-L3WLLS\">敞篷可是牺牲了车身刚性、车身重量、NVH、耐久性、车内空间等等一系列车辆基础特性，单单换来了拉风这一个效果。那么我问，敞篷车高级吗？相信大部分人都会是肯定的答案。</p>\n<p data-pid=\"_b-J_iB_\">作为敞篷车同宗同源的无框车门，其实牺牲没有那么多。如果堆料足够，NVH和车门强度其实不会有明显降低，耐久性虽然先天劣势，但不刻意破坏的话，其实问题也不大。何况，由于缺乏外边框保护，无框车门的玻璃升降器通常设计强度是更高的。</p>\n<p data-pid=\"AWzNGt1A\">玻璃升降器结构种类很多，比如传统的交叉臂式（下图1）和如今常用的导轨绳轮式（下图2）。目前有框车门采用最多的是单导轨绳轮式升降器，质轻、体积小，可以给防撞梁、气囊、音响等腾出足够的空间</p>\n<p><img src=\"https://pic3.zhimg.com/v2-b598cbcf3a01474481e344191b4fd9b6_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"505\" data-watermark=\"watermark\" data-original-src=\"v2-b598cbcf3a01474481e344191b4fd9b6\" data-watermark-src=\"v2-e577a0fd42daf34cbed99c6721e68dc8\" data-private-watermark-src=\"v2-be13e60137270581660907b9a0e44407\"></p>\n<p><img src=\"https://pic3.zhimg.com/v2-2d1c73af476c13862cdc6e1e715597f6_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"352\" data-rawheight=\"322\" data-watermark=\"watermark\" data-original-src=\"v2-2d1c73af476c13862cdc6e1e715597f6\" data-watermark-src=\"v2-28a24d0bdb609954ec0b18efd5b2f27b\" data-private-watermark-src=\"v2-d7087bea584aa8ef78fedb396adcc2b7\"></p>\n<p data-pid=\"o0j6Sps4\">但无框车门常用的是下图这种双导轨绳轮式升降器结构，结构强度更好更稳定</p>\n<p><img src=\"https://pic1.zhimg.com/v2-974cad1fdeeb7a43d21108b156d46c2c_720w.png?source=b1748391?rss\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1284\" data-rawheight=\"1378\" data-watermark=\"watermark\" data-original-src=\"v2-974cad1fdeeb7a43d21108b156d46c2c\" data-watermark-src=\"v2-360df08dbfddd7c84fee59e3cd472495\" data-private-watermark-src=\"v2-89699edddd49a33664aeafb14bd984ae\"></p>\n<p data-pid=\"ZJtlW7sw\">牺牲的没那么多，又能收获「好看」这一核心科技，无框车门高级吗？</p>\n<p data-pid=\"-4bzzDGS\">我认为是高级的，或者说，起码是一种设计思路的表达。</p>\n<p data-pid=\"OHY_K3Nk\">最后，想了解更多关于无框车门的运用逻辑，欢迎移步我的另一个回答：</p>\n<a href=\"https://www.zhihu.com/question/452939344/answer/1823657672\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-009e2e1f4a8c311482da0fbcc8c3f3fe_qhd.jpg?source=b1748391\" data-image-width=\"1440\" data-image-height=\"960\" class=\"internal\">无框车门很拉风，为什么用的车这么少？</a><p></p>\n<br><br>\n来源：知乎 www.zhihu.com<br>\n    \n作者：<a href=\"http://www.zhihu.com/people/cranks?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=author\">Sea</a><br><br>\n【知乎日报】千万用户的选择，做朋友圈里的新鲜事分享大牛。\n        <a href=\"http://daily.zhihu.com/?utm_source=rssyanwenzi&amp;utm_campaign=tuijian&amp;utm_medium=rssnormal\" target=\"_blank\">点击下载</a><br><br>\n此问题还有 <a href=\"http://www.zhihu.com/question/524843396/answer/2430031370?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">31 个回答，查看全部。</a><br>\n                延伸阅读：<br><a href=\"http://www.zhihu.com/question/365240770?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">奥迪A7和宝马6系GT属于同一种车型与定位吗？如何选择？</a><br><a href=\"http://www.zhihu.com/question/284300116?utm_campaign=rss&amp;utm_medium=rss&amp;utm_source=rss&amp;utm_content=title\" target=\"_blank\">为什么宝马6系GT出厂时不安装电吸门？</a><br>\n","link":"http://www.zhihu.com/question/524843396/answer/2430031370?utm_campaign=rss&utm_medium=rss&utm_source=rss&utm_content=title"},{"title":"派早报：Google 将为 Pixel 提供维修备件、马斯克评论 Twitter 活跃度和订阅制等","date":"2022-04-11 00:58:31","description":"Google 将为 Pixel 提供维修备件、马斯克评论 Twitter 活跃度和订阅制等<a href=\"https://sspai.com/post/72585\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72585"},{"title":"家的风格 | 从法压壶到意式咖啡机，一步步搭起家中咖啡角","date":"2022-04-10 08:00:00","description":"编者注：当你将客人们请进自己的屋子时，你想让他们看看你是怎样的人。通常而言，将你的一切告诉他们的不是你的长沙发；而是你奇怪的乡村挤奶凳，它就放在一张复古风格的人物画下面，画上是一个或许开心或许喝醉了的 ...<a href=\"https://sspai.com/post/72446\" target=\"_blank\">查看全文</a>\n","link":"https://sspai.com/post/72446"},{"title":"使用 Next.js + Hexo 重构我的博客","date":"2022-03-17 16:24:00","description":"\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/218492/18/14257/25439/6227858fE1517791d/63119f6e39dc9389.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/use-nextjs-and-hexo-to-rebuild-my-blog/\">https://blog.skk.moe/post/use-nextjs-and-hexo-to-rebuild-my-blog/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/use-nextjs-and-hexo-to-rebuild-my-blog/"},{"title":"在 Windows 上快速安装 Hexo · 安装 Node.js","date":"2022-01-14 10:30:00","description":"\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%89%8D%E8%A8%80\" class=\"headerlink\" title=\"前言\"></a>前言</h2>\n<p><strong>本文未经允许，禁止转载！</strong></p>\n<p><strong>视频教程正在制作，等待更新。</strong></p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95\" class=\"headerlink\" title=\"文章目录\"></a>文章目录</h2>\n<ul>\n<li><a href=\"https://blog.yfun.top/posts/hexo-blog/install-git\">安装 Git</a></li>\n<li><a href=\"https://blog.yfun.top/posts/hexo-blog/install-nodejs\">安装 Node.js</a></li>\n</ul>\n<blockquote><p>更多文章等待更新...</p></blockquote>\n<h2>\n<a href=\"https://blog.yfun.top/#%E4%B8%8B%E8%BD%BD\" class=\"headerlink\" title=\"下载\"></a>下载</h2>\n<p>前往 Node.js 官网 (<a href=\"https://node.js.org/\">https://node.js.org</a>)</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/image-20220114174925675.png\" alt=\"image-20220114174925675\"></p>\n<p>下载 Node.js 安装包（推荐下载 LTS 版本）</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114175645.png\" alt=\"image-20220114175645642\"></p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%AE%89%E8%A3%85\" class=\"headerlink\" title=\"安装\"></a>安装</h2>\n<p>双击运行安装文件。</p>\n<p>点击 <code>Next</code>。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114175750.png\" alt=\"image-20220114175749822\"></p>\n<p>勾选同意协议，点击 <code>Next</code>。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114175835.png\" alt=\"image-20220114175835742\"></p>\n<p>修改文件安装位置，点击 <code>Next</code>。（也可以不用改）</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114175929.png\" alt=\"image-20220114175929226\"></p>\n<p>点击 <code>Next</code>。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180010.png\" alt=\"image-20220114180010036\"></p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180044.png\" alt=\"image-20220114180043895\"></p>\n<p>点击 <code>Install</code> 开始安装。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180108.png\" alt=\"image-20220114180107827\"></p>\n<p>等待安装完成。<img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180122.png\" alt=\"image-20220114180122728\"></p>\n<p>点击 <code>Finish</code> 完成安装。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180206.png\" alt=\"image-20220114180206024\"></p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%B5%8B%E8%AF%95\" class=\"headerlink\" title=\"测试\"></a>测试</h2>\n<p>打开 <code>Git Bash</code>.</p>\n<blockquote><p>在文件夹处右击，点击 <code>Git Bash Here</code> 进入 Git Bash。<br>或是在开始菜单中找到 Git Bash.</p></blockquote>\n<p>输入 <code>node -v</code> 和 <code>npm -v</code> 查看版本，正确输出版本信息即代表安装成功。</p>\n<p><img src=\"https://unpkg.zhimg.com/ocoke-osg@0.0.14/rawimg/20220114180458.png\" alt=\"image-20220114180458685\"></p>\n","link":"https://blog.yfun.top/posts/hexo-blog/install-nodejs/"},{"title":"2022: 新年快乐！","date":"2021-12-31 16:00:00","description":"\n<p>转眼间，2021 年已经过去。这一年非常忙碌，以至于博客一周年的纪念来不及写，许多文章计划停留在了 To Do 里。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%8D%9A%E5%AE%A2\" class=\"headerlink\" title=\"博客\"></a>博客</h2>\n<p>由于 Cloudflare Web Analytics 是在 2021 年 4 月份启用的，再加上后来又将统计代码去除，所以关于访问量的信息不可用。</p>\n<p>截止至 2021 年 12 月 31 日，博客共发布 15 篇文章，其中 2021 年发布 11 篇文章，原创文章 10 篇。</p>\n<p>目前采用 <code>LeanCloud + Waline</code> 的评论方式，自 7 月份被刷评论后将评论权限改为登录（支持 <code>GitHub</code> 登录），还有部分评论在迁移中丢失，实在抱歉。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E4%B8%BB%E9%A2%98\" class=\"headerlink\" title=\"主题\"></a>主题</h2>\n<p>博客自 2021 年 1 月 13 日将主题改为 <code>Miracle</code>，这是一款简洁、轻量的单栏 Hexo 主题。</p>\n<p><code>Miralce</code> 目前的版本是 <code>2.0.1</code>，全新的版本去除 jQuery，进一步提升性能。</p>\n<p>GitHub 仓库：<a href=\"https://github.com/hifun-team/hexo-theme-miracle\">https://github.com/hifun-team/hexo-theme-miracle</a></p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%9B%B4%E5%A4%9A\" class=\"headerlink\" title=\"更多\"></a>更多</h2>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">=&gt; ...</span><br></pre></td></tr></table></figure>\n","link":"https://blog.yfun.top/posts/2022/"},{"title":"无垠 2021 年度总结","date":"2021-12-31 08:36:10","description":"\n<p>真是忙碌的一年啊。转眼 2021 已经过去，2022 即将到来。又到了该总结这一年的时候了。</p>\n<h1>统计数据</h1>\n<p>年度总结的第一部分仍然是一些统计数据。以下数据截止 2021 年 12 月 29 日 23:39:59。</p>\n<h2>博客主站</h2>\n<p>无垠博客主站，年 UV 29,073 (<span>+0.6%</span>)，年 PV 67,688 (<span>-11.61%</span>)，日均 UV 79.65，平均停留时间 3分34秒 (<span>-13.7%</span>)，平均跳出率 55% (<span>-9.8%</span>)。一年有效文章数 1 (<span>-80%</span>)，新增评论 109 条 (<span>-54.96%</span>)。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/blog.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/blog.jpg\" alt=\"\" width=\"515\" height=\"620\" class=\"aligncenter size-full wp-image-2537\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/blog.jpg 515w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/blog-249x300.jpg 249w\" sizes=\"(max-width: 515px) 100vw, 515px\"></a>\n<p>除了 UV 较去年提高 100 多之外，其他数据全部下滑。主要原因还是因为今年实在太过忙碌，只更新了一篇博客，评论区也没有怎么维护。不过目前已经有两篇新的文章在路上了，希望可以尽快写完吧。</p>\n<h2>个人主页</h2>\n<p>个人页总 UV 3,515 (<span>-18.12%</span>)，总 PV 3,929 (<span>-4.56%</span>)，日均 UV 9.63，平均停留时间 55秒 (<span>-12.7%</span>)。访问的主要来源是知乎和 GitHub。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/axton.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/axton.jpg\" alt=\"\" width=\"515\" height=\"647\" class=\"aligncenter size-full wp-image-2538\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/axton.jpg 515w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/axton-239x300.jpg 239w\" sizes=\"(max-width: 515px) 100vw, 515px\"></a>\n<p>仍然是没有更新个人主页的一年，我也没有继续宣传这个页面，统计数据下滑大概是正常的。</p>\n<h2>MDx</h2>\n<p>一年中，MDx 更新了 4 次，新增 149 commits (<span>-54.57%</span>)，Star 数增加了 174，现有 788。</p>\n<p>终于，MDx 2.0 发布了。但是因为今年的过于忙碌，MDx 并没有得到足够的维护，版本发布周期也拉得比较长，很多 Bug 没能及时修复。希望明年可以把更多的时间花在维护 MDx 上。无论如何，还是感谢各位对于 MDx 的支持！</p>\n<div class=\"mdx-github-cot\" data-mdxgithuba=\"yrccondor\" data-mdxgithubp=\"mdx\" data-mdxgithubg=\"https://api.github.com/\"><div class=\"mdx-github-wait-out-c2\"><div class=\"mdx-github-wait-out-c mdui-valign\"><div class=\"mdx-github-wait-out\"><div class=\"mdx-github-wait\"><a href=\"https://github.com/yrccondor/mdx\"><div class=\"mdui-spinner\"></div></a></div></div></div></div></div>\n<h1>2021 大事记</h1>\n<p>说起来，2021 真的太多“第一次”了...</p>\n<ul>\n<li>一月：由于电脑电池鼓包，第一次用 iPad 外接屏幕远程桌面到服务器来考期末🌚太痛苦了</li>\n<li>一月：MDx 喜提 600 Stars</li>\n<li>三月：第一次测核酸（真的酸）</li>\n<li>三月：第一次坐上 A350！(B-309W）</li>\n<li>三月：第一次来到英国</li>\n<li>六月：第一次来到伦敦</li>\n<li>六月：第一次去猫咖撸猫🐱</li>\n<li>六月：第一次坐上 B777！(B-2025）</li>\n<li>七月：酒店隔离十四天🌚</li>\n<li>七月：MDx 喜提 700 Stars</li>\n<li>七月：第一次和猫一起住（时刻有猫撸真的爽😆）</li>\n<li>七月：入职<a href=\"https://75.team/\">奇舞团</a>实习</li>\n<li>八月：北京景点怎么这么多</li>\n<li>九月：北京景点怎么还有这么多</li>\n<li>九月：<a href=\"https://flyhigher.top/develop/2160.html\">谈谈 WebAuthn</a> 被 <a href=\"https://weibo.com/1893751011/KyipM3tOM\" rel=\"noopener noreferrer\">w3c中国微博转发</a><del>（虽然并没有人看）</del>\n</li>\n<li>九月：从奇舞团<del>跑路</del>\n</li>\n<li>九月：整了个 Stackoverflow 的复制粘贴键盘<del>，太好用了</del>\n</li>\n<li>十月：终于买了心心念念的 MSFS</li>\n<li>十一月：终于买了一台新相机</li>\n<li>十一月：第一次坐上 A380！(B-6140）</li>\n<li>十二月：第一次来到爱丁堡并和 <a href=\"https://diygod.me/\">@DIYgod</a> 面基</li>\n</ul>\n<section><div class=\"set-images-div\">\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cats.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cats.jpg\" alt=\"和猫一起住的唯一问题就是手机很快会被猫片塞满\" width=\"730\" height=\"1500\" class=\"aligncenter size-full wp-image-2518\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cats.jpg 730w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cats-146x300.jpg 146w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cats-498x1024.jpg 498w\" sizes=\"(max-width: 730px) 100vw, 730px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat.jpg\" alt=\"看到你在写前端，猫猫很担心你\" width=\"1004\" height=\"1500\" class=\"aligncenter size-full wp-image-2523\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat.jpg 1004w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat-201x300.jpg 201w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat-685x1024.jpg 685w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cat-768x1147.jpg 768w\" sizes=\"(max-width: 1004px) 100vw, 1004px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv.jpg\" alt=\"高效开发工具（确信\" width=\"1500\" height=\"1019\" class=\"aligncenter size-full wp-image-2519\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv.jpg 1500w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv-300x204.jpg 300w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv-1024x696.jpg 1024w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/cv-768x522.jpg 768w\" sizes=\"(max-width: 1500px) 100vw, 1500px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt.jpg\" alt=\"和 Ralph 在天坛\" width=\"947\" height=\"1500\" class=\"aligncenter size-full wp-image-2524\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt.jpg 947w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt-189x300.jpg 189w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt-646x1024.jpg 646w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/tt-768x1216.jpg 768w\" sizes=\"(max-width: 947px) 100vw, 947px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/380.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/380.jpg\" alt=\"380!\" width=\"1500\" height=\"874\" class=\"aligncenter size-full wp-image-2517\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/380.jpg 1500w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/380-300x175.jpg 300w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/380-1024x597.jpg 1024w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/380-768x447.jpg 768w\" sizes=\"(max-width: 1500px) 100vw, 1500px\"></a>\n</div>\n<div class=\"set-images-div2\">\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2.jpg\" alt=\"到处玩.jpg\" width=\"1500\" height=\"1080\" class=\"aligncenter size-full wp-image-2521\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2.jpg 1500w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2-300x216.jpg 300w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2-1024x737.jpg 1024w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play2-768x553.jpg 768w\" sizes=\"(max-width: 1500px) 100vw, 1500px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play.jpg\" alt=\"还是到处玩.jpg\" width=\"977\" height=\"1500\" class=\"aligncenter size-full wp-image-2520\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/play.jpg 977w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play-195x300.jpg 195w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play-667x1024.jpg 667w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/play-768x1179.jpg 768w\" sizes=\"(max-width: 977px) 100vw, 977px\"></a><br><a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars.jpg\" alt=\"380 上的星空\" width=\"1002\" height=\"1500\" class=\"aligncenter size-full wp-image-2522\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars.jpg 1002w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars-200x300.jpg 200w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars-684x1024.jpg 684w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/stars-768x1150.jpg 768w\" sizes=\"(max-width: 1002px) 100vw, 1002px\"></a>\n</div>\n</section><p><span>点击图片查看描述</span></p>\n<p>对了，对于可爱的猫猫们，我整了一个 Telegram 贴纸包，你可以在这里获取：<a href=\"https://telegram.me/addstickers/huanAndDan\">https://telegram.me/addstickers/huanAndDan</a>。</p>\n<h1>跨年红包</h1>\n<p>今年的解题之旅，从下面这张图片开始：</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/b.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/b.jpg\" alt=\"\" width=\"1510\" height=\"1250\" class=\"aligncenter size-full wp-image-2556\"></a>\n<p>不过，鉴于今年的题目较以往对于认真解题的人更难，我还准备了隐藏红包，在解题中收集线索即可发现隐藏红包。共有 20 个普通红包和 10 个隐藏红包。</p>\n<p>解题计划持续到东八区 2022.02.03 23:59:59 或红包被领完为止，之后我会发布题解。不过由于去年情况混乱，今年在解题过程中我一旦发现有不正常的现象就会立即停止活动。Anyway，新年快乐！祝玩得开心。</p>\n<h1>跨年海报</h1>\n<p>依然是传统艺能，今年的海报用到了 PS 和 Adobe 家的新玩具 Dimension。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1.jpg\" alt=\"\" width=\"707\" height=\"1000\" class=\"aligncenter size-full wp-image-2547\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1.jpg 1414w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1-212x300.jpg 212w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1-724x1024.jpg 724w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1-768x1086.jpg 768w, https://acdn.flyhigher.top/wp-content/uploads/2021/12/2022-in-post-1-1086x1536.jpg 1086w\" sizes=\"(max-width: 707px) 100vw, 707px\"></a>\n<p>那么祝各位新年快乐！</p>\n","link":"https://flyhigher.top/diary/2507.html"},{"title":"[译] 不，Web3 不是去中心化","date":"2021-12-14 14:01:00","description":"加密货币社区对元宇宙和 Web3 的狂热仍在继续，大量投资人和开发者前仆后继加入其中。但是，Web3 真的能实现支持者们的种种愿景吗？亦或是另一个镜中月、水中花？也许让历史照进现实，能给我们答案。<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/123139/11/24965/54827/62215eedE5e3da14a/80c24408e97057dd.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/web3-is-not-decentralization/\">https://blog.skk.moe/post/web3-is-not-decentralization/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/web3-is-not-decentralization/"},{"title":"[译] 捍卫自由的互联网，对 Web3 说不","date":"2021-12-12 13:40:00","description":"作为一个充满泡沫和噱头的新概念，Web3 和元宇宙在区块链的社区中掀起了一波浪潮。鼓吹者坚信 Web3 就是互联网的未来、不惜砸下大把的金钱和精力、希望能在未来中捞一杯羹；而大部分人保持观望的态度。是时候来一点 Web3 的反对意见了。<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/87908/13/23797/13415/622032afE3a2f9e9f/95c01e98cd4a707a.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/keep-web-free-say-no-to-web3/\">https://blog.skk.moe/post/keep-web-free-say-no-to-web3/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/keep-web-free-say-no-to-web3/"},{"title":"2021 年 JavaScript Promise 性能对比","date":"2021-12-07 08:19:00","description":"\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/157404/28/28495/143414/622032b2Ef7b495fd/6a9bd02e79392c9d.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/promise-performance-benchmark/\">https://blog.skk.moe/post/promise-performance-benchmark/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/promise-performance-benchmark/"},{"title":"在 Windows 上快速安装 Hexo · 安装 Git","date":"2021-11-12 13:30:00","description":"\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%89%8D%E8%A8%80\" class=\"headerlink\" title=\"前言\"></a>前言</h2>\n<p><strong>本文未经允许，禁止转载！</strong></p>\n<p><strong>视频教程正在制作，等待更新。</strong></p>\n<h3>\n<a href=\"https://blog.yfun.top/#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95\" class=\"headerlink\" title=\"文章目录\"></a>文章目录</h3>\n<ul><li><a href=\"https://blog.yfun.top/posts/hexo-blog/install-git\">安装 Git</a></li></ul>\n<blockquote><p>更多文章等待更新...</p></blockquote>\n<h2>\n<a href=\"https://blog.yfun.top/#%E4%B8%8B%E8%BD%BD\" class=\"headerlink\" title=\"下载\"></a>下载</h2>\n<p>前往 Git 官网 (<a href=\"https://git-scm.com/\">https://git-scm.com</a>).</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112204849.png\"></p>\n<p>点击页面中的 <code>Download For Windows</code> 下载 Windows 版本。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211507.png\"></p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%AE%89%E8%A3%85\" class=\"headerlink\" title=\"安装\"></a>安装</h2>\n<p>双击运行安装文件。</p>\n<p>点击 <code>Next</code>，同意协议。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211528.png\"></p>\n<p>修改程序安装位置，点击 <code>Next</code>（直接装在 C 盘也不是不行）。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211604.png\"></p>\n<p>组件选项，可选桌面快捷键、右键菜单、LFS 支持、自动检查更新等。</p>\n<p>点击 <code>Next</code> 进入下一步。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211609.png\"></p>\n<p>开始菜单文件夹名，保持默认就可以，点击 <code>Next</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211613.png\"></p>\n<p>默认编辑器，保持 Vim 就可以，点击 <code>Next</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211616.png\"></p>\n<p>环境变量，选择第 2 个，点击 <code>Next</code>。</p>\n<blockquote><p>如果选择第 1 个，则只能在 Git Bash 中使用，可能会出现问题</p></blockquote>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211619.png\"></p>\n<p>剩下的都可以保持默认，一路 Next，然后点击 <code>Install</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211622.png\"><br><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211624.png\"><br><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211627.png\"><br><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211630.png\"><br><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/20211112211633.png\"></p>\n<p>等待安装完毕。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%B5%8B%E8%AF%95\" class=\"headerlink\" title=\"测试\"></a>测试</h2>\n<p>在文件夹处右击，点击 <code>Git Bash Here</code> 进入 Git Bash。</p>\n<p>（或是在开始菜单中找到 Git Bash）</p>\n<p>输入 <code>git --version</code> 查看版本，正确输出版本信息即代表安装成功。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.11/rawimg/7ec315b7764cc.png\"></p>\n<p>大功告成！</p>\n","link":"https://blog.yfun.top/posts/hexo-blog/install-git/"},{"title":"前端时间国际化 101","date":"2021-10-14 15:58:23","description":"\n<blockquote>\n<p>时间只是幻觉。</p>\n<footer>—— 阿尔伯特·爱因斯坦</footer>\n</blockquote>\n<p>最近在开发一个需要完善国际化方案的前端项目，在处理时间国际化的时候遇到了一些问题。于是花了一些时间研究，有了这篇文章。不过由于网上关于 JavaScript 中 <code>Date</code> 对象的坑的文章已经一抓一大把了，<strong>因此这篇文章不是 JavaScript 中 <code>Date</code> 对象的使用指南，而是只专注于前端时间国际化。</strong></p>\n<h1>从时区说起</h1>\n<p>要想处理时间，UTC 是一个绕不开的名字。协调世界时（Coordinated Universal Time）是目前通用的世界时间标准，计时基于原子钟，但并不等于 TAI（国际原子时）。TAI 不计算闰秒，但 UTC 会不定期插入闰秒，因此 UTC 与 TAI 的差异正在不断扩大。UTC 也接近于 GMT（格林威治标准时间），但不完全等同。可能很多人都发现近几年 GMT 已经越来越少出现了，这是因为 GMT 计时基于地球自转，由于地球自转的不规则性且正在逐渐变慢，目前已经基本被 UTC 所取代了。</p>\n<blockquote><p>JavaScript 的 <code>Date</code> 实现不处理闰秒。实际上，由于闰秒增加的不可预测性，Unix/POSIX 时间戳完全不考虑闰秒。在闰秒发生时，Unix 时间戳会重复一秒。这也意味着，一个时间戳对应两个时间点是有可能发生的。</p></blockquote>\n<p>由于 UTC 是标准的，我们有时会使用 UTC+/-N 的方式表达一个时区。这很容易理解，但并不准确。中国通行的 <code>Asia/Shanghai</code> 时区<strong>大部分</strong>情况下可以用 UTC+8 表示，但英国通行的 <code>Europe/London</code> 时区并不能用一个 UTC+N 的方式表示——由于夏令时制度，<code>Europe/London</code> 在夏天等于 UTC+1，在冬天等于 UTC/GMT。</p>\n<blockquote><p>一个时区与 UTC 的偏移并不一定是整小时。如 <code>Asia/Yangon</code> 当前为 UTC+6:30，而 <code>Australia/Eucla</code> 目前拥有奇妙的 UTC+8:45 的偏移。</p></blockquote>\n<p>夏令时的存在表明<strong>时间的表示不是连续的</strong>，时区之间的时差也并不是固定的，我们并不能用固定时差来处理时间，这很容易意识到。但一个不容易意识到的点是，时区还包含了其历史变更信息。中国目前不实行夏令时制度，那我们就可以放心用 UTC+8 来表示中国的时区了吗？你可能已经注意到了上一段中描述 <code>Asia/Shanghai</code> 时区时我使用了<strong>大部分</strong>一词。<code>Asia/Shanghai</code> 时区在历史上实行过夏令时，因此 <code>Asia/Shanghai</code> 在部分时间段可以使用 UTC+9 来表示。</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">new Date('1988-04-18 00:00:00')\n// Mon Apr 18 1988 00:00:00 GMT+0900 (中国夏令时间)</pre>\n<blockquote><p>夏令时已经够混乱了，但它实际上比你想象得更混乱——部分穆斯林国家一年有四次夏令时切换（进入斋月时夏令时会暂时取消），还有一些国家使用混沌的 15/30 分钟夏令时而非通常的一小时。</p></blockquote>\n<blockquote><p><strong>不要总是基于 <code>00:00</code> 来判断一天的开始。</strong>部分国家使用 0:00-1:00 切换夏令时，这意味着 23:59 的下一分钟有可能是 1:00。</p></blockquote>\n<p>事实上，虽然一天只有 24 个小时，但当前（2021.10）正在使用的时区有超过 300 个。<strong>每一个时区都包含了其特定的历史。</strong>虽然有些时区在现在看起来是一致的，但它们都包含了不同的历史。时区也会创造新的历史。由于政治、经济或其他原因，一些时区会调整它们与 UTC 的偏差（萨摩亚曾经从 UTC-10 切换到 UTC+14，导致该国 2011.12.30 整一天都消失了），或是启用/取消夏令时，甚至有可能导致一个时区重新划分为两个。因此，为了正确处理各个时区，我们需要一个数据库来存放时区变更信息。还好，已经有人帮我们做了这些工作。目前大多数 *nix 系统和大量开源项目都在使用 <a href=\"https://www.iana.org/time-zones\" rel=\"noopener\">IANA 维护的时区数据库</a>（IANA TZ Database），其中包含了自 Unix 时间戳 0 以来各时区的变更信息。当然这一数据库也包含了大量 Unix 时间戳 0 之前的时区变更信息，但并不能保证这些信息的准确性。IANA 时区数据库会定期更新，以反映新的时区变更和新发现的历史史实导致的时区历史变更。</p>\n<blockquote><p>Windows 不使用 IANA 时区数据库。微软为 Windows 自己维护了一套<a href=\"https://docs.microsoft.com/zh-cn/troubleshoot/windows-client/system-management-components/daylight-saving-time-help-support\" rel=\"noopener\">时区数据库</a>，这有时会导致在一个系统上合法的时间在另一系统上不合法。</p></blockquote>\n<p>既然我们不能使用 UTC 偏移来表示一个时区，那就只能为每个时区定义一个标准名称。通常地，我们使用 <code>/</code> 来命名一个时区。这里的城市一般为该时区中人口最多的城市。于是，我们可以将中国的通行时区表示为 <code>Asia/Shanghai</code>。也有一些时区有自己的别名，如太平洋标准时间 <code>PST</code> 和协调世界时 <code>UTC</code>。</p>\n<blockquote><p>时区名称使用城市而非国家，是由于国家的变动通常比城市的变动要快得多。</p></blockquote>\n<blockquote><p><strong>城市不是时区的最小单位。</strong>有很多城市同时处于多个时区，甚至澳大利亚<a href=\"https://en.wikipedia.org/wiki/Gold_Coast_Airport\" rel=\"noopener\">有一个机场</a>的跑道两端处于不同的时区。</p></blockquote>\n<h1>处理时区困难重重</h1>\n<p>几个月前的一天，<a href=\"https://milkice.me/\" rel=\"noopener\">奶冰</a>在他的 Telegram 频道里发了这样的一条消息：</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-1.jpg\"><img src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-1.jpg\" alt=\"奶冰频道的消息\" width=\"500\" class=\"aligncenter size-medium wp-image-2490\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-1.jpg 800w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-1-244x300.jpg 244w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-1-768x944.jpg 768w\" sizes=\"(max-width: 800px) 100vw, 800px\"></a>\n<p>你想的没错，这个问题正是由时区与 UTC 偏移的不同造成的。<code>Asia/Shanghai</code> 时区在 1940 年前后和 1986 年前后曾实行过夏令时，<strong>而夏令时的切换会导致一小时的出现和消失。</strong>具体来说，启用夏令时当天会有一个小时消失，如 2021.3.28 英国启用夏令时，1:00 直接跳到 3:00，导致 <code>2021-03-28 01:30:00</code> 在 <code>Europe/London</code> 时区中是不合法的；取消夏令时当天又会有一个小时重复，如 2021.10.31 英国取消夏令时，2:00 会重新跳回 1:00 一次，导致 <code>2021-10-31 01:30:00</code> 在 <code>Europe/London</code> 时区中对应了两个时间点。而在奶冰的例子中，<code>1988-04-10 00:46:50</code> 正好处于因夏令时启用而消失的一小时中，因此系统会认为此时间字符串不合法而拒绝解析。</p>\n<blockquote><p>你可能会注意到在历史上 1988.4.10 这一天 <code>Asia/Shanghai</code> 时区实际上是去掉了 1:00-2:00 这一小时而不是 0:00-1:00。上文问题更深层次的原因是，在 IANA TZDB 2018a 及更早版本中，IANA 因缺乏历史资料而设置了错误的夏令时规则，规则设定了夏令时交界于 0:00-1:00 从而导致上文问题发生。而随后社区<a href=\"http://mm.icann.org/pipermail/tz/2018-August/026760.html\" rel=\"noopener\">发现了更准确的史实</a>，因此 IANA 更新了数据库。上文的问题在更新了系统的时区数据库后便解决了。</p></blockquote>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2.jpg\" alt=\"IANA TZDB 2018a 及之前版本的错误数据\" width=\"1750\" height=\"595\" class=\"aligncenter size-full wp-image-2491\" srcset=\"https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2.jpg 1750w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2-300x102.jpg 300w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2-1024x348.jpg 1024w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2-768x261.jpg 768w, https://acdn.flyhigher.top/wp-content/uploads/2021/10/time-2-1536x522.jpg 1536w\" sizes=\"(max-width: 1750px) 100vw, 1750px\"></a>\n<p><span>IANA TZDB 2018a 及之前版本的错误数据</span></p>\n<p>再来考虑另一种情况。你的应用的某位巴西用户在 2018 年保存了一个未来时间 <code>2022-01-15 12:00</code>（按当时的规律那应该是个夏令时时间），不巧那时候你的应用是以格式化的时间字符串形式保存的时间。之后你发现巴西已经于 2019 年 4 月宣布彻底取消夏令时制度，那么 <code>2022-01-15 12:00</code> 这个时间对应的 Unix 时间戳发生了变化，变得不再准确，要正确处理这一字符串就需要参考这一字符串生成的时间（或生成时计算的 UTC 偏移）来做不同的处理。<strong>因此，应用从一开始就应该避免使用字符串来传输、存储时间，而是使用 Unix 时间戳。</strong>如果不得不使用字符串存储时间，请尽可能：</p>\n<ul>\n<li>使用 UTC 描述时间，你永远不会知道本地时区在未来会发生什么</li>\n<li>如果需要以当地时间描述时间，一定带上当前 UTC 偏移</li>\n</ul>\n<p>时区历史带来的问题往往意想不到而且远比想象得多。实际上时区历史数据非常详细而繁多且跨设备不一致，并没有简单而统一的处理方法。在需要严谨处理时区时可能需要在应用程序中内嵌一套各端统一的时区数据库，但这样的方案放在前端又会带来不少问题：</p>\n<ul>\n<li>体积过大。moment.js 曾经设计过<a href=\"https://github.com/moment/moment-timezone/blob/develop/data/packed/2021a.json\" rel=\"noopener\">一种简洁的 TZDB 表示</a>，但尽管已经尽可能压缩整个文件仍然达到了 180+KB。在性能优先的 Web 应用中这是不可接受的</li>\n<li>需要持续更新。时区数据一直在变动，需要在时区数据更新时尽快更新应用内的时区数据，这带来了额外的维护成本</li>\n</ul>\n<p>ES6 为我们带来了 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl\" rel=\"noopener\"><code>Intl</code> 命名空间</a>。在这里，JavaScript 运行时提供了不少时间相关的国际化能力。因此，在不使用额外数据的情况下准确处理时区是可能的，但这并不完美：</p>\n<ul>\n<li>各端不统一。浏览器提供的时区数据受浏览器版本、系统版本等可能变化，最新的时区更新可能无法快速反映到所有设备上</li>\n<li>实现复杂。<code>JavaScript</code> 中 <code>Date</code> 对象的不良设计导致实现完善的时区处理并不容易，且 <code>Intl</code> 命名空间下的对象实例化性能开销较大，需要额外优化</li>\n</ul>\n<blockquote><p><code>Intl</code> 命名空间下还有很多实用的国际化相关方法，值得我们另开一篇文章来讲讲了。</p></blockquote>\n<p>在真实开发中，这需要取舍。目前主流的 JavaScript 时间处理库都已转向浏览器内置方法，并在需要时通过 Polyfill 保证跨端一致性。在这篇文章中，我们将尝试在不使用第三方库的情况下实现基本的时间国际化处理。此外，还有一些诸如需要使用 Unix 时间戳才能正确地在各端交换时间等细节需要注意。</p>\n<h1>时区转换</h1>\n<p>JavaScript 中的 <code>Date</code> 并不是不包含时区信息——实际上，<code>Date</code> 对象表示的一定是当前时区。通过尝试：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">new Date('1970-01-01T00:00:00Z')\n// Thu Jan 01 1970 08:00:00 GMT+0800 (中国标准时间)</pre>\n<p>就可以知道，JavaScript 运行时其实知道当前时区，并会在需要的时候将其他时区的时间转换为当前时区的时间。那么，如何将本地时间转换为其他时区的时间呢？从 <code>Date</code> 的角度看，这并不行，因为我们无法设置一个 <code>Date</code> 对象的时区。但我们可以“投机取巧”：将 <code>Date</code> 对象的时间加上/减去对应的时差，尽管 <code>Date</code> 对象仍然认为自己在本地时区，但这样不就可以正确显示了嘛！但我们会碰到上文提到的问题：时区之间的时间差并不固定，在没有额外数据的情况下很难正确计算。</p>\n<p>还好，ES6 基于 <code>Intl</code> 命名空间扩展了 <code>Date.prototype.toLocaleString()</code> 方法，使其可以接受时区参数并按指定时区格式化时间。如果你在搜索引擎中搜索如何使用 JavaScript 转换时区，你大概率会在 StackOverflow 上找到类似这样的答案：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const convertTimeZone = (date, timeZone) =&gt; {\n    return new Date(date.toLocaleString('en-US', { timeZone }))\n}\n\nconst now = new Date() // Wed Oct 13 2021 01:00:00 GMT+0800 (中国标准时间)\nconvertTimeZone(now, 'Europe/London') // Tue Oct 12 2021 18:00:00 GMT+0800 (中国标准时间)</pre>\n<p>很好理解，我们使用 <code>en-US</code> 的区域设置要求 JavaScript 运行时以我们指定的时区格式化时间，再将时间字符串重新解析为时间对象。这里的 <code>timeZone</code> 就是诸如 <code>Asia/Shanghai</code> 等的 IANA TZDB 时区名称。这个字符串确实需要自己提供，但这就是我们唯一需要自己准备的数据了！只要提供了时区名称，浏览器就会自动计算正确的时间，无需我们自行计算。</p>\n<blockquote><p>对于时区名称，你可以考虑使用 <a href=\"https://github.com/vvo/tzdb/\" rel=\"noopener\">@vvo/tzdb</a>。这是一个声称为自动更新的 IANA TZDB 的 JSON 导出，并已被数个大型项目使用。你可以从这个包中导出所有时区名称。</p></blockquote>\n<p>这个方法看起来还不错，对吧？但实际上，它有两个问题：</p>\n<ul>\n<li>指定了区域设置和时区的 <code>toLocaleString()</code> 实际上每次调用都会在 JavaScript 运行时中创建新的 <code>Intl.DateTimeFormat</code> 对象（在后文详述），而后者会带来昂贵的性能开销（在 Node 14 中，实例化一次会在 V8 中增加内存使用约 46.3Kb。但这是符合预期的，详见 <a href=\"https://bugs.chromium.org/p/v8/issues/detail?id=6528\" rel=\"noopener\">V8 Issue</a>）。因此，在密集调用的情况下需要考虑计算并缓存时差，并在一定时间后或需要时进行更新</li>\n<li>使用 <code>toLocaleString()</code> 并使用 <code>en-US</code> 区域设置格式化的默认时间格式类似于 <code>10/13/2021, 1:00:00 AM</code>。这可以被大部分浏览器正确解析，<strong>但这是不规范的，不同浏览器有可能产生不同结果。</strong>你也可以自行配置格式（同下文的 <code>Intl.DateTimeFormat</code>），但仍然无法构造出规范的字符串</li>\n</ul>\n<p>因此，更佳的方案是，我们需要建立一个可反复使用的格式化器以避免重复创建 <code>Intl.DateTimeFormat</code> 带来的额外开销，并需要手动构造出符合规范的时间字符串，并将其重新解析为 <code>Date</code> 对象。</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const timeZoneConverter = (timeZone) =&gt; {\n    // 新建 DateTimeFormat 对象以供对同一目标时区重用\n    // 由于时区属性必须在创建 DateTimeFormat 对象时指定，我们只能为同一时区重用格式化器\n    const formatter = new Intl.DateTimeFormat('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false,\n        timeZone\n    })\n    return {\n        // 提供 conver 方法以将提供的 Date 对象转换为指定时区\n        convert (date) {\n            // zh-CN 的区域设置会返回类似 1970/01/01 00:00:00 的字符串\n            // 替换字符即可构造出类似 1970-01-01T00:00:00 的 ISO 8601 标准格式时间字符串并被正确解析\n            return new Date(formatter.format(date).replace(/\\//g, '-').replace(' ', 'T').trim())\n        }\n    }\n}\n\nconst toLondonTime = timeZoneConverter('Europe/London') // 对于同一时区，此对象可重用\n\nconst now = new Date() // Wed Oct 13 2021 01:00:00 GMT+0800 (中国标准时间)\ntoLondonTime.convert(now) // Tue Oct 12 2021 18:00:00 GMT+0800 (中国标准时间)</pre>\n<blockquote><p>目前 <code>zh-CN</code> 的区域设置会产生类似 <code>1970/01/01 00:00:00</code> 的格式化字符串。这一格式目前跨端一致，但由于规范没有指定时间格式，<strong>这个格式在未来有可能变更。</strong>更好的方案是使用 <code>formatToParts()</code> 方法（在后文详述）获取时间字符串的各部分并手动拼接出标准格式的字符串，但在这个例子中直接 <code>replace</code> 拥有更好的性能。</p></blockquote>\n<p>现在，尝试反复转换时间至同一时区 1000 次，耗时从 <code>toLocaleString()</code> 1.5 秒降低到了 0.04 秒。尽管代码长了点，但这次重写在最好的情况下为我们带来了超过 20 倍的性能提升。</p>\n<p>需要注意的是，虽然这看起来就算最终方案了，但这个方案依然不完美。主要有以下两个问题：</p>\n<ul>\n<li>在需要密集转换为不同时区时，由于无法重用格式化器，性能依然较差且难以进一步优化</li>\n<li>由于 <code>Intl.DateTimeFormat</code> 不支持格式化毫秒，在格式化字符串的过程中毫秒会丢失，导致最终结果可能会与期望结果产生最高 999ms 的误差，需要额外处理。比如需要计算时差时，我们可能需要这么写：\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const calcTimeDiff = (date, converter) =&gt; {\n    const secDate = date - date.getMilliseconds() // 去掉毫秒，避免转换前后精度差异\n    return converter.convert(new Date(secDate), tzName) - secDate\n}\n\ncalcTimeDiff(new Date(), timeZoneConverter('Europe/London')) // -25200000</pre>\n</li>\n</ul>\n<p>无论如何，在折腾一番后我们还是把时区正确转换了。接下来准备格式化时间字符串了吗？不过在此之前，我们得先来聊聊语言、文字和区域。</p>\n<h1>语言文字区域傻傻分不清</h1>\n<blockquote><p>如何在计算机中表示中文？</p></blockquote>\n<p>“这不简单，”你可能会说，“用 <code>zh</code> 啊。”</p>\n<blockquote><p>那简体中文呢？</p></blockquote>\n<p>“<code>zh-CN</code>。”你或许会说出这个答案。</p>\n<blockquote><p>那用于新加坡的简体中文和用于中国大陆的简体中文该如何区分呢？</p></blockquote>\n<p>嗯……好问题。</p>\n<p>要能正确区分不同的简体中文，我们还得先回到定义上。实际上，“国际化”并不只是语言的翻译而已，国际化包含的是一整套对于各个<strong>区域</strong>的本地化方案。要准确表示一个国际化方案，我们实际至少需要确定三个属性：语言（Language）、文字（Script）和区域（Locale）。</p>\n<ul>\n<li>\n<strong>语言</strong>通常指的是<strong>声音语言</strong>。不同的语言都有一套自己的发音规则，很难互通。如中文和英语都属于语言</li>\n<li>\n<strong>文字</strong>对应的是某个语言的书写方式，同样的语言可能会有多种书写方案。如中文主要有简体和繁体两种书写方案</li>\n<li>\n<strong>区域</strong>指国际化面向的地区，相同的语言和文字，在不同地区也有可能会有不同的使用习惯。如新加坡和中国大陆都使用简体中文，但两地的用词习惯等有些许差异</li>\n</ul>\n<p>只有确定了这三个属性，我们才能正确定义一个国际化方案（或者说<strong>区域设置</strong>）。当然，还有很多其他属性可以更准确的表达某个区域设置，但通常有语言、文字和区域就已经足够了。</p>\n<p>于是，基于 <a href=\"https://tools.ietf.org/rfc/bcp/bcp47.txt\" rel=\"noopener\">BCP 47</a>，我们可以知道：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"raw\">cmn-Hans-CN = 中文普通话-简体-中国大陆\ncmn-Hans-SG = 中文普通话-简体-新加坡\ncmn-Hant-TW = 中文普通话-繁体-台湾\nyue-Hant-HK = 中文粤语-繁体-香港</pre>\n<p>等等，这都是啥？还有 BCP 47 又是啥？BCP 是 IETF 发布的“最佳当前实践”文档，而 BCP 47 是一些国际化相关的 ISO 和备忘录的集合，也是目前事实上由 HTML 和 ECMAScript 所使用的表达区域设置的标准。BCP 47 定义的区域设置标签实际上比较复杂，但对于大部分简单使用情况，上文示例中的格式已经完全够用了。简单来说，<strong>要表达一个区域设置，我们会使用 <code>语言[-文字][-区域]</code> 的格式，而文字和区域都是可选的。</strong>而对于每个部分的具体代码，BCP 47 也有做具体定义。其中：</p>\n<ul>\n<li>语言使用 ISO 639-1 定义的两位字母代码（如中文为 <code>zh</code>，英文为 <code>en</code>）或 <a href=\"https://iso639-3.sil.org/code_tables/639/data\" rel=\"noopener\">ISO 639-2/3</a> 定义的三位字母代码（如中文普通话为 <code>cmn</code>，英文为 <code>eng</code>），通常小写</li>\n<li>文字使用 <a href=\"https://unicode.org/iso15924/iso15924-codes.html\" rel=\"noopener\">ISO 15924</a> 定义的四位字母代码，通常首字母大写。如简体中文是 <code>Hans</code>，繁体中文是 <code>Hant</code>\n</li>\n<li>区域通常使用 <a href=\"https://www.iso.org/iso-3166-country-codes.html\" rel=\"noopener\">ISO 3166-1</a> 定义的两位字母代码，通常大写，如中国大陆为 <code>CN</code>，英国为 <code>GB</code>\n</li>\n</ul>\n<blockquote><p>ISO 639-1/2/3 的关系实际是：ISO 639-1 是最早制定的规范，使用两位字母表示语言，但语言数量之多并不能只用两位代码表示。因此后来修订了 ISO 639-2 和 3，使用三位字母表示了更多语言。通常 639-1 代码和 ISO-2/3 代码是一对多的关系。如中文 <code>zh</code> 其实是中文普通话 <code>cmn</code> 的宏语言（macrolanguage），同样使用 <code>zh</code> 为宏语言的语言还有 <code>wuu</code>（中文吴语）、<code>hak</code>（中文客家话）、<code>yue</code>（中文粤语）等数十种。<strong>从规范上我们现在应该使用 ISO 639-2/3 代码来替代 ISO 639-1 代码了</strong>，但由于历史阻力和真实需求中分类无需如此细致等原因，<strong>使用 ISO 639-1 指定语言仍然非常常见而且完全可以接受。</strong>此外，特别地，我们在 ISO 639-3 中定义未指明的语言为 <code>und</code>。</p></blockquote>\n<p>因此，对于这一节开头的两个问题，在 BCP 47 中正确答案其实是：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"raw\">zh = 中文\ncmn = 中文普通话\n\nzh-Hans = 中文-简体\ncmn-Hans = 中文普通话-简体</pre>\n<p>而 <code>zh-CN</code> 实际是指在中国大陆使用的中文，当然也包含在中国大陆使用的繁体中文。<strong>不过，由于大部分情况下一个区域只会通用一种文字，很多情况下我们可以忽略文字这一项</strong>，即使用 <code>zh-CN</code>（或者 <code>cmn-CN</code>）来表示中国大陆的简体中文普通话——毕竟在大部分业务中在中国大陆使用繁体和非普通话的情况非常少。</p>\n<blockquote><p>事实上，类似 <code>zh-Hans</code> 和 <code>zh-Hant</code> 开头的区域设置名称已经被标记为 <code>redundant 废弃</code>，因此尽可能只使用 <code>zh-CN</code> 或者 <code>cmn-Hans-CN</code> 这样的区域设置名称。所有区域设置名称的列表可以在 <a href=\"https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry\" rel=\"noopener\">IANA</a> 找到。</p></blockquote>\n<p>现在我们可以准确定义一个区域设置了。不过我们还有一些小小的需求。比如我们想在 <code>cmn-Hans-CN</code> 的区域设置中使用农历来表示日期，但显然我们上文定义的表示方法并不能表达这一需求。好在，Unicode 为 BCP 47 提供了 u 扩展。在区域设置名称后面加上 <code>-u-[选项]</code> 就可以表达更细致的变体了。所以我们有：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"raw\">cmn-Hans-CN-u-ca-chinese = 中文普通话-简体-中国大陆-u-日历-中国农历\njpn-Jpan-JP-u-ca-japanese = 日语-日文汉字/平假名/片假名-日本-u-日历-日本日历\ncmn-Hans-CN-u-nu-hansfin = 中文普通话-简体-中国大陆-u-数字-简体大写数字</pre>\n<p>u 扩展的具体可选项可以在 <a href=\"https://www.unicode.org/reports/tr35/tr35-21.html#Unicode_locale_identifier\" rel=\"noopener\">Unicode 网站</a>上找到。而多个 u 扩展还可以连接——于是我们甚至可以写出 <code>cmn-Hans-CN-u-ca-chinese-nu-hansfin</code> 这种丧心病狂的区域设置名称。当然，相信你现在已经可以看懂这个区域设置的意思了。</p>\n<blockquote><p>不同地区可能会有不同的日历使用习惯，如中国有使用农历的需求，泰国有使用佛历的需求，我们可以通过 u 扩展指定不同的日历。不过，大部分情况下我们会使用标准的 ISO 8601 日历（gregory），JavaScript 的 <code>Date</code> 对象也只支持这种日历。</p></blockquote>\n<blockquote><p>你可以使用 <a href=\"https://r12a.github.io/app-subtags/\" rel=\"noopener\">BCP47 language subtag lookup</a> 工具快速检查你编写的 BCP 47 区域标签是否规范。</p></blockquote>\n<p>终于我们可以正确表达一个完美符合我们需求的区域设置了。接下来，让我们开始格式化时间吧。</p>\n<h1>格式化时间</h1>\n<p>这题我会！</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const formatDate(date) =&gt; {\n    return `${date.getFullYear()}-${`${date.getMonth() + 1}`.padStart(2, '0')}-${`${date.getDate()}`.padStart(2, '0')} ${`${date.getHours()}`.padStart(2, '0')}:${`${date.getMinutes()}`.padStart(2, '0')}:${`${date.getSeconds()}`.padStart(2, '0')}`\n}\n\nformatDate(new Date()) // 2021-10-13 01:00:00</pre>\n<p>就完事了……吗？先不论这样的格式化代码难以阅读，尽管上文这样的日期格式国际通用，<strong>但并非所有区域都习惯于这样的日期表示方法。</strong>比如英语国家/地区在很多时候习惯在日期中加入星期，而阿拉伯语国家/地区在部分情况下习惯使用阿拉伯语数字（而非常用的阿拉伯-印度数字）；再比如美式英语国家/地区习惯月-日-年的日期表示法，而英式英语国家/地区习惯日-月-年的日期表示法……不同区域在时间表示格式习惯上的差异是巨大的，<strong>我们很难通过一个简单的方法来正确地、国际化地格式化一个日期。</strong></p>\n<p>好在 ES6 早就为我们铺平了道路。还记得上文提到过的 <code>Intl.DateTimeFormat</code> 吗？我们通过它来实例化一个日期格式化器并用进行日期的国际化。</p>\n<p>直接来看例子吧：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const options = {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    weekday: 'long'\n}\nconst now = new Date()\n\nconst enUSFormatter = new Intl.DateTimeFormat('en-US', options)\n\nconst zhCNFormatter = new Intl.DateTimeFormat('zh-CN', options)\nconst zhCNAltFormatter = new Intl.DateTimeFormat('zh-CN-u-ca-chinese', options)\nconst zhCNAlt2Formatter = new Intl.DateTimeFormat('zh-CN-u-ca-roc-nu-hansfin', options)\n\nconst jaFormatter = new Intl.DateTimeFormat('ja', options)\nconst jaAltFormatter = new Intl.DateTimeFormat('ja-JP-u-ca-japanese', options)\n\nconst arEGFormatter = new Intl.DateTimeFormat('ar-EG', options)\n\nenUSFormatter.format(now) // Wednesday, Oct 13, 2021\n\nzhCNFormatter.format(now) // 2021年10月13日星期三\nzhCNAltFormatter.format(now) // 2021辛丑年九月8星期三\nzhCNAlt2Formatter.format(now) // 民国壹佰壹拾年拾月拾叁日星期三\n\njaFormatter.format(now) // 2021年10月13日水曜日\njaAltFormatter.format(now) // 令和3年10月13日水曜日\n\narEGFormatter.format(now) // الأربعاء، ١٣ أكتوبر ٢٠٢١</pre>\n<blockquote><p>在这里我们使用 ISO 639-1 代码来表示语言，是由于事实上 ISO 639-1 代码更加常见与通用。在大部分支持 <code>Intl.DateTimeFormat</code> 的 JavaScript 运行时中我们也可以使用 ISO 639-2/3 代码来表示语言（但实际会 fallback 至对应的 ISO 639-1 代码）。</p></blockquote>\n<blockquote><p>你也可以通过在 <code>options</code> 中设置 <code>calendar</code> 属性和 <code>numberingSystem</code> 属性来替换区域设置名称中对 u 扩展的使用。这也是推荐方式。</p></blockquote>\n<p>这非常直观，我们可以指定区域设置和格式化选项来初始化一个格式化器，并在之后使用格式化器对象的 <code>format</code> 方法来格式化一个 <code>Date</code> 对象。这里的格式化选项其实非常灵活，能格式化的不只是日期，时间也可以被灵活地格式化，有非常多的组合可以选择。我们不会在这里详细解释每一个选项，你可以访问 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat\" rel=\"noopener\">MDN 文档</a>来了解更多。</p>\n<blockquote><p>如前文所述，<code>Intl.DateTimeFormat</code> 无法格式化毫秒。</p></blockquote>\n<p>不过需要注意的是，<strong>JavaScript 运行时不一定支持所有区域设置，也不一定支持所有格式化选项。</strong>在遇到不支持的情况时，<code>Intl.DateTimeFormat</code> 默认会静默 fallback 到最匹配的支持项，因此在处理不常见的区域设置或选项时，你可能需要再额外检查。你可以通过 <code>Intl.DateTimeFormat.supportedLocalesOf()</code> 静态方法判断当前运行时是否支持指定的区域设置，也可以在实例化格式化器后在对象上调用 <code>resolvedOptions()</code> 方法来检查运行时的解析结果是否与预期一致。</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">new Intl.DateTimeFormat('yue-Hant-CN').resolvedOptions()\n// {locale: 'zh-CN', calendar: 'gregory', …}\n// fallback 至 zh-CN，与 yue-CN 的预期不一致</pre>\n<p>此外，正如你所看到的，各种语言在日期格式化中使用的文本 JavaScript 运行时都已经帮我们内置了。因此，我们甚至可以利用这些国际化特性来为我们的应用减少一点需要翻译的字符串——打包进应用的翻译越少，应用体积也就越小了嘛——比如说获取一周七天对应的名字：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const getWeekdayNames = (locale) =&gt; {\n     // 基于一个固定日期计算，这里选择 1970.1.1\n     // 不能使用 0，因为 Unix 时间戳 0 在不同时区的日期不一样\n    const base = new Date(1970, 0, 1).getTime()\n    const formatter = new Intl.DateTimeFormat(locale, { weekday: 'short' })\n    return Array.from({ length: 7 }, (_, day) =&gt; (\n        formatter.format(new Date(base + 3600000 * 24 * (-4 + day))) // 1970.1.1 是周四\n    ))\n}\n\ngetWeekdayNames('en-US') // ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\ngetWeekdayNames('zh-CN') // ['周日', '周一', '周二', '周三', '周四', '周五', '周六']\ngetWeekdayNames('ja') // ['日', '月', '火', '水', '木', '金', '土']\ngetWeekdayNames('ar-EG') // ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت']</pre>\n<p>当然，如果你还是不喜欢运行时为你提供的格式，我们还有上文提到过的 <code>formatToParts()</code> 方法可以用。来看一个简单的例子吧：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">new Intl.DateTimeFormat('zh-CN', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    weekday: 'long',\n    hour: 'numeric',\n    minute: 'numeric',\n    second: 'numeric',\n}).formatToParts(new Date())\n// [\n//     { type: 'year', value: '2021' },\n//     { type: 'literal', value: '年' },\n//     { type: 'month', value: '10' },\n//     { type: 'literal', value: '月' },\n//     { type: 'day', value: '13' },\n//     { type: 'literal', value: '日' },\n//     { type: 'weekday', value: '星期三' },\n//     { type: 'literal', value: ' ' },\n//     { type: 'dayPeriod', value: '上午' },\n//     { type: 'hour', value: '1' },\n//     { type: 'literal', value: ':' },\n//     { type: 'minute', value: '00' },\n//     { type: 'literal', value: ':' },\n//     { type: 'second', value: '00' }\n// ]</pre>\n<p>随后，你就可以自己解析这个数组来构造出你想要的时间格式了。最后，我们还可以使用 <code>Intl.RelativeTimeFormat</code> 来格式化相对日期。当然我们不会在这里详细讲解这个 API，你可以参考 <a href=\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Intl/RelativeTimeFormat\" rel=\"noopener\">MDN 文档</a>。直接来看一个简单例子吧：</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const getRelativeTime = (num, unit, locale) =&gt; {\n    return new Intl.RelativeTimeFormat(locale, { numeric: 'auto' }).format(num, unit)\n}\n\ngetRelativeTime(-3, 'day', 'en-US') // 3 days ago\ngetRelativeTime(-1, 'day', 'zh-CN') // 昨天\ngetRelativeTime(0, 'second', 'zh-CN') // 现在\ngetRelativeTime(3, 'hour', 'ja') // 3 時間後</pre>\n<blockquote><p><code>Intl.RelativeTimeFormat</code> 是一个相对较晚进入标准的对象，因此浏览器支持程度较差，可能需要使用 <a href=\"https://formatjs.io/docs/polyfills/intl-relativetimeformat\" rel=\"noopener\">Polyfill</a>。不过目前（2021.10）主流浏览器的最新版本均已支持此 API。</p></blockquote>\n<h1>未来</h1>\n<p>我希望这篇文章时区转换的部分可以很快过时——这并非无稽之谈，目前（2021.10）TC39 的 <a href=\"https://github.com/tc39/proposal-temporal\" rel=\"noopener\"><code>Temporal</code> 提案</a>已经进入 Stage 3 了。<strong><code>Temporal</code> 提案定义了一个新的、时区友好的 <code>Temporal</code> 命名空间，并期望在不久后就能进入标准并最终应用于生产环境。</strong><code>Temporal</code> 定义了完整的时区、时间段、日历规则的处理，且拥有简单明了的 API。那时候，JavaScript 的时区处理就不会再如此痛苦了。由于目前 <code>Temporal</code> 提案还未进入标准，API 暂未稳定，我们无法将其用于生产环境，但我们可以来看一个简单的例子感受一下这个 API 的强大。</p>\n<pre class=\"EnlighterJSRAW\" data-enlighter-language=\"js\">const zonedDateTime = Temporal.ZonedDateTime.from({\n  timeZone: 'America/Los_Angeles',\n  year: 1995,\n  month: 12,\n  day: 7,\n  hour: 3,\n  minute: 24,\n  second: 30,\n  millisecond: 0,\n  microsecond: 3,\n  nanosecond: 500,\n  calendar: 'iso8601'\n}) // 1995-12-07T03:24:30.0000035-08:00[America/Los_Angeles]</pre>\n<p>如果你希望立刻开始使用 <code>Temporal</code>，现在已有 Polyfill 可用。</p>\n<div class=\"mdx-github-cot\" data-mdxgithuba=\"js-temporal\" data-mdxgithubp=\"temporal-polyfill\" data-mdxgithubg=\"https://api.github.com/\"><div class=\"mdx-github-wait-out-c2\"><div class=\"mdx-github-wait-out-c mdui-valign\"><div class=\"mdx-github-wait-out\"><div class=\"mdx-github-wait\"><a href=\"https://github.com/js-temporal/temporal-polyfill\"><div class=\"mdui-spinner\"></div></a></div></div></div></div></div>\n<p>不过，时区问题不会消失，各地区的习惯也很难融合到一起。时间的国际化处理是<a href=\"https://yourcalendricalfallacyis.com/\" rel=\"noopener\">极其复杂</a>的，前端中的时间国际化仍然值得我们认真关注。</p>\n","link":"https://flyhigher.top/develop/2482.html"},{"title":"使用 Python 爬取故宫壁纸","date":"2021-07-17 05:55:00","description":"\n<p>我非常喜欢故宫壁纸，但是一张一张下载的速度就太慢了。</p>\n<p>于是，我就写了个简单的 Python 小程序自动爬取故宫壁纸。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E4%BB%A3%E7%A0%81\" class=\"headerlink\" title=\"代码\"></a>代码</h2>\n<p>首先，我们通过简单的查看，知道故宫壁纸的页面并没有使用 JavaScript 载入。</p>\n<p>但是故宫壁纸很多，所以还需要分类。</p>\n<p>故宫壁纸大多都是以分类开头，如 <code>爱上紫禁城 紫藤</code>, <code>清   虚谷紫藤金鱼图轴（局部）</code> 等等，所以一般只需要做个简单的 <code>startswith()</code> 判断就 OK 了。</p>\n<p>很多壁纸的标题都是一样的，所以还可以使用 <code>random</code> 库在文件名末尾追加一个随机数。</p>\n<figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> requests, bs4, time, random</span><br><span class=\"line\">path = <span class=\"string\">\"./wallpaper/爱上紫禁城\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">catch = <span class=\"number\">0</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">1</span>, <span class=\"number\">119</span>):</span><br><span class=\"line\">    <span class=\"comment\"># 组合请求 URL</span></span><br><span class=\"line\">    url = <span class=\"string\">\"https://www.dpm.org.cn/lights/royal/p/{}.html\"</span>.<span class=\"built_in\">format</span>(i)</span><br><span class=\"line\">    <span class=\"comment\"># 发送请求</span></span><br><span class=\"line\">    response = requests.get(url)</span><br><span class=\"line\">    <span class=\"comment\"># 设定页面编码为 UTF-8</span></span><br><span class=\"line\">    response.encoding = <span class=\"string\">\"UTF-8\"</span></span><br><span class=\"line\">    <span class=\"comment\"># 从 HTML 中解析数据</span></span><br><span class=\"line\">    soup = bs4.BeautifulSoup(response.text, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">    image = soup.find_all(name=<span class=\"string\">\"div\"</span>, class_=<span class=\"string\">\"pic\"</span>)</span><br><span class=\"line\">    <span class=\"comment\"># 循环输出图片</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> n <span class=\"keyword\">in</span> image:</span><br><span class=\"line\">        catch = catch + <span class=\"number\">1</span></span><br><span class=\"line\">        <span class=\"comment\"># 获得壁纸名称</span></span><br><span class=\"line\">        <span class=\"comment\"># 分类，不是以【爱上紫禁城】开头的壁纸都忽略</span></span><br><span class=\"line\">        img_name = n.a.img[<span class=\"string\">\"title\"</span>]</span><br><span class=\"line\">        <span class=\"keyword\">if</span> img_name.startswith(<span class=\"string\">\"明\"</span>):</span><br><span class=\"line\">            print(<span class=\"string\">\"{}. {}\"</span>.<span class=\"built_in\">format</span>(catch, n.a.img[<span class=\"string\">\"title\"</span>]))</span><br><span class=\"line\">            <span class=\"comment\"># 组合获得壁纸页面</span></span><br><span class=\"line\">            url_1080 = <span class=\"string\">\"https://www.dpm.org.cn\"</span> + n.a[<span class=\"string\">\"href\"</span>]</span><br><span class=\"line\">            <span class=\"comment\"># 请求高清版网页</span></span><br><span class=\"line\">            response_img = requests.get(url_1080)</span><br><span class=\"line\">            <span class=\"comment\"># 再次解析</span></span><br><span class=\"line\">            soup_img = bs4.BeautifulSoup(response_img.text, <span class=\"string\">\"lxml\"</span>)</span><br><span class=\"line\">            <span class=\"comment\"># 获取页面中的图片</span></span><br><span class=\"line\">            data = soup_img.find_all(name=<span class=\"string\">\"img\"</span>)[<span class=\"number\">0</span>]</span><br><span class=\"line\">            <span class=\"comment\"># 获得壁纸图片的链接</span></span><br><span class=\"line\">            img_url = data[<span class=\"string\">\"src\"</span>]</span><br><span class=\"line\">            <span class=\"comment\"># 保存图片</span></span><br><span class=\"line\">            pic = requests.get(img_url).content</span><br><span class=\"line\">            file_name = path + img_name + <span class=\"string\">\"-\"</span> + <span class=\"built_in\">str</span>(random.randint(<span class=\"number\">100000</span>, <span class=\"number\">999999</span>)) + <span class=\"string\">\".jpg\"</span></span><br><span class=\"line\">            <span class=\"comment\"># 写入文件</span></span><br><span class=\"line\">            <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(file_name, <span class=\"string\">\"wb\"</span>) <span class=\"keyword\">as</span> file:</span><br><span class=\"line\">                file.write(pic)</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            print(<span class=\"string\">\"!Ignore: \"</span> + img_name)</span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E5%90%8E\" class=\"headerlink\" title=\"后\"></a>后</h2>\n<p>我把一些我下载下来的壁纸放在了 <a href=\"https://t.yfun.top/dpm-wallpaper\">这里</a>，可以直接预览并下载。</p>\n<p><del>OK，又水了一篇文（</del></p>\n","link":"https://blog.yfun.top/posts/2021/dpm-wallpaper/"},{"title":"使用 Prettier 格式化代码","date":"2021-07-15 06:45:00","description":"\n<p>格式化代码可以提高代码的可读性，使代码更加美观。</p>\n<p>Prettier 支持：</p>\n<ul>\n<li>JavaScript (including experimental features)</li>\n<li>JSX</li>\n<li>Angular</li>\n<li>Vue</li>\n<li>Flow</li>\n<li>TypeScript</li>\n<li>CSS, Less, and SCSS</li>\n<li>HTML</li>\n<li>JSON</li>\n<li>GraphQL</li>\n<li>Markdown, including GFM and MDX</li>\n<li>YAML</li>\n</ul>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%AE%89%E8%A3%85\" class=\"headerlink\" title=\"安装\"></a>安装</h2>\n<h3>\n<a href=\"https://blog.yfun.top/#%E6%8F%92%E4%BB%B6\" class=\"headerlink\" title=\"插件\"></a>插件</h3>\n<p>你可以很方便的在 VSCode 等 IDE 上安装插件，插件名为 <code>Prettier</code>.</p>\n<p>以 VSCode 为例：</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.10/rawimg/6a3ad0ea42d55.png\"></p>\n<blockquote><p>如果安装了其他格式化插件，则需要点击 [格式化文档的方式]，选择 <code>Prettier</code>。</p></blockquote>\n<h3>\n<a href=\"https://blog.yfun.top/#CLI\" class=\"headerlink\" title=\"CLI\"></a>CLI</h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo npm i -g prettier</span><br></pre></td></tr></table></figure><p>相关的文档可参见官网: <a href=\"https://prettier.io/docs/en/cli.html\">https://prettier.io/docs/en/cli.html</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">prettier --write . <span class=\"comment\"># 格式化当前文件夹的所有文件</span></span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E9%85%8D%E7%BD%AE\" class=\"headerlink\" title=\"配置\"></a>配置</h2>\n<p>参见官方文档：</p>\n<ul>\n<li><p><a href=\"https://prettier.io/docs/en/configuration.html\">https://prettier.io/docs/en/configuration.html</a></p></li>\n<li><p><a href=\"https://prettier.io/docs/en/options.html\">https://prettier.io/docs/en/options.html</a></p></li>\n</ul>\n<p>Prettier 的配置文件有多种写法：</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.10/rawimg/a4cc583d84c12.png\"></p>\n<p>以使用 <code>YAML</code> 书写的 <code>.prettierrc</code> 为例：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 单行最长字符数</span></span><br><span class=\"line\"><span class=\"attr\">printWidth:</span> <span class=\"number\">80</span></span><br><span class=\"line\"><span class=\"comment\"># 制表符长度</span></span><br><span class=\"line\"><span class=\"attr\">tabWidth:</span> <span class=\"number\">4</span></span><br><span class=\"line\"><span class=\"comment\"># 是否使用 Tab</span></span><br><span class=\"line\"><span class=\"attr\">useTabs:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"comment\"># 是否加入分号</span></span><br><span class=\"line\"><span class=\"attr\">semi:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"comment\"># 单引号</span></span><br><span class=\"line\"><span class=\"attr\">singleQuote:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E6%95%88%E6%9E%9C\" class=\"headerlink\" title=\"效果\"></a>效果</h2>\n<p>格式化前：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">\"https://blog.yfun.top/search.json\"</span>).then(<span class=\"function\"><span class=\"params\">res</span>=&gt;</span>res.json()).then(<span class=\"function\">(<span class=\"params\">content</span>) =&gt;</span> {<span class=\"built_in\">console</span>.log(content);<span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; content.length; i++){<span class=\"built_in\">console</span>.log(content[i][<span class=\"string\">'title'</span>] + <span class=\"string\">\" --- https://blog.yfun.top\"</span> + content[i][<span class=\"string\">'url'</span>])}})</span><br></pre></td></tr></table></figure><p>格式化后：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"code\"><pre><span class=\"line\">fetch(<span class=\"string\">\"https://blog.yfun.top/search.json\"</span>)</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> res.json())</span><br><span class=\"line\">    .then(<span class=\"function\">(<span class=\"params\">content</span>) =&gt;</span> {</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(content);</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; content.length; i++) {</span><br><span class=\"line\">            <span class=\"built_in\">console</span>.log(</span><br><span class=\"line\">                content[i][<span class=\"string\">\"title\"</span>] +</span><br><span class=\"line\">                    <span class=\"string\">\" --- https://blog.yfun.top\"</span> +</span><br><span class=\"line\">                    content[i][<span class=\"string\">\"url\"</span>]</span><br><span class=\"line\">            );</span><br><span class=\"line\">        }</span><br><span class=\"line\">    });</span><br></pre></td></tr></table></figure>\n","link":"https://blog.yfun.top/posts/2021/format-code-using-prettier/"},{"title":"树莓派超频","date":"2021-06-25 07:50:00","description":"\n<div class=\"note note-info\">            <p>本文操作系统为 Ubuntu Server 20.04，其他操作系统可能有所不同。</p>          </div>\n<div class=\"note note-warning\">            <p>超频是有风险的，温度也会更高，需要比较良好的散热。</p>          </div>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%BC%80%E5%A7%8B\" class=\"headerlink\" title=\"开始\"></a>开始</h2>\n<p>登录树莓派，进入 <code>/boot/firmware/</code> 目录：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> /boot/firmware/</span><br></pre></td></tr></table></figure><div class=\"note note-warning\">            <p>网上很多教程让你修改 <code>config.txt</code> 文件，但注释里已经很明确的写了：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\"># Please DO NOT modify this file; if you need to modify the boot config, the</span><br><span class=\"line\"># \"usercfg.txt\" file is the place to include user changes. Please refer to</span><br><span class=\"line\"># the README file for a description of the various configuration files on</span><br><span class=\"line\"># the boot partition.</span><br></pre></td></tr></table></figure>\n</div>\n<p>我们修改 <code>usercfg.txt</code> 文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vim usercfg.txt</span><br></pre></td></tr></table></figure><p>在文件末尾追加配置信息，以下是我的，仅供参考：</p>\n<div class=\"note note-danger\">            <p>我使用的是 <code>Raspberry Pi 4 (4GB)</code>，并且有小风扇和散热片。<br>请根据自己的需要和配置进行更改。</p>          </div>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">force_turbo=0</span><br><span class=\"line\">arm_freq=1850</span><br><span class=\"line\">over_voltage=6</span><br><span class=\"line\">gpu_freq=650</span><br><span class=\"line\">core_freq=650</span><br><span class=\"line\">gpu_mem=620</span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E9%87%8D%E5%90%AF\" class=\"headerlink\" title=\"重启\"></a>重启</h2>\n<p>保存文件，使用命令重启：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo reboot</span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E5%90%8E\" class=\"headerlink\" title=\"后\"></a>后</h2>\n<p>重启完毕后，再使用 <code>lscpu</code> 命令看看 CPU 状况。</p>\n","link":"https://blog.yfun.top/posts/1445549919/"},{"title":"加速 GitHub 下载","date":"2021-06-18 09:30:00","description":"\n<p>GitHub 在国内的访问情况不太稳定，仓库克隆速度也非常慢。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E2%9C%88%EF%B8%8F\" class=\"headerlink\" title=\"✈️\"></a>✈️</h2>\n<p>不必多说。</p>\n<p>例如 <a href=\"http://127.0.0.1:7890/\">http://127.0.0.1:7890</a> 为代理地址，你可以使用下方的命令更改：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global http.proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure><p>如果有一天不需要了，输入下面代码取消：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">git config --global --<span class=\"built_in\">unset</span> http.proxy</span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#FastGit\" class=\"headerlink\" title=\"FastGit\"></a>FastGit</h2>\n<p>使用 <a href=\"https://fastgit.org/\">FastGit</a> 提供的 GitHub 镜像。</p>\n<p>镜像地址：<a href=\"https://hub.fastgit.org/\">https://hub.fastgit.org</a></p>\n<p>支持 HTTPS 克隆，并且提供 raw.githubusercontent.com 的镜像，地址为 <a href=\"https://raw.fastgit.org/\">https://raw.fastgit.org</a></p>\n<h2>\n<a href=\"https://blog.yfun.top/#CNPM\" class=\"headerlink\" title=\"CNPM\"></a>CNPM</h2>\n<p>使用 <a href=\"https://cnpmjs.org/\">CNPM</a> 提供的 GitHub 镜像。</p>\n<p>镜像地址：<a href=\"https://github.com.cnpmjs.org/\">https://github.com.cnpmjs.org</a></p>\n<p>支持 HTTPS 克隆。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#Hosts\" class=\"headerlink\" title=\"Hosts\"></a>Hosts</h2>\n<p>通过更改 Hosts 文件的方式解决，但大有可能失效：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"code\"><pre><span class=\"line\">199.232.69.194  github.global.ssl.fastly.net</span><br><span class=\"line\">140.82.113.4    github.com</span><br></pre></td></tr></table></figure><p>GitHub 上的 <a href=\"https://github.com/521xueweihan/GitHub520\">521xueweihan/GitHub520</a> 项目提供了更多关于 GitHub Hosts 列表。</p>\n<blockquote><p><a href=\"https://github.com/521xueweihan/GitHub520/issues/53\">521xueweihan/GitHub520 #53</a></p></blockquote>\n<h2>\n<a href=\"https://blog.yfun.top/#Gitee\" class=\"headerlink\" title=\"Gitee\"></a>Gitee</h2>\n<p>网上挺多教程，使用 Gitee 的「从 GitHub 导入」功能。</p>\n<p>不过 Gitee 限制仓库 500MB。。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#Coding\" class=\"headerlink\" title=\"Coding\"></a>Coding</h2>\n<p>进入 Coding 控制台，点击「创建项目」。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/k7uHJm.png\"></p>\n<p>项目模版选择「代码托管」就好，仅做下载的话无需开启太多。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/bEO0vX.png\"></p>\n<p>填写项目基本信息，如名称、标识等。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/N4xjSv.png\"></p>\n<p>新建一个镜像仓库。</p>\n<p>「Git 仓库 URL」填写 GitHub 公开仓库 HTTPS 克隆地址，如：<a href=\"https://github.com/twbs/bootstrap.git\">https://github.com/twbs/bootstrap.git</a></p>\n<p>创建完成后请稍等，系统就会自动导入。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/YxnnDj.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/FmfWkf.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/OV7w4v.png\"></p>\n<p>导入完成后，点击「克隆」就能找到克隆地址。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.9/rawimg/bWszbu.png\"></p>\n<p>克隆速度挺快的：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">Cloning into <span class=\"string\">'bootstrap'</span>...</span><br><span class=\"line\">remote: Enumerating objects: 169214, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">remote: Counting objects: 100% (169214/169214), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">remote: Compressing objects: 100% (51634/51634), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Receiving objects:  57% (96728/169214), 90.58 MiB | 6.83 MiB/s </span><br></pre></td></tr></table></figure><p>此外，Coding 还支持自动同步，可以设置每天的同步时间。</p>\n","link":"https://blog.yfun.top/posts/2517388641/"},{"title":"GitHub Action 监测京东商品价格","date":"2021-05-18 10:32:00","description":"\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%89%8D%E8%A8%80\" class=\"headerlink\" title=\"前言\"></a>前言</h2>\n<p>我会在京东上买些电子产品和文具，那么如何获得商品降价信息，使用更低的价格购买呢？</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%BC%80%E5%A7%8B\" class=\"headerlink\" title=\"开始\"></a>开始</h2>\n<p>新建一个 <code>GitHub</code> 仓库，创建 <code>main.py</code> , <code>notify.py</code> 和 <code>.github/workflows/auto.yml</code> 三个文件，内容如下：</p>  <details class=\"post-details\"><summary><code>main.py</code> (点击展开)</summary><div class=\"details-content\">  <figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"comment\"># 导入模块</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.request, random, json, notify</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 商品列表</span></span><br><span class=\"line\">check = [</span><br><span class=\"line\">    <span class=\"comment\"># 闪迪（SanDisk）64GB TF（MicroSD）存储卡</span></span><br><span class=\"line\">    <span class=\"string\">'1887526'</span>,</span><br><span class=\"line\">    <span class=\"comment\"># 晨光(M&amp;G)文具 0.5mm 黑色中性笔</span></span><br><span class=\"line\">    <span class=\"string\">'277393'</span></span><br><span class=\"line\"><span class=\"comment\"># ...</span></span><br><span class=\"line\">]</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 价格列表，用于临时存储获取到的价格数据</span></span><br><span class=\"line\">price = {}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 读取上次的价格文件</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    file = <span class=\"built_in\">open</span>(<span class=\"string\">'./price.json'</span>, mode=<span class=\"string\">'r'</span>)</span><br><span class=\"line\">    lastPrice = json.loads(file.readlines()[<span class=\"number\">0</span>])</span><br><span class=\"line\"><span class=\"keyword\">except</span>:</span><br><span class=\"line\">    print(<span class=\"string\">\"读取文件时出现错误！\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 遍历列表，比对价格</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> itemId <span class=\"keyword\">in</span> check:</span><br><span class=\"line\">    <span class=\"comment\"># 组合请求 URL</span></span><br><span class=\"line\">    <span class=\"comment\"># http://p.3.cn/prices/mgets?skuIds=J_</span></span><br><span class=\"line\">    url = <span class=\"string\">'http://p.3.cn/prices/mgets?skuIds=J_{}'</span>.<span class=\"built_in\">format</span>(itemId)</span><br><span class=\"line\">    <span class=\"comment\"># User-Agent 列表</span></span><br><span class=\"line\">    ua = [<span class=\"string\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36'</span>,<span class=\"string\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36'</span>,<span class=\"string\">'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 OPR/26.0.1656.60'</span>,<span class=\"string\">'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50'</span>,<span class=\"string\">'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50'</span>]</span><br><span class=\"line\">    <span class=\"comment\"># 随机获得一个 User-Agent，如不带 User-Agent 请求，就会被拒绝。</span></span><br><span class=\"line\">    headers = {</span><br><span class=\"line\">        <span class=\"string\">'User-Agent'</span>: ua[random.randint(<span class=\"number\">0</span>,<span class=\"number\">4</span>)]</span><br><span class=\"line\">    }</span><br><span class=\"line\">    <span class=\"comment\"># 组合请求参数</span></span><br><span class=\"line\">    request = urllib.request.Request(url = url, headers = headers)</span><br><span class=\"line\">    <span class=\"comment\"># 向京东发起请求</span></span><br><span class=\"line\">    response = urllib.request.urlopen(request)</span><br><span class=\"line\">    <span class=\"comment\"># 将获得的数据转为 JSON</span></span><br><span class=\"line\">    page_text = json.loads(response.read().decode(<span class=\"string\">'utf-8'</span>))</span><br><span class=\"line\">    thisPrice = <span class=\"built_in\">float</span>(page_text[<span class=\"number\">0</span>][<span class=\"string\">'p'</span>])</span><br><span class=\"line\">    <span class=\"comment\"># 将价格输入至价格变量</span></span><br><span class=\"line\">    price[itemId] = thisPrice</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 尝试对比价格</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">        <span class=\"keyword\">if</span> thisPrice &gt; lastPrice[itemId]:</span><br><span class=\"line\">            print(<span class=\"string\">\"{0} 涨价\"</span>.<span class=\"built_in\">format</span>(itemId))</span><br><span class=\"line\"></span><br><span class=\"line\">            print(thisPrice - lastPrice[itemId])</span><br><span class=\"line\">            notify.notify(itemId, <span class=\"number\">0</span>, thisPrice - lastPrice[itemId], thisPrice)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> thisPrice &lt; lastPrice[itemId]:</span><br><span class=\"line\">            print(<span class=\"string\">\"{0} 降价\"</span>.<span class=\"built_in\">format</span>(itemId))</span><br><span class=\"line\">            print(lastPrice[itemId] - thisPrice)</span><br><span class=\"line\">            notify.notify(itemId, <span class=\"number\">2</span>, lastPrice[itemId] - thisPrice, thisPrice)</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">elif</span> lastPrice[itemId] == thisPrice:</span><br><span class=\"line\">            print(<span class=\"string\">\"{0} 价格不变\"</span>.<span class=\"built_in\">format</span>(itemId))</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            print(<span class=\"string\">\"{0} 未知错误\"</span>.<span class=\"built_in\">format</span>(itemId))</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">        print(<span class=\"string\">\"无法进行比对\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 将 JSON 转为 字符串</span></span><br><span class=\"line\">priceStr = json.dumps(price)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写入价格文件，便于下次查询</span></span><br><span class=\"line\"><span class=\"keyword\">try</span>:</span><br><span class=\"line\">    file = <span class=\"built_in\">open</span>(<span class=\"string\">'./price.json'</span>, mode = <span class=\"string\">'w'</span>)</span><br><span class=\"line\">    file.write(priceStr)</span><br><span class=\"line\">    file.close()</span><br><span class=\"line\"><span class=\"keyword\">except</span>:</span><br><span class=\"line\">    print(<span class=\"string\">\"写入文件时出现错误\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">print(price)</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</div></details><details class=\"post-details\"><summary><code>notify.py</code> (点击展开)</summary><div class=\"details-content\">  <figure class=\"highlight python\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># -*- coding: utf-8 -*-</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> urllib.request, json, urllib.parse, ssl</span><br><span class=\"line\">ssl._create_default_https_context = ssl._create_unverified_context</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">提醒的服务，支持 `wechat` 与 `qmsg`。</span></span><br><span class=\"line\"><span class=\"string\">需要在下方进行下一步的配置</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\">server = [<span class=\"string\">'qmsg'</span>]</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">WeChat 采用的是 Server 酱 (https://sc.ftqq.com/3.version) 提供的服务</span></span><br><span class=\"line\"><span class=\"string\">key：Server 酱提供的 Token，必填。</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\">wechat = {</span><br><span class=\"line\">    <span class=\"string\">\"key\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">Qmsg 采用的是 Qmsg 酱 (https://qmsg.zendee.cn/) 提供的服务</span></span><br><span class=\"line\"><span class=\"string\">key：Qmsg 酱提供的 KEY，必填。</span></span><br><span class=\"line\"><span class=\"string\">qid：接收消息的 QQ 号（不支持 QQ 群），可以添加多个，以半角逗号分割，如：`10001,10002`（必须均在您的 Qmsg 酱 QQ 号列表中）。</span></span><br><span class=\"line\"><span class=\"string\">'''</span></span><br><span class=\"line\">qmsg = {</span><br><span class=\"line\">    <span class=\"string\">\"key\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"qid\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">wechat_send</span>(<span class=\"params\">key, title, text</span>):</span></span><br><span class=\"line\">    url = <span class=\"string\">'http://sc.ftqq.com/{0}.send?text={1}&amp;desp={2}'</span>.<span class=\"built_in\">format</span>(key, urllib.parse.quote(title), urllib.parse.quote(text))</span><br><span class=\"line\">    headers = {</span><br><span class=\"line\">        <span class=\"string\">'User-Agent'</span>: <span class=\"string\">\"Check Price Bot\"</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    request = urllib.request.Request(url=url, headers=headers)</span><br><span class=\"line\">    response = urllib.request.urlopen(request)</span><br><span class=\"line\">    page_text = json.loads(response.read().decode(<span class=\"string\">'utf-8'</span>))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> page_text[<span class=\"string\">'errno'</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">qmsg_send</span>(<span class=\"params\">key, <span class=\"built_in\">id</span>, text</span>):</span></span><br><span class=\"line\">    url = <span class=\"string\">'http://qmsg.zendee.cn/send/{0}?msg={1}&amp;qq={2}'</span>.<span class=\"built_in\">format</span>(key, urllib.parse.quote(text), <span class=\"built_in\">id</span>)</span><br><span class=\"line\">    headers = {</span><br><span class=\"line\">        <span class=\"string\">'User-Agent'</span>: <span class=\"string\">\"Check Price Bot\"</span></span><br><span class=\"line\">    }</span><br><span class=\"line\">    request = urllib.request.Request(url=url, headers=headers)</span><br><span class=\"line\">    response = urllib.request.urlopen(request)</span><br><span class=\"line\">    page_text = json.loads(response.read().decode(<span class=\"string\">'utf-8'</span>))</span><br><span class=\"line\">    <span class=\"keyword\">if</span> page_text[<span class=\"string\">'code'</span>] == <span class=\"number\">0</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">True</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">notify</span>(<span class=\"params\"><span class=\"built_in\">id</span>,<span class=\"built_in\">type</span>,price,nowPrice</span>):</span></span><br><span class=\"line\">    <span class=\"string\">'''</span></span><br><span class=\"line\"><span class=\"string\">    type:</span></span><br><span class=\"line\"><span class=\"string\">        0: 涨价</span></span><br><span class=\"line\"><span class=\"string\">        1: 无变化</span></span><br><span class=\"line\"><span class=\"string\">        2: 降价</span></span><br><span class=\"line\"><span class=\"string\">    id: 商品 ID</span></span><br><span class=\"line\"><span class=\"string\">    price: 差价</span></span><br><span class=\"line\"><span class=\"string\">    nowPrice: 现价</span></span><br><span class=\"line\"><span class=\"string\">    '''</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> svId <span class=\"keyword\">in</span> server:</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">def</span> <span class=\"title\">send</span>(<span class=\"params\">title,content</span>):</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> svId == <span class=\"string\">'wechat'</span>:</span><br><span class=\"line\">                wechat_send(wechat[<span class=\"string\">\"key\"</span>],title,content)</span><br><span class=\"line\">            <span class=\"keyword\">if</span> svId == <span class=\"string\">'qmsg'</span>:</span><br><span class=\"line\">                qmsg_send(qmsg[<span class=\"string\">\"key\"</span>],qmsg[<span class=\"string\">\"qid\"</span>],title + <span class=\"string\">\"\\n\"</span> + content)</span><br><span class=\"line\">            <span class=\"keyword\">else</span>:</span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> <span class=\"built_in\">type</span> == <span class=\"number\">0</span>:</span><br><span class=\"line\">            title = <span class=\"string\">\"商品 {0} 涨价!\"</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">id</span>)</span><br><span class=\"line\">            content = <span class=\"string\">\"您关注的商品 {0} 涨价咯！价格相较于上次监测，高了 {1} 元，现价 {2} 元。商品详情：https://item.jd.com/{0}.html\"</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">id</span>,price,nowPrice)</span><br><span class=\"line\">            send(title,content)</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> <span class=\"built_in\">type</span> == <span class=\"number\">1</span>:</span><br><span class=\"line\">            print(<span class=\"string\">\"价格没有变化，不推送通知。\"</span>)</span><br><span class=\"line\">        <span class=\"keyword\">elif</span> <span class=\"built_in\">type</span> == <span class=\"number\">2</span>:</span><br><span class=\"line\">            title = <span class=\"string\">\"商品 {0} 降价!\"</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">id</span>)</span><br><span class=\"line\">            content = <span class=\"string\">\"您关注的商品 {0} 降价咯！价格相较于上次监测，低了 {1} 元，现价 {2} 元。商品详情：https://item.jd.com/{0}.html\"</span>.<span class=\"built_in\">format</span>(<span class=\"built_in\">id</span>, price,nowPrice)</span><br><span class=\"line\">            send(title, content)</span><br><span class=\"line\">        <span class=\"keyword\">else</span>:</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"literal\">False</span></span><br></pre></td></tr></table></figure>\n</div></details><details class=\"post-details\"><summary><code>.github/workflows/auto.yml</code> (点击展开)</summary><div class=\"details-content\">  <figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">Check</span> <span class=\"string\">Price</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">push:</span></span><br><span class=\"line\">    <span class=\"attr\">branches:</span> </span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"string\">master</span></span><br><span class=\"line\">  <span class=\"attr\">schedule:</span></span><br><span class=\"line\">    <span class=\"comment\"># 每 1 小时运行一次</span></span><br><span class=\"line\">    <span class=\"bullet\">-</span> <span class=\"attr\">cron:</span> <span class=\"string\">\"0 * * * *\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">check:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Clone</span> <span class=\"string\">repository</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">'Set up Python'</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-python@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">python-version:</span> <span class=\"number\">3.7</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Run</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">python</span> <span class=\"string\">main.py</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Push</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">config</span> <span class=\"string\">--local</span> <span class=\"string\">user.email</span> <span class=\"string\">\"icolabot@e.yfun.top\"</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">config</span> <span class=\"string\">--local</span> <span class=\"string\">user.name</span> <span class=\"string\">\"iColaBot\"</span></span><br><span class=\"line\">          <span class=\"string\">date</span> <span class=\"string\">+\"%Y-%m-%d</span> <span class=\"string\">%H:%M:%S.%N\"</span> <span class=\"string\">&gt;</span> <span class=\"string\">date.txt</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">add</span> <span class=\"string\">-A</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">commit</span> <span class=\"string\">-am</span> <span class=\"string\">\"Update price.json\"</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">push</span> <span class=\"string\">origin</span> <span class=\"string\">master</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n</div></details><h2>\n<a href=\"https://blog.yfun.top/#%E6%B3%A8%E6%84%8F\" class=\"headerlink\" title=\"注意\"></a>注意</h2>\n<p>计划任务语法有 5 个字段，中间用空格分隔，每个字段代表一个时间单位。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">┌───────────── 分钟 (0 - 59)</span><br><span class=\"line\">│ ┌───────────── 小时 (0 - 23)</span><br><span class=\"line\">│ │ ┌───────────── 日 (1 - 31)</span><br><span class=\"line\">│ │ │ ┌───────────── 月 (1 - 12 或 JAN-DEC)</span><br><span class=\"line\">│ │ │ │ ┌───────────── 星期 (0 - 6 或 SUN-SAT)</span><br><span class=\"line\">│ │ │ │ │</span><br><span class=\"line\">│ │ │ │ │</span><br><span class=\"line\">│ │ │ │ │</span><br><span class=\"line\">* * * * *</span><br></pre></td></tr></table></figure><p>每个时间字段的含义：</p>\n<table>\n<thead><tr>\n<th align=\"center\">符号</th>\n<th align=\"center\">描述</th>\n<th align=\"center\">举例</th>\n</tr></thead>\n<tbody>\n<tr>\n<td align=\"center\"><code>*</code></td>\n<td align=\"center\">任意值</td>\n<td align=\"center\">\n<code>* * * * *</code> 每天每小时每分钟</td>\n</tr>\n<tr>\n<td align=\"center\"><code>,</code></td>\n<td align=\"center\">值分隔符</td>\n<td align=\"center\">\n<code>1,3,4,7 * * * *</code> 每小时的 1 3 4 7 分钟</td>\n</tr>\n<tr>\n<td align=\"center\"><code>-</code></td>\n<td align=\"center\">范围</td>\n<td align=\"center\">\n<code>1-6 * * * *</code> 每小时的 1-6 分钟</td>\n</tr>\n<tr>\n<td align=\"center\"><code>/</code></td>\n<td align=\"center\">每</td>\n<td align=\"center\">\n<code>*/15 * * * *</code> 每隔 15 分钟</td>\n</tr>\n</tbody>\n</table>\n<blockquote><p>注：由于 GitHub Actions 的限制，如果设置为 <code>* * * * *</code> 实际的执行频率为每 5 分执行一次。</p></blockquote>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%90%8E\" class=\"headerlink\" title=\"后\"></a>后</h2>\n<p>新建文件 并 配置 <code>notify.py</code> 后，GitHub Action 就会定时执行代码。如果有降价或涨价，就会按照 <code>notify.py</code> 的配置进行通知。</p>\n<p>京东也有降价提醒的功能，但我实在是不想给 京东 开通知权限，经常推送商品广告。</p>\n<p>本文部分内容参考：<a href=\"https://github.com/justjavac/auto-green#readme\">justjavac/auto-green#readme</a></p>\n","link":"https://blog.yfun.top/posts/1238639652/"},{"title":"我的图床解决方案","date":"2021-05-08 10:30:00","description":"\n<p>博客的文章经常需要插入图片，如果我将文档与图片放在一起，那么图片的加载速度将会很慢，于是我使用了图床。</p>\n<p>图床的选择有很多，<a href=\"https://blog.yfun.top/posts/3867215122/\">笔者之前写过一篇关于免费图床的汇总</a>，本文就来介绍下我采用的方案：NPM。</p>\n<blockquote><p>本文假设您已有 NPM 账号、GitHub 账号。</p></blockquote>\n<h2>\n<a href=\"https://blog.yfun.top/#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C\" class=\"headerlink\" title=\"准备工作\"></a>准备工作</h2>\n<h3>\n<a href=\"https://blog.yfun.top/#%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93\" class=\"headerlink\" title=\"新建仓库\"></a>新建仓库</h3>\n<p>新建一个 GitHub 仓库，公开或是私人都可以，此处不再赘述。</p>\n<p>在 Git 仓库中新建 <code>rawimg/.gitkeep</code> 与 <code>webpimg/.gitkeep</code> 两个文件。</p>\n<h3>\n<a href=\"https://blog.yfun.top/#%E8%8E%B7%E5%8F%96%E4%BB%A4%E7%89%8C\" class=\"headerlink\" title=\"获取令牌\"></a>获取令牌</h3>\n<p>登录 <a href=\"https://npmjs.com/\">https://npmjs.com</a> ，点击右上角的头像，进入 <code>Access Token</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/1Xbrlw.png\"></p>\n<p>点击页面中的 <code>Generate New Token</code> 获取新的令牌。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/OQMmsB.png\"></p>\n<p>选择 <code>Automation</code>，点击 <code>Generate Token</code> 生成令牌。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/4Ob3xs.png\"></p>\n<p>将生成的令牌复制下来。</p>\n<p>进入 GitHub 仓库，点击 <code>Settings</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/UfBqld.png\"></p>\n<p>点击菜单栏中的 <code>Secrets</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/SStNlF.png\"></p>\n<p>点击 <code>New repository secret</code> 新建一个 Secret。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/UYSnao.png\"></p>\n<p>Secret Name 为 <code>NPM_TOKEN</code>，Value 是你的 NPM 令牌，点击 <code>Add secret</code> 添加。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/OY4C6A.png\"></p>\n<p>在仓库中新建 <code>package.json</code> 文件，参考如下：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"code\"><pre><span class=\"line\">{</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"ocoke-osg\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"0.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"Somewhere to save the file from @oCoke\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: <span class=\"string\">\"YFun(@oCoke)\"</span></span><br><span class=\"line\">}</span><br></pre></td></tr></table></figure><h2>\n<a href=\"https://blog.yfun.top/#%E5%9B%BE%E7%89%87%E8%BD%AC%E6%8D%A2%E4%B8%8E%E5%8F%91%E5%B8%83\" class=\"headerlink\" title=\"图片转换与发布\"></a>图片转换与发布</h2>\n<p>为了方便多端写作，我使用 GitHub 临时存储所需的图片，GitHub Action 发布 NPM 包。</p>\n<p>WebP 可以大大缩减图片的尺寸，我们还可以借助 GitHub Action 在发布前自动转换。</p>  <details class=\"post-details\"><summary>GitHub Action 代码 (点击展开)</summary><div class=\"details-content\">  <figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">name:</span> <span class=\"string\">NPM</span> <span class=\"string\">&amp;</span> <span class=\"string\">WebP</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在 Release 发布时 或手动执行</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">on:</span></span><br><span class=\"line\">  <span class=\"attr\">release:</span></span><br><span class=\"line\">     <span class=\"attr\">types:</span></span><br><span class=\"line\">       <span class=\"bullet\">-</span> <span class=\"string\">published</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"attr\">workflow_dispatch:</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"attr\">jobs:</span></span><br><span class=\"line\">  <span class=\"attr\">publish-npm:</span></span><br><span class=\"line\">    <span class=\"attr\">runs-on:</span> <span class=\"string\">ubuntu-latest</span></span><br><span class=\"line\">    <span class=\"comment\"># Clone 仓库</span></span><br><span class=\"line\">    <span class=\"attr\">steps:</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Checkout</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/checkout@v2</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">ref:</span> <span class=\"string\">master</span></span><br><span class=\"line\">      <span class=\"comment\"># 安装 Node.js    </span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Setup</span> <span class=\"string\">Node</span></span><br><span class=\"line\">        <span class=\"attr\">uses:</span> <span class=\"string\">actions/setup-node@v1</span></span><br><span class=\"line\">        <span class=\"attr\">with:</span></span><br><span class=\"line\">          <span class=\"attr\">node-version:</span> <span class=\"string\">\"12.x\"</span></span><br><span class=\"line\">          <span class=\"attr\">registry-url:</span> <span class=\"string\">https://registry.npmjs.org/</span></span><br><span class=\"line\">        </span><br><span class=\"line\">      <span class=\"comment\"># rawimg/ 作为原始图片存储，webpimg/ 作为压缩图片存储处，最后合并。</span></span><br><span class=\"line\">      <span class=\"comment\"># 安装相关插件，转换图片。</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Install</span> <span class=\"string\">&amp;</span> <span class=\"string\">Convert</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">npm</span> <span class=\"string\">install</span> <span class=\"string\">-g</span> <span class=\"string\">webp-batch-convert</span></span><br><span class=\"line\">          <span class=\"string\">cwebp-batch</span> <span class=\"string\">--in</span> <span class=\"string\">rawimg</span> <span class=\"string\">--out</span> <span class=\"string\">webpimg</span> <span class=\"string\">-q</span> <span class=\"number\">75</span> <span class=\"string\">-quiet</span></span><br><span class=\"line\">          <span class=\"string\">mv</span> <span class=\"string\">webpimg/*.webp</span> <span class=\"string\">rawimg/</span></span><br><span class=\"line\">          </span><br><span class=\"line\">      <span class=\"comment\"># 发布 NPM 包</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Publish</span> <span class=\"string\">Package</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">config</span> <span class=\"string\">--global</span> <span class=\"string\">user.email</span> <span class=\"string\">\"icolabot@e.yfun.top\"</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">config</span> <span class=\"string\">--global</span> <span class=\"string\">user.name</span> <span class=\"string\">\"iColaBot\"</span></span><br><span class=\"line\">          <span class=\"string\">npm</span> <span class=\"string\">version</span> <span class=\"string\">patch</span></span><br><span class=\"line\">          <span class=\"string\">npm</span> <span class=\"string\">publish</span></span><br><span class=\"line\">        <span class=\"attr\">env:</span></span><br><span class=\"line\">          <span class=\"attr\">NODE_AUTH_TOKEN:</span> <span class=\"string\">${{secrets.npm_token}}</span></span><br><span class=\"line\">          </span><br><span class=\"line\">      <span class=\"comment\"># 删除 rawimg/ 和 webpimg/ 下的所有文件</span></span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Delete</span> <span class=\"string\">Files</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">rm</span> <span class=\"string\">-rf</span> <span class=\"string\">webpimg/*</span></span><br><span class=\"line\">          <span class=\"string\">rm</span> <span class=\"string\">-rf</span> <span class=\"string\">rawimg/*</span></span><br><span class=\"line\">          <span class=\"string\">touch</span> <span class=\"string\">webpimg/.gitkeep</span></span><br><span class=\"line\">          <span class=\"string\">touch</span> <span class=\"string\">rawimg/.gitkeep</span></span><br><span class=\"line\">          </span><br><span class=\"line\">      <span class=\"bullet\">-</span> <span class=\"attr\">name:</span> <span class=\"string\">Push</span></span><br><span class=\"line\">        <span class=\"attr\">run:</span> <span class=\"string\">|</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">add</span> <span class=\"string\">-A</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">commit</span> <span class=\"string\">-m</span> <span class=\"string\">\"Publish\"</span></span><br><span class=\"line\">          <span class=\"string\">git</span> <span class=\"string\">push</span> <span class=\"string\">origin</span> <span class=\"string\">master</span></span><br></pre></td></tr></table></figure>\n</div></details><h2>\n<a href=\"https://blog.yfun.top/#%E4%BD%BF%E7%94%A8\" class=\"headerlink\" title=\"使用\"></a>使用</h2>\n<h3>\n<a href=\"https://blog.yfun.top/#%E4%B8%8A%E4%BC%A0\" class=\"headerlink\" title=\"上传\"></a>上传</h3>\n<p>将图片文件上传至仓库的 <code>rawimg/</code> 文件夹下即可。</p>\n<p>当然也可以使用 PicGo / UPic / HexoPlusPlus 等工具上传。</p>\n<h3>\n<a href=\"https://blog.yfun.top/#%E5%8F%91%E5%B8%83\" class=\"headerlink\" title=\"发布\"></a>发布</h3>\n<p>在 GitHub 中新建 Release，将自动修改版本号并发布 NPM 包，无需手动修改 <code>package.json</code>。</p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/t2afFy.png\"></p>\n<p><img src=\"https://cdn.jsdelivr.net/npm/ocoke-osg@0.0.8/rawimg/0wAmRV.png\"></p>\n<h3>\n<a href=\"https://blog.yfun.top/#%E8%AE%BF%E9%97%AE\" class=\"headerlink\" title=\"访问\"></a>访问</h3>\n<h4>\n<a href=\"https://blog.yfun.top/#%E6%8E%A8%E8%8D%90%E7%9A%84%E9%95%9C%E5%83%8F\" class=\"headerlink\" title=\"推荐的镜像\"></a>推荐的镜像</h4>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://cdn.jsdelivr.net/npm/  <span class=\"comment\"># jsDelivr</span></span><br><span class=\"line\">https://unpkg.zhimg.com/ <span class=\"comment\"># 知乎</span></span><br><span class=\"line\">https://code.bdstatic.com/npm/ <span class=\"comment\"># 百度 (不推荐)</span></span><br><span class=\"line\">https://shadow.elemecdn.com/npm/ <span class=\"comment\"># 饿了么</span></span><br><span class=\"line\">https://unpkg.com/ <span class=\"comment\"># Unpkg</span></span><br></pre></td></tr></table></figure><p>镜像推荐选择访问速度快的，比较稳定的，拉取速度快的。</p>\n<p>我选择的是 jsDelivr，国内外速度都很优秀。</p>\n<h4>\n<a href=\"https://blog.yfun.top/#%E9%93%BE%E6%8E%A5\" class=\"headerlink\" title=\"链接\"></a>链接</h4>\n<p>以 jsDelivr 为例，原图链接为：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://cdn.jsdelivr.net/npm/[package-name]@[version]/rawimg/[filename].[suffix]</span><br></pre></td></tr></table></figure><p>WebP 图片链接为：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><span class=\"line\">https://cdn.jsdelivr.net/npm/[package-name]@[version]/rawimg/[filename].webp</span><br></pre></td></tr></table></figure><table>\n<thead><tr>\n<th>[值]</th>\n<th>说明</th>\n</tr></thead>\n<tbody>\n<tr>\n<td><code>package-name</code></td>\n<td>NPM 包的名称 (<code>package.json</code> 文件中 <code>name</code> 的值)</td>\n</tr>\n<tr>\n<td><code>version</code></td>\n<td>当前版本 (<code>package.json</code> 文件中 <code>version</code> 的值，通常需要在发布 Release 1 分钟后更新)</td>\n</tr>\n<tr>\n<td><code>filename</code></td>\n<td>文件名</td>\n</tr>\n<tr>\n<td><code>suffix</code></td>\n<td>文件后缀名</td>\n</tr>\n</tbody>\n</table>\n","link":"https://blog.yfun.top/posts/2876015612/"},{"title":"使用 JS 检测网址能否正常加载","date":"2021-04-09 12:42:00","description":"\n<p>有时我们需要判断用户能否加载某些网页或服务，如 Google、Disqus 等。</p>\n<p>而我们可以用 JavaScript 来实现这样的检测功能。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%96%B9%E6%B3%95%E4%B8%80\" class=\"headerlink\" title=\"方法一\"></a>方法一</h2>\n<p>使用 JavaScript 创建一个图片，设置图片的链接为 检测网址 + <code>favicon.ico</code>。</p>\n<p><code>onerror</code> 事件触发不能加载的事件，<code>onload</code> 事件触发可以加载的事件，并使用 <code>setTimeout</code> 设置超时时间。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 新建一个图片</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> img = <span class=\"keyword\">new</span> Image();</span><br><span class=\"line\"><span class=\"comment\">// 设置图片的链接</span></span><br><span class=\"line\">img.src = <span class=\"string\">\"https://google.com/favicon.ico\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设定超时事件，延迟 3000 毫秒</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 清除 onerror 和 onload 事件</span></span><br><span class=\"line\">img.onerror = img.onload = <span class=\"literal\">null</span>;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"time out.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行无法加载的事件</span></span><br><span class=\"line\">    canNotLoad();</span><br><span class=\"line\">},<span class=\"number\">3000</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设定错误事件</span></span><br><span class=\"line\">img.onerror = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 先清除超时事件</span></span><br><span class=\"line\"><span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"load error.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行无法加载的事件</span></span><br><span class=\"line\">    canNotLoad();</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设定可以加载的事件</span></span><br><span class=\"line\">img.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 先清除超时事件</span></span><br><span class=\"line\"><span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">\"ok.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行可以加载的事件</span></span><br><span class=\"line\">    canLoad();</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">canNotLoad</span>(<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">/* code here */</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"无法加载\"</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">canLoad</span>(<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">/* code here */</span></span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"可以加载\"</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure><p>缺点：不是每一个网站都存在 <code>/favicon.ico</code> 文件，但如果加载特定文件的话挺好的。</p>\n<h2>\n<a href=\"https://blog.yfun.top/#%E6%96%B9%E6%B3%95%E4%BA%8C\" class=\"headerlink\" title=\"方法二\"></a>方法二</h2>\n<p>使用 JavaScript 创建一个 iframe 标签，设置标签的链接为 检测网址。</p>\n<p><code>onerror</code> 事件触发不能加载的事件，<code>onload</code> 事件触发可以加载的事件，并使用 <code>setTimeout</code> 设置超时时间。</p>\n<p>代码：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 新建 iframe 标签</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> iframe = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">\"iframe\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设置 iframe 标签的网址</span></span><br><span class=\"line\">iframe.src=<span class=\"string\">\"https://google.com\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 设定超时事件，延迟 3000 毫秒</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> timeout = <span class=\"built_in\">setTimeout</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 清除 onerror 和 onload 事件</span></span><br><span class=\"line\">    iframe.onerror = iframe.onload = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"time out.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行无法加载的事件</span></span><br><span class=\"line\">    canNotLoad();</span><br><span class=\"line\">},<span class=\"number\">3000</span>);</span><br><span class=\"line\"><span class=\"comment\">// 设定错误事件</span></span><br><span class=\"line\">iframe.onerror = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 先清除超时事件</span></span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"load error.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行无法加载的事件</span></span><br><span class=\"line\">    canNotLoad();</span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\">// 设定可以加载的事件</span></span><br><span class=\"line\">iframe.onload = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">// 先清除超时事件</span></span><br><span class=\"line\">    <span class=\"built_in\">clearTimeout</span>(timeout);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"ok.\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// 执行可以加载的事件</span></span><br><span class=\"line\">    canLoad();</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">canNotLoad</span>(<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">/* code here */</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">canLoad</span>(<span class=\"params\"></span>) </span>{</span><br><span class=\"line\">    <span class=\"comment\">/* code here */</span></span><br><span class=\"line\">}</span><br><span class=\"line\"><span class=\"comment\">// 设定为不可见</span></span><br><span class=\"line\">iframe.style = <span class=\"string\">\"display: none!important;\"</span>;</span><br><span class=\"line\"><span class=\"comment\">// 向 body 添加 iframe</span></span><br><span class=\"line\"><span class=\"built_in\">document</span>.body.appendChild(iframe);</span><br></pre></td></tr></table></figure><p>缺点：页面上的其他外部链接也会被一并的加载过来，例如 JS 文件，CSS 文件，统计代码。</p>\n<p>您也可以 <a href=\"https://codepen.io/ocoke-the-decoder/pen/dyNZEwq\">点击此链接</a> 前往 CodePen 体验。</p>\n","link":"https://blog.yfun.top/posts/856484826/"},{"title":"无垠 2020 年度总结","date":"2020-12-29 21:04:02","description":"\n<p>2020 即将过去，2021 已在眼前。2020 实在是多灾多难的一年，新冠疫情可以说是严重打乱了我的生活计划，希望新的一年，一切都可以变好吧。</p>\n<p>2020 还剩下最后两天，是时候总结一下这一年了。</p>\n<h1>统计数据</h1>\n<p>依然是一些统计数据。以下数据截止 2020 年 12 月 29 日 23:39:59。</p>\n<h2>博客主站</h2>\n<p>无垠博客主站，年 UV 28,888 (<span>+7.4%</span>)，年 PV 76,583 (<span>-1.66%</span>)，日均 UV 79.36，平均停留时间 4分8秒 (<span>-21.4%</span>)，平均跳出率 51% (<span>-3.77%</span>)。一年有效文章数 5 (<span>+150%</span>)，新增评论 242 条 (<span>-44.9%</span>)。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/blog-2020.png\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/blog-2020.png\" alt=\"\" width=\"515\" height=\"670\" class=\"aligncenter size-full wp-image-2432\"></a>\n<p>文章数提升，访问量也有所提升，但 PV 和停留时间却下降了，或许我还需要继续提高文章的质量...</p>\n<h2>个人主页</h2>\n<p>个人主页依然是几乎没有更新过。什么时候能把 TODO List 上的东西做了呢？我也不知道。不过访问量倒是比去年上升了不少。</p>\n<p>个人页总 UV 3,515 (<span>+64.2%</span>)，总 PV 3,929 (<span>+43.2%</span>)，日均 UV 9.9 (<span>+65%</span>)，平均停留时间 63秒 (<span>+1.6%</span>)。和去年一样，主要来源是知乎和 V2EX。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/axton-2020.png\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/axton-2020.png\" alt=\"\" width=\"515\" height=\"670\" class=\"aligncenter size-full wp-image-2433\"></a>\n<h2>MDx</h2>\n<p>一年中，MDx 更新了 7 次，新增 328 commits (<span>+91.8%</span>)，Star 数增加了 306，现有 614。感谢所有人的支持。当然，虽然 2.0 咕咕咕了很久（甚至离最早的承诺已经过去将近一年半了），但我已经在对 2.0 进行最后的完善（改动确实比较大）。相信在 2021 的开头，MDx 2.0 就能顺利发布了。</p>\n<div class=\"mdx-github-cot\" data-mdxgithuba=\"yrccondor\" data-mdxgithubp=\"mdx\" data-mdxgithubg=\"https://api.github.com/\"><div class=\"mdx-github-wait-out-c2\"><div class=\"mdx-github-wait-out-c mdui-valign\"><div class=\"mdx-github-wait-out\"><div class=\"mdx-github-wait\"><a href=\"https://github.com/yrccondor/mdx\"><div class=\"mdui-spinner\"></div></a></div></div></div></div></div>\n<h1>大事记</h1>\n<ul>\n<li>一月：我经历过的最长的“寒假”开始了</li>\n<li>二月：GitHub followers 换虚拟币，成功换到 3.5k CNY 没有翻车</li>\n<li>三月：<a href=\"https://flyhigher.top/develop/2160.html\">WP-WebAuthn</a> 插件成功上线 <a href=\"https://wordpress.org/plugins/wp-webauthn/\">WordPress 插件目录</a>\n</li>\n<li>四月：Cytus II 主线大结局<del>，我当场通关 </del>\n</li>\n<li>五月：开始学车</li>\n<li>五月：MDx 达到 500 Stars</li>\n<li>七月：第一次实习，公司的前端技术栈和我熟悉的完全一致<del>，于是愉快地在公司里写了一个半月的各种表格 </del>\n</li>\n<li>八月：实习结束，部门同事都很棒，确实学到了很多</li>\n<li>九月：和 Ralph 面基一整天</li>\n<li>九月：入手树莓派 4B</li>\n<li>十月：搬家</li>\n<li>十月：和宁诺合作的 H5 上线</li>\n<li>十一月：TEDxNingbo 年度大会，H5 上线<del>，持续摸鱼中 </del>\n</li>\n<li>十一月：终于买了块副屏，<del> 秃头 </del>写代码更快乐了</li>\n<li>十二月：MDx 喜提 600 Stars</li>\n</ul>\n<h1>跨年红包</h1>\n<p><del>传统艺能时间！和以前一样，红包不是白拿的，你需要一点点技术力来解密拿到红包。有效期截至 2021 年 1 月 1 日 22 时。</del></p>\n<p>今年的解谜旅程，从下面这段颜文字开始。</p>\n<pre>ﾟωﾟﾉ= /｀ｍ´）ﾉ ~┻━┻   //*´∇｀*/ ['_']; o=(ﾟｰﾟ)  =_=3; c=(ﾟΘﾟ) =(ﾟｰﾟ)-(ﾟｰﾟ); (ﾟДﾟ) =(ﾟΘﾟ)= (o^_^o)/ (o^_^o);(ﾟДﾟ)={ﾟΘﾟ: '_' ,ﾟωﾟﾉ : ((ﾟωﾟﾉ==3) +'_') [ﾟΘﾟ] ,ﾟｰﾟﾉ :(ﾟωﾟﾉ+ '_')[o^_^o -(ﾟΘﾟ)] ,ﾟДﾟﾉ:((ﾟｰﾟ==3) +'_')[ﾟｰﾟ] }; (ﾟДﾟ) [ﾟΘﾟ] =((ﾟωﾟﾉ==3) +'_') [c^_^o];(ﾟДﾟ) ['c'] = ((ﾟДﾟ)+'_') [ (ﾟｰﾟ)+(ﾟｰﾟ)-(ﾟΘﾟ) ];(ﾟДﾟ) ['o'] = ((ﾟДﾟ)+'_') [ﾟΘﾟ];(ﾟoﾟ)=(ﾟДﾟ) ['c']+(ﾟДﾟ) ['o']+(ﾟωﾟﾉ +'_')[ﾟΘﾟ]+ ((ﾟωﾟﾉ==3) +'_') [ﾟｰﾟ] + ((ﾟДﾟ) +'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ ((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [(ﾟｰﾟ) - (ﾟΘﾟ)]+(ﾟДﾟ) ['c']+((ﾟДﾟ)+'_') [(ﾟｰﾟ)+(ﾟｰﾟ)]+ (ﾟДﾟ) ['o']+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ];(ﾟДﾟ) ['_'] =(o^_^o) [ﾟoﾟ] [ﾟoﾟ];(ﾟεﾟ)=((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟДﾟ) .ﾟДﾟﾉ+((ﾟДﾟ)+'_') [(ﾟｰﾟ) + (ﾟｰﾟ)]+((ﾟｰﾟ==3) +'_') [o^_^o -ﾟΘﾟ]+((ﾟｰﾟ==3) +'_') [ﾟΘﾟ]+ (ﾟωﾟﾉ +'_') [ﾟΘﾟ]; (ﾟｰﾟ)+=(ﾟΘﾟ); (ﾟДﾟ)[ﾟεﾟ]='\\\\'; (ﾟДﾟ).ﾟΘﾟﾉ=(ﾟДﾟ+ ﾟｰﾟ)[o^_^o -(ﾟΘﾟ)];(oﾟｰﾟo)=(ﾟωﾟﾉ +'_')[c^_^o];(ﾟДﾟ) [ﾟoﾟ]='\\\"';(ﾟДﾟ) ['_'] ( (ﾟДﾟ) ['_'] (ﾟεﾟ+(ﾟДﾟ)[ﾟoﾟ]+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ (ﾟｰﾟ)+ (o^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (o^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ (ﾟｰﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ (ﾟｰﾟ)+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ (c^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟｰﾟ)+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (c^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (c^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (o^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (o^_^o))+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (c^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ (ﾟｰﾟ)+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟΘﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((o^_^o) +(o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (o^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟΘﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ ((o^_^o) +(o^_^o))+ (ﾟｰﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟΘﾟ)+ (ﾟｰﾟ)+ ((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o))+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o))+ (c^_^o)+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o))+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((o^_^o) +(o^_^o))+ (ﾟΘﾟ)+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ ((ﾟｰﾟ) + (o^_^o))+ (ﾟДﾟ)[ﾟεﾟ]+(ﾟｰﾟ)+ ((o^_^o) - (ﾟΘﾟ))+ (ﾟДﾟ)[ﾟεﾟ]+((ﾟｰﾟ) + (ﾟΘﾟ))+ (ﾟΘﾟ)+ (ﾟДﾟ)[ﾟoﾟ]) (ﾟΘﾟ)) ('_')</pre>\n<p><del>和去年一样，红包限时不限量。</del>为了保持解谜乐趣，请不要将答案透露给他人，也请不要重复领取红包，否则视情况活动可能会提前结束。</p>\n<p>由于出现大量重复领取/未解题即领取红包的现象，红包解谜活动立即结束，当前红包领完后将不再更新新的红包口令码。<strong>我发起红包解谜活动是为了解题的乐趣而不是发钱，请各位理解。</strong>以下是详细信息。</p>\n<p>出于对参与者的信任，今年的题目中没有对参与者是否已完成前序步骤进行任何验证，但在最后的 WebSocket 中我记录下了所有成功连接的 IP。今年共发出了 32 个红包，但最后一个步骤的日志只记录到了 25 个不重复 IP（鉴于第一批 10 个红包领完时只记录到了四个 IP，实际人数应该小于 25）。查阅支付宝的红包领取记录可以发现有多位用户多次领取了红包，还有一些用户疑似是从他人处获取答案并直接领取的。鉴于活动已经完全失去意义，我选择提前结束了红包解谜活动。</p>\n<h2>红包答案</h2>\n<p>现在，让我们来看看答案吧。今年的题目难度不高，由于事情比较多，我的准备时间确实不多。</p>\n<p>第一阶段非常简单，这段颜文字就是 Javascript，只是使用了著名的 aaencode 将其编码为了颜文字<del>（多亏了 js 优秀的自动类型转换）</del>。将这段颜文字扔进浏览器控制台即可得到 <code>https://rp.dlij.site/2021/</code>。</p>\n<p>前往这个 URL，可以看到这张图。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/index.png\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/index.png\" alt=\"\" width=\"2000\" height=\"1125\" class=\"aligncenter size-full wp-image-2444\"></a>\n<p>今年八月宝塔面板 7.4.2 的 phpMyAdmin 未授权访问漏洞很多人都知道了，如果你不清楚，搜索“宝塔面板 7.4.2”也能找到相关信息。首先找到 <code>rp.dlij.site</code> 对应的 IP 是 <code>121.196.27.125</code>，访问 <code>http://121.196.27.125:888/pma</code> 即可看到一个 phpMyAdmin 的界面（为了把这个页面扒下来我还装了一个真的宝塔面板...）。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/pma.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/pma.jpg\" alt=\"\" width=\"1600\" height=\"867\" class=\"aligncenter size-full wp-image-2448\"></a>\n<p>可以看到信息是 <code>7972632E6D652F6738546D444A3132</code>。和前年一样，这其实是十六进制的 ASCII 码，每两位转为 ASCII 字符即可得到 <code>yrc.me/g8TmDJ12</code>。访问这个页面，可以看到如下信息。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/apl.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/apl.jpg\" alt=\"\" width=\"1500\" height=\"248\" class=\"aligncenter size-full wp-image-2447\"></a>\n<p>这是 APL，一种有趣的函数式编程语言。你可能不了解它，但只要你搜索网页的 <code>title</code>，就能找到这个在线运行 APL 的页面：<a href=\"https://tryapl.org/\">TryAPL</a>。在这个页面中粘贴这段代码，即可得到 <code>https://rp.dlij.site/2021/2554038.75</code>。访问这个 URL，可以看到一张图。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/2021-b.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/2021-b.jpg\" alt=\"\" width=\"720\" height=\"960\" class=\"aligncenter size-full wp-image-2445\"></a>\n<p>连续三年的传统艺能了，压缩包藏在了图片里。下载图片，将后缀改为 .zip 然后打开，可以看到一个 README.md。其中要求我们去 <code>ws://121.196.27.125:8080/NvAhoZ9@H2Au</code> 获取最终红包口令码。这是一个 WebSocket 协议的地址，在浏览器中开一个新 Console，执行 <code>new WebSocket('ws://121.196.27.125:8080/NvAhoZ9@H2Au')</code> 即可在 Network 选项卡中看见服务器下发的红包口令码。当然，别忘了将其反转。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/message.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/message.jpg\" alt=\"\" width=\"475\" height=\"179\" class=\"aligncenter size-full wp-image-2446\"></a>\n<h1>跨年海报</h1>\n<p>依然是传统艺能，今年的海报只用到了 PS。</p>\n<a href=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/2021.jpg\"><img loading=\"lazy\" src=\"https://acdn.flyhigher.top/wp-content/uploads/2020/12/2021.jpg\" alt=\"2021\" width=\"720\" height=\"960\" class=\"aligncenter size-full wp-image-2407\"></a>\n<p>提前祝各位新年快乐！</p>\n","link":"https://flyhigher.top/diary/2405.html"},{"title":"[译] HentaiVerse 建议和指导","date":"2020-12-24 22:31:00","description":"\n<p>著名的同人本资源集散地 E-hentai 有一个完全没有人在意的角落 ——「HentaiVerse」，一个纯文字网页 RPG 游戏。虽然这个游戏应该不会有太多新玩家了，不过还是翻译一篇给新玩家的指导文吧。</p>\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/209138/1/18651/50218/622032acEf83a8d68/fc6db86aebb679ff.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/hentaiverse-advice/\">https://blog.skk.moe/post/hentaiverse-advice/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/hentaiverse-advice/"},{"title":"ZSH 自动读取 macOS 系统代理配置并设置环境变量","date":"2020-12-07 02:47:00","description":"\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/207910/19/18573/59096/622032b0E05c1d4be/5d89d557f7889730.jpg\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/macos-auto-read-proxy-settings-zsh/\">https://blog.skk.moe/post/macos-auto-read-proxy-settings-zsh/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/macos-auto-read-proxy-settings-zsh/"},{"title":"谈谈 Apple M1 芯片、ARM、ARM Mac 和黑苹果的未来","date":"2020-11-11 16:13:00","description":"\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/138186/40/23101/50775/622032b3Efa9053d7/df3a819d044a9455.jpg\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/talk-about-arm-m1-mac/\">https://blog.skk.moe/post/talk-about-arm-m1-mac/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/talk-about-arm-m1-mac/"},{"title":"USTC Hackergame 2020（中科大信安赛）write up","date":"2020-11-06 22:00:00","description":"\n<p>作为一只 CS 零基础、信安零基础、CTF 零基础的菜狐狐，苏卡卡今年又来参加 USTC Hackergame 啦！由于一边做题一边总结思路（指写 Write Up），所以苏卡卡应该是第一个发布非官方的 USTC Hackergame 2020 Write Up 的吧（嘿嘿）。</p>\n<blockquote>\n<p>题图来自 USTC Hackergame 2019「Happy LUG」</p>\n</blockquote>\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/90743/25/22680/55545/622032abE6ef31d51/cfc4cb389c994c17.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/hackergame-2020-write-up/\">https://blog.skk.moe/post/hackergame-2020-write-up/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/hackergame-2020-write-up/"},{"title":"Bilibili 2020「1024 程序员节」CTF Write Up","date":"2020-10-25 09:44:00","description":"\n<blockquote>\n<p>周六不放假休息，还在这加班搞 CTF？</p>\n</blockquote>\n<p>10 月 24 日不睡觉、凌晨两点钟我还在水群，结果在 USTC@LUG 的群里看见有人在打 Bilibili 的 CTF。我刚刚好一年（指 370 天）没有打过 CTF 了（上一次打正式的 CTF 还是去年参加的 <a href=\"https://blog.skk.moe/post/hackergame-2019-write-up/\">USTC Hackergame 2019</a>），所以想着来玩玩。虽然 CTF 结束之前不应该分享和公开 Write Up 和题解，不过 Bilibili 这 CTF 既然这么离谱，那我也没必要按照常理出牌。</p>\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/86535/11/24318/75037/622032a8E4f94d4ae/89703ccc122cf4e0.jpg\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/2020-bilibili-1024-ctf-write-up/\">https://blog.skk.moe/post/2020-bilibili-1024-ctf-write-up/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/2020-bilibili-1024-ctf-write-up/"},{"title":"从 Google Analytics 的统计代码说起 —— 谈谈 script 标签的 async 和 defer 属性","date":"2020-10-13 09:25:00","description":"\n<img src=\"https://img10.360buyimg.com/ddimg/jfs/t1/80291/2/16552/19311/622032b3Eb300c2aa/66748fc8124a01c5.png\"><br><p>请前往 <a href=\"https://blog.skk.moe/post/script-async-defer/\">https://blog.skk.moe/post/script-async-defer/</a> 阅读全文</p>\n","link":"https://blog.skk.moe/post/script-async-defer/"},{"title":"谈谈 WebAuthn","date":"2020-03-23 14:57:59","description":"WebAuthn，即 Web Authentication，是一个用于在浏览器上进行认证的 API，W3C 将 […]","link":"https://flyhigher.top/develop/2160.html"}]